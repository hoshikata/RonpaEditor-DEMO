import{_ as I,o as _,c as p,a,r as S,w as D,k as N,j as C,l as le,m as ie,p as ue,q as _e,x as R,F as A,i as q,t as B,v as O,h as U,y as ve,z as pe,n as c,u as he,s as Y,b as me,d as j,e as Z,f as x,g as n,A as z,B as fe,C as ye,D as ee}from"./index-lahQZADd.js";import{I as be}from"./Menu.vue_vue_type_style_index_0_scoped_460a9451_lang-DT9hWEFc.js";import{W as ge}from"./Wrap-DEJKOMd-.js";import{C as G,D as te,u as ke}from"./useDrag-WE4rckX4.js";import{D as we,M as xe}from"./Dialog-C872jMJO.js";import{M as Ue}from"./Mark-DBQgAFaY.js";const $e={name:"MdiExclamationThick"},Se={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ce=a("path",{fill:"currentColor",d:"M10 3h4v11h-4zm0 18v-4h4v4z"},null,-1),De=[Ce];function Be(l,y,b,g,v,r){return _(),p("svg",Se,De)}const Me=I($e,[["render",Be]]),Ie=["disabled","placeholder"],$={__name:"Input",props:{value:{type:[String,Number],default:""},disabled:{type:[Boolean],default:!1},placeholder:{type:[String],default:""}},emits:["update:value"],setup(l,{emit:y}){const b=l,g=y,v=S("");return D(v,r=>g("update:value",r)),D(()=>b.value,r=>v.value=r,{immediate:!0}),(r,u)=>{const h=N("verify");return C((_(),p("input",{"onUpdate:modelValue":u[0]||(u[0]=k=>v.value=k),disabled:l.disabled,placeholder:l.disabled?"":l.placeholder},null,8,Ie)),[[le,v.value,void 0,{lazy:!0,trim:!0}],[h,void 0,void 0,{check:!0}]])}}},Te=["disabled","placeholder"],Ve=["value"],Ee={__name:"Select",props:{value:{type:[String,Number],default:""},options:{type:[Array],default:()=>[]},disabled:{type:[Boolean],default:!1},placeholder:{type:[String],default:""}},emits:["update:value"],setup(l,{emit:y}){ie(u=>({"4ad1a84a":U(v).light.text}));const b=l,g=y,{colors:v}=ue(),r=S("");return D(r,u=>g("update:value",u)),D(()=>b.value,u=>r.value=u,{immediate:!0}),(u,h)=>{const k=N("verify");return C((_(),p("select",{class:"select","onUpdate:modelValue":h[0]||(h[0]=d=>r.value=d),disabled:l.disabled,placeholder:l.disabled?"":l.placeholder},[R(u.$slots,"default",{},void 0,!0),(_(!0),p(A,null,q(l.options,d=>C((_(),p("option",{value:d.id??d},B(d.title??d.id??d),9,Ve)),[[O,d.show??!0]])),256))],8,Te)),[[_e,r.value,void 0,{lazy:!0,trim:!0}],[k,void 0,void 0,{check:!0}]])}}},P=I(Ee,[["__scopeId","data-v-1b98bee5"]]),Fe=["disabled","placeholder"],ae={__name:"Textarea",props:{value:{type:[String,Number],default:""},disabled:{type:[Boolean],default:!1},placeholder:{type:[String],default:""}},emits:["update:value","selected"],setup(l,{emit:y}){const b=l,g=y,v=S(null),r=S(""),u=h=>{if(!h.ctrlKey)return;const{selectionStart:k,selectionEnd:d}=v.value;g("selected",{start:k,end:d})};return D(r,h=>g("update:value",h)),D(()=>b.value,h=>r.value=h,{immediate:!0}),(h,k)=>{const d=N("verify");return C((_(),p("textarea",{class:"scrollbar min-h-0 resize-none","onUpdate:modelValue":k[0]||(k[0]=L=>r.value=L),disabled:l.disabled,placeholder:l.disabled?"":l.placeholder,onKeydown:ve(u,["q"]),ref_key:"textarea",ref:v},null,40,Fe)),[[le,r.value,void 0,{lazy:!0,trim:!0}],[d,void 0,void 0,{check:!0}]])}}},ze=["disabled"],Ae={class:"whitespace-nowrap"},Ne={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(l,{emit:y}){const b=l,g=y,v=S(0);return D(v,r=>g("update:value",r)),D(()=>b.value,r=>v.value=r,{immediate:!0}),(r,u)=>(_(),p("label",{class:c(["inline-flex items-center",l.disabled?"cursor-auto":"cursor-pointer"])},[C(a("input",{class:c(["checkbox",l.box]),"onUpdate:modelValue":u[0]||(u[0]=h=>v.value=h),disabled:l.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,ze),[[pe,v.value]]),a("span",Ae,B(l.title),1),R(r.$slots,"default",{},void 0,!0)],2))}},se=I(Ne,[["__scopeId","data-v-b7a95cdd"]]),Le={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(l){return(y,b)=>(_(),p("button",{class:c(["switch",{"bg-current":l.active}])},[a("span",{class:c(["-mt-0.1em",{"text-white":l.active}])},[R(y.$slots,"default",{},void 0,!0)],2)],2))}},M=I(Le,[["__scopeId","data-v-8bd1e4e9"]]),m=l=>(fe("data-v-8291a845"),l=l(),ye(),l),Ke={class:"side_list"},je={class:"flex"},Ge=["onClick","title"],Pe={class:"chapter_head"},qe={class:"mr-9 grid xl:mr-0"},Oe=["title"],Re=m(()=>a("span",{class:"chapter_head_number"},"01.png",-1)),We=m(()=>a("p",{class:"chapter_head_desc"},[ee("目が覚めたら見知らぬ教室、辺るは水族館のような不思議な光景…自己紹介した後、どこから来た「モノカイ」と自称するぬいぐるみは俺たちをここでコロシアイ学園生活を強いられた。ここから脱出する条件は一つ――誰にばれないように殺人をすることだった。"),a("br"),ee("目が覚めたら見知らぬ教室、辺るは水族館のような不思議な光景…自己紹介した後、どこから来た「モノカイ」と自称するぬいぐるみは俺たちをここでコロシアイ学園生活を強いられた。ここから脱出する条件は一つ――誰にばれないように殺人をすることだった。")],-1)),He={class:"mr-9 flex items-end justify-end gap-2 xl:mr-0"},Je=m(()=>a("span",{class:"text-xs opacity-50"},"セリフにキーワードを指定したい場合は、文字を[ ]で囲んでください。",-1)),Qe={class:"chapter_log"},Xe=m(()=>a("div",{class:"chapter_log_tr -lock"},[a("div",{class:"chapter_log_th ml-16"},"セリフ＆切り替え＆演出"),a("div",{class:"ml-4 w-8 shrink-0"})],-1)),Ye=m(()=>a("div",{class:"chapter_log_tr_2 -lock"},[a("div",{class:"chapter_log_th -col"},"話し手．主人公差分＆エフェクト"),a("div",{class:"chapter_log_th -col"},"脇役．差分＆エフェクト"),a("div",{class:"chapter_log_th -col"},"SE"),a("div",{class:"chapter_log_th -col"},"ボイス"),a("div",{class:"chapter_log_th -col"},"備考")],-1)),Ze={key:0,class:"contents"},et=["draggable","onDragstart","onDragend"],tt={class:"chapter_log_scene"},at=m(()=>a("div",{class:"ml-2 w-8 shrink-0"},null,-1)),st={class:"chapter_log_tr_2"},lt=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),nt=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),ot=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),ct=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),dt={class:"chapter_log_td -col"},rt={key:1,class:"contents"},it=["draggable","onDragstart","onDragend"],ut={class:"chapter_log_avatar"},_t=["src"],vt={class:"chapter_log_switches"},pt=m(()=>a("span",{class:"dark:text-dark-wrap"},"R",-1)),ht=m(()=>a("span",{class:"dark:text-dark-wrap"},"U",-1)),mt=m(()=>a("span",{class:"dark:text-dark-wrap"},"S",-1)),ft={class:"chapter_log_tr_2"},yt={class:"chapter_log_td -col"},bt=m(()=>a("option",{class:"text-primary",value:""},"話し手",-1)),gt={class:"chapter_log_td -col"},kt=m(()=>a("option",{value:""},"脇役",-1)),wt={class:"chapter_log_td -col"},xt={class:"chapter_log_td -col"},Ut={class:"chapter_log_td -col"},$t={__name:"Chapters",setup(l){const y=he(),{characterList:b}=Y(y),g=me(),{newChapter:v,dialogType:r}=g,{chapterIndex:u,chapterNames:h,chapterTitle:k,chapterData:d}=Y(g),{dragMove:L,dropMove:ne}=ke(),oe=s=>[{id:"BG",show:s.人物==="場景(切換)"},{id:"BGM",show:s.人物==="場景(切換)"},{id:"CG",show:s.人物==="演出"},{id:"暗場",show:s.人物==="演出"},{id:"動畫",show:s.人物==="演出"}],W=j(()=>b.value.map(s=>({id:s.name}))),w=s=>({"!bg-secondary !text-black/60 dark:!text-neutral-800/75":!!s}),T=s=>b.value.find(o=>(s.人物??"")===o.name)??{},ce=(s,o)=>{const f=o.和訳,e=f.slice(0,s.start),i=f.slice(s.start,s.end),t=f.slice(s.end);o.和訳=[e,"[",i,"]",t].join("")},H=j(()=>d.value.some(s=>s.dragging)),K=j(()=>d.value.filter(s=>s.is_selected).map(s=>s.id)),V=(s,o,f)=>{f&&L(s,{index:o}),K.value.some(i=>d.value[o].id===i)||(d.value[o].is_selected=1),K.value.forEach(i=>{const t=d.value.find(re=>re.id===i);t.dragging=f,f||(t.is_selected=0)})},J=(s,o)=>{K.value.forEach(f=>{const e=d.value.findIndex(i=>i.id===f);ne(d.value,e,o)})},Q=S(!1),E=S(0),X=S(null),F=(s,o)=>{E.value=o,X.value=s,Q.value=o===null},de=({type:s})=>{const o=E.value,f=d.value[o];if(s==="delete")f.is_delete=!0;else{const e=E.value===null?d.value.length:E.value+1;d.value.splice(e,0,v(s))}};return(s,o)=>{const f=N("visible");return _(),Z(ge,null,{side:x(()=>[a("ul",Ke,[(_(!0),p(A,null,q(U(h),(e,i)=>(_(),p("li",je,[n(Ue,{class:"mt-0.6em bg-current/10",active:i===U(u)},null,8,["active"]),a("button",{class:c(["side_item",{"side_item-active":i===U(u)}]),onClick:t=>u.value=i,title:e},B(e),11,Ge)]))),256))])]),main_head:x(()=>[a("div",Pe,[a("div",qe,[a("h1",{class:"chapter_head_title",title:U(k)},B(U(k)),9,Oe),Re]),We,a("div",He,[Je,n(M,{class:"bg-keyword text-keyword-dark"},{default:x(()=>[n(Me,{class:"mt-0.1em"})]),_:1}),n(M,{class:"relative text-primary bg-primary/25"},{default:x(()=>[n(U(be),{class:"mt-0.1em"}),n(G,{class:"absolute left-0 top-0 opacity-0",onMore:o[0]||(o[0]=e=>F(e,null)),hasDel:!1,hasAdd:!1})]),_:1})])])]),default:x(()=>[a("div",Qe,[Xe,Ye,n(te,{class:"chapter_log_dragline",onDrop:o[1]||(o[1]=e=>J(e,0)),dragging:H.value},null,8,["dragging"]),(_(!0),p(A,null,q(U(d),(e,i)=>(_(),p(A,{key:e.id},[e.is_showtime?C((_(),p("div",Ze,[a("div",{class:c(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:t=>V(t,i,!0),onDragend:t=>V(t,i,!1),onDrag:o[2]||(o[2]=z(()=>{},["prevent"])),onDrop:o[3]||(o[3]=z(()=>{},["prevent"]))},[a("div",{class:c(["chapter_log_td flex px-2",{"bg-secondary/60":e.is_selected}])},[n(se,{class:"mr-1 shrink-0",value:e.is_selected,"onUpdate:value":t=>e.is_selected=t},null,8,["value","onUpdate:value"]),n(G,{class:"-mx-1 shrink-0 px-1",onMore:t=>F(t,i),hasDel:!1,hasAdd:!1},null,8,["onMore"]),a("div",tt,[a("span",null,B(e.人物),1),n(P,{value:e.show_time,"onUpdate:value":t=>e.show_time=t,options:oe(e),onFocus:t=>e.is_drag=!1,onBlur:t=>e.is_drag=!0,onChange:t=>e.show_name=""},null,8,["value","onUpdate:value","options","onFocus","onBlur","onChange"]),n($,{value:e.show_name,"onUpdate:value":t=>e.show_name=t,onFocus:t=>e.is_drag=!1,onBlur:t=>e.is_drag=!0},null,8,["value","onUpdate:value","onFocus","onBlur"])])],2),at],42,et),a("div",st,[lt,nt,ot,ct,a("div",dt,[n($,{class:c(["-inner",w(e.備註)]),value:e.備註,"onUpdate:value":t=>e.備註=t},null,8,["value","onUpdate:value","class"])])])],512)),[[O,!e.is_delete]]):C((_(),p("div",rt,[a("div",{class:c(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:t=>V(t,i,!0),onDragend:t=>V(t,i,!1),onDrag:o[4]||(o[4]=z(()=>{},["prevent"])),onDrop:o[5]||(o[5]=z(()=>{},["prevent"]))},[a("div",{class:c(["chapter_log_td flex px-2",{"bg-secondary/60":e.is_selected}])},[n(se,{class:"mr-1 shrink-0",value:e.is_selected,"onUpdate:value":t=>e.is_selected=t},null,8,["value","onUpdate:value"]),n(G,{class:"-mx-1 shrink-0 px-1",onMore:t=>F(t,i),hasDel:!1,hasAdd:!1},null,8,["onMore"]),a("div",{class:c(["chapter_log_info",{"flex-row-reverse":T(e).is_hero,"-replay":e.is_replay}])},[C((_(),p("div",ut,[a("img",{src:T(e).image_head},null,8,_t)])),[[f,T(e).image_head]]),a("div",{class:c(["chapter_log_dialog",{"-hero":T(e).is_hero}])},[n(we,{class:"my-auto w-full",value:e.和訳,type:U(r)(e)},null,8,["value","type"]),n(ae,{class:"chapter_log_dialog_input",value:e.和訳,"onUpdate:value":t=>e.和訳=t,onSelected:t=>ce(t,e),onFocus:t=>e.is_drag=!1,onBlur:t=>e.is_drag=!0},null,8,["value","onUpdate:value","onSelected","onFocus","onBlur"])],2)],2)],2),a("div",vt,[n(M,{class:c(["chapter_log_switch",{"text-replay":e.is_replay}]),onClick:t=>e.is_replay=!e.is_replay,active:e.is_replay,title:"再放送"},{default:x(()=>[pt]),_:2},1032,["onClick","active","class"]),n(M,{class:c(["chapter_log_switch",{"text-unknown":e.is_unknown}]),onClick:t=>e.is_unknown=!e.is_unknown,active:e.is_unknown,title:"未紹介"},{default:x(()=>[ht]),_:2},1032,["onClick","active","class"]),n(M,{class:c(["chapter_log_switch",{"text-monolog-dark dark:text-monolog":e.is_solo}]),onClick:t=>e.is_solo=!e.is_solo,active:e.is_solo,title:"独り言"},{default:x(()=>[mt]),_:2},1032,["onClick","active","class"])])],42,it),a("div",ft,[a("div",yt,[e.is_announce||e.is_system?(_(),p("div",{key:0,class:c(["-inner col-span-2",w(!0)])},B(e.人物),3)):(_(),Z(P,{key:1,class:c(["-inner col-span-2",w(e.人物)]),value:e.人物,"onUpdate:value":t=>e.人物=t,options:W.value,placeholder:"話し手"},{default:x(()=>[bt]),_:2},1032,["value","onUpdate:value","options","class"])),n($,{class:c(["-inner",w(e.十六夜差分)]),value:e.十六夜差分,"onUpdate:value":t=>e.十六夜差分=t,placeholder:"主人公差分"},null,8,["value","onUpdate:value","class"]),n($,{class:c(["-inner",w(e.主角特效)]),value:e.主角特效,"onUpdate:value":t=>e.主角特效=t,placeholder:"主人公エフェクト"},null,8,["value","onUpdate:value","class"])]),a("div",gt,[n(P,{class:c(["-inner col-span-2",w(e.顯示角色)]),value:e.顯示角色,"onUpdate:value":t=>e.顯示角色=t,options:W.value,placeholder:"脇役"},{default:x(()=>[kt]),_:2},1032,["value","onUpdate:value","options","class"]),n($,{class:c(["-inner",w(e.角色差分)]),value:e.角色差分,"onUpdate:value":t=>e.角色差分=t,placeholder:"脇役差分"},null,8,["value","onUpdate:value","class"]),n($,{class:c(["-inner",w(e.差分特效)]),value:e.差分特效,"onUpdate:value":t=>e.差分特效=t,placeholder:"脇役エフェクト"},null,8,["value","onUpdate:value","class"])]),a("div",wt,[n($,{class:c(["-inner",w(e.SE)]),value:e.SE,"onUpdate:value":t=>e.SE=t},null,8,["value","onUpdate:value","class"])]),a("div",xt,[n($,{class:c(["-inner",w(e.Voice)]),value:e.Voice,"onUpdate:value":t=>e.Voice=t},null,8,["value","onUpdate:value","class"])]),a("div",Ut,[n(ae,{class:c(["-inner",w(e.備註)]),value:e.備註,"onUpdate:value":t=>e.備註=t,onFocus:t=>e.is_drag=!1,onBlur:t=>e.is_drag=!0},null,8,["value","onUpdate:value","class","onFocus","onBlur"])])])],512)),[[O,!e.is_delete]]),n(te,{class:"chapter_log_dragline",onDrop:t=>J(t,i+1),dragging:H.value},null,8,["onDrop","dragging"])],64))),128))]),n(xe,{positions:X.value,onClear:F,onUse:de,onlyAdd:Q.value},null,8,["positions","onlyAdd"])]),_:1})}}},Tt=I($t,[["__scopeId","data-v-8291a845"]]);export{Tt as default};
