import{_ as F,r as A,e as W,o as n,c as u,w as v,dD as se,a as s,n as r,t as o,dE as Q,i as te,s as H,f as ae,h as q,j as le,dz as I,dA as f,I as J,b as _,u as p,F as L,v as T,dF as M,dG as N,G as oe,H as ce}from"./index-DUa0PY9W.js";import{I as ne}from"./Menu.vue_vue_type_style_index_0_scoped_c8f5dede_lang-BSDfsWo9.js";import{W as ie}from"./Wrap-CeDoFZvF.js";import{C as V,D as K,u as re}from"./useDrag-CW70IrUS.js";import{D as de,M as _e}from"./Dialog-WxIf1xJz.js";import{M as he}from"./Mark-Daopdevw.js";const ue=["disabled"],pe={class:"whitespace-nowrap"},ve={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(i,{emit:D}){const w=i,k=D,b=A(0);return W(b,m=>k("update:value",m)),W(()=>w.value,m=>b.value=m,{immediate:!0}),(m,y)=>(n(),u("label",{class:r(["inline-flex items-center",i.disabled?"cursor-auto":"cursor-pointer"])},[v(s("input",{class:r(["checkbox",i.box]),"onUpdate:modelValue":y[0]||(y[0]=U=>b.value=U),disabled:i.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,ue),[[se,b.value]]),s("span",pe,o(i.title),1),Q(m.$slots,"default",{},void 0,!0)],2))}},O=F(ve,[["__scopeId","data-v-b7a95cdd"]]),ge={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(i){return(D,w)=>(n(),u("button",{class:r(["switch",{"bg-current":i.active}])},[s("span",{class:r(["-mt-0.1em",{"text-white":i.active}])},[Q(D.$slots,"default",{},void 0,!0)],2)],2))}},$=F(ge,[["__scopeId","data-v-8bd1e4e9"]]),g=i=>(oe("data-v-168c1772"),i=i(),ce(),i),me={class:"side_list"},fe={class:"flex"},be=["onClick","title"],ye={class:"chapter_head"},De={class:"mr-9 grid xl:mr-0"},we=["title"],ke=g(()=>s("span",{class:"chapter_head_number"},"01.png",-1)),xe=g(()=>s("p",{class:"chapter_head_desc"},"目が覚めたら見知らぬ教室、辺るは水族館のような不思議な光景…自己紹介した後、どこから来た「モノカイ」と自称するぬいぐるみは俺たちをここでコロシアイ学園生活を強いられた。ここから脱出する条件は一つ――誰にばれないように殺人をすることだった。",-1)),Ce={class:"mr-9 flex items-end justify-end gap-2 xl:mr-0"},Se={class:"chapter_log"},Ie=g(()=>s("div",{class:"chapter_log_tr -lock"},[s("div",{class:"chapter_log_th ml-16 xl:ml-0"},"セリフ＆切り替え＆演出"),s("div",{class:"ml-3 w-7 shrink-0 xl:hidden"})],-1)),Me=g(()=>s("div",{class:"chapter_log_tr_2 -lock"},[s("div",{class:"chapter_log_th -col"},"話し手．主人公差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"脇役．差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"SE＆ボイス"),s("div",{class:"chapter_log_th -col"},"備考")],-1)),$e={key:0,class:"contents"},Ae=["draggable","onDragstart","onDragend"],Ue={class:"chapter_log_scene"},Be=g(()=>s("div",{class:"chapter_log_switches xl:hidden"},null,-1)),Ee={class:"chapter_log_tr_2"},Le=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),Te=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),Ne=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),Ve={class:"chapter_log_td -col"},Fe={class:"-inner"},Pe={key:1,class:"contents"},je=["draggable","onDragstart","onDragend"],ze={class:"chapter_log_avatar"},Ge=["src"],Re={class:"chapter_log_comment"},We={class:"chapter_log_switches"},He={class:"chapter_log_tr_2"},qe={class:"chapter_log_td -col"},Je={key:0,class:"-inner col-span-2"},Ke={key:1,class:"-inner col-span-2"},Oe={class:"-inner"},Qe={class:"-inner"},Xe={class:"chapter_log_td -col"},Ye={class:"-inner col-span-2"},Ze={class:"-inner"},es={class:"-inner"},ss={class:"chapter_log_td -col"},ts={class:"-inner"},as={class:"-inner"},ls={class:"chapter_log_td -col"},os={class:"-inner"},cs={__name:"Chapters",setup(i){const D=te(),{characterList:w}=H(D),k=ae(),{newChapter:b,dialogType:m}=k,{chapterIndex:y,chapterNames:U,chapterTitle:P,chapterData:h}=H(k),{dragMove:X,dropMove:Y}=re(),B=c=>w.value.find(t=>(c.人物??"")===t.name)??{},j=q(()=>h.value.some(c=>c.dragging)),E=q(()=>h.value.filter(c=>c.is_selected).map(c=>c.id)),x=(c,t,d)=>{d&&X(c,{index:t}),E.value.some(l=>h.value[t].id===l)||(h.value[t].is_selected=1),E.value.forEach(l=>{const a=h.value.find(ee=>ee.id===l);a.dragging=d,d||(a.is_selected=0)})},z=(c,t)=>{E.value.forEach(d=>{const e=h.value.findIndex(l=>l.id===d);Y(h.value,e,t)})},G=A(!1),C=A(0),R=A(null),S=(c,t)=>{C.value=t,R.value=c,G.value=t===null},Z=({type:c})=>{const t=C.value,d=h.value[t];if(c==="delete")d.is_delete=!0;else{const e=C.value===null?h.value.length:C.value+1;h.value.splice(e,0,b(c))}};return(c,t)=>{const d=le("visible");return n(),I(ie,null,{side:f(()=>[s("ul",me,[(n(!0),u(L,null,J(p(U),(e,l)=>(n(),u("li",fe,[_(he,{class:"mt-0.6em bg-current/10",active:l===p(y)},null,8,["active"]),s("button",{class:r(["side_item",{"side_item-active":l===p(y)}]),onClick:a=>y.value=l,title:e},o(e),11,be)]))),256))])]),main_head:f(()=>[s("div",ye,[s("div",De,[s("h1",{class:"chapter_head_title",title:p(P)},o(p(P)),9,we),ke]),xe,s("div",Ce,[_($,{class:"relative text-primary bg-primary/25"},{default:f(()=>[_(p(ne),{class:"mt-0.1em"}),_(V,{class:"absolute left-0 top-0 opacity-0",onMore:t[0]||(t[0]=e=>S(e,null)),hasDel:!1,hasAdd:!1})]),_:1})])])]),default:f(()=>[s("div",Se,[Ie,Me,_(K,{class:"chapter_log_dragline",onDrop:t[1]||(t[1]=e=>z(e,0)),dragging:j.value},null,8,["dragging"]),(n(!0),u(L,null,J(p(h),(e,l)=>(n(),u(L,{key:e.id},[e.is_showtime?v((n(),u("div",$e,[s("div",{class:r(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:a=>x(a,l,!0),onDragend:a=>x(a,l,!1),onDrag:t[2]||(t[2]=M(()=>{},["prevent"])),onDrop:t[3]||(t[3]=M(()=>{},["prevent"]))},[s("div",{class:r(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[_(O,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":a=>e.is_selected=a},null,8,["value","onUpdate:value"]),_(V,{class:"chapter_log_control",onMore:a=>S(a,l),hasDel:!1,hasAdd:!1},null,8,["onMore"]),s("div",Ue,[s("span",null,o(e.人物),1),s("span",null,o(e.show_time),1),s("span",null,o(e.show_name),1)])],2),Be],42,Ae),s("div",Ee,[Le,Te,Ne,s("div",Ve,[s("div",Fe,o(e.備註),1)])])],512)),[[T,!e.is_delete]]):v((n(),u("div",Pe,[s("div",{class:r(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:a=>x(a,l,!0),onDragend:a=>x(a,l,!1),onDrag:t[4]||(t[4]=M(()=>{},["prevent"])),onDrop:t[5]||(t[5]=M(()=>{},["prevent"]))},[s("div",{class:r(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[_(O,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":a=>e.is_selected=a},null,8,["value","onUpdate:value"]),_(V,{class:"chapter_log_control",onMore:a=>S(a,l),onDel:a=>e.is_delete=!0,hasAdd:!1},null,8,["onMore","onDel"]),s("div",{class:r(["chapter_log_info",{"flex-row-reverse":B(e).is_hero,"-replay":e.is_replay}])},[v((n(),u("div",ze,[s("img",{src:B(e).image_head},null,8,Ge)])),[[d,B(e).image_head]]),s("div",Re,[_(de,{class:"chapter_log_dialog",value:e.和訳,type:p(m)(e)},null,8,["value","type"])])],2)],2),s("div",We,[v((n(),I($,{class:r(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:f(()=>[N("R")]),_:2},1032,["active","class"])),[[d,e.is_replay]]),v((n(),I($,{class:r(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未紹介"},{default:f(()=>[N("U")]),_:2},1032,["active","class"])),[[d,e.is_unknown]]),v((n(),I($,{class:r(["chapter_log_switch",{"-monolog":e.is_solo}]),active:e.is_solo,title:"独り言"},{default:f(()=>[N("S")]),_:2},1032,["active","class"])),[[d,e.is_solo]])])],42,je),s("div",He,[s("div",qe,[e.is_announce||e.is_system?(n(),u("div",Je,o(e.人物),1)):(n(),u("div",Ke,o(e.人物),1)),s("div",Oe,o(e.十六夜差分),1),s("div",Qe,o(e.主角特效),1)]),s("div",Xe,[s("div",Ye,o(e.顯示角色),1),s("div",Ze,o(e.角色差分),1),s("div",es,o(e.差分特效),1)]),s("div",ss,[s("div",ts,o(e.SE),1),s("div",as,o(e.Voice),1)]),s("div",ls,[s("div",os,o(e.備註),1)])])],512)),[[T,!e.is_delete]]),v(_(K,{class:"chapter_log_dragline",onDrop:a=>z(a,l+1),dragging:j.value},null,8,["onDrop","dragging"]),[[T,!e.is_delete]])],64))),128))]),_(_e,{positions:R.value,onClear:S,onUse:Z,onlyAdd:G.value},null,8,["positions","onlyAdd"])]),_:1})}}},us=F(cs,[["__scopeId","data-v-168c1772"]]);export{us as default};
