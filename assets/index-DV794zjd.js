import{_ as L,o as c,c as u,a as r,w as g,v as E,F as q,t as D,b as _,u as e,n as T,d as te,s as M,r as I,e as S,f as se,g as f,h as H,i as ve,j as me,k as U,l as he,m as N,p as A,q as F,x as R,y as Q,z as ge,A as fe,B as ee,C as ye,D as j}from"./index-BqjBh2Sn.js";import{I as ce,a as we}from"./IconDelete-D8lqR4xW.js";import{W as $e}from"./Wrap-BvaEOeTJ.js";import{D as be,M as xe,E as ke}from"./Dialog-CXUIDqNW.js";import{R as Ce}from"./Range-CFNEjO6V.js";import{_ as B}from"./Image-C-xUPCzR.js";const Se={name:"MdiTarget"},Be={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ie=r("path",{fill:"currentColor",d:"M11 2v2.07A8 8 0 0 0 4.07 11H2v2h2.07A8 8 0 0 0 11 19.93V22h2v-2.07A8 8 0 0 0 19.93 13H22v-2h-2.07A8 8 0 0 0 13 4.07V2m-2 4.08V8h2V6.09c2.5.41 4.5 2.41 4.92 4.91H16v2h1.91c-.41 2.5-2.41 4.5-4.91 4.92V16h-2v1.91C8.5 17.5 6.5 15.5 6.08 13H8v-2H6.09C6.5 8.5 8.5 6.5 11 6.08M12 11a1 1 0 0 0-1 1a1 1 0 0 0 1 1a1 1 0 0 0 1-1a1 1 0 0 0-1-1"},null,-1),Ge=[Ie];function ze(t,a,s,h,v,d){return c(),u("svg",Be,Ge)}const Me=L(Se,[["render",ze]]),Ee={name:"RiShiningFill"},Le={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},qe=r("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10z"},null,-1),Ne=[qe];function Te(t,a,s,h,v,d){return c(),u("svg",Le,Ne)}const Ae=L(Ee,[["render",Te]]),Ve={name:"RiShiningLine"},De={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},He=r("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10zm4.803 1A12.044 12.044 0 0 1 12 18.197A12.043 12.043 0 0 1 18.197 12A12.044 12.044 0 0 1 12 5.803A12.044 12.044 0 0 1 5.803 12"},null,-1),Ue=[He];function Pe(t,a,s,h,v,d){return c(),u("svg",De,Ue)}const Oe=L(Ve,[["render",Pe]]),je={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Fe=r("path",{fill:"currentColor",d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1m0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1M4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18c-1.84 0-3.28 1.64-2.95 3.54c.21 1.21 1.2 2.2 2.41 2.41c1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),Re=[Fe];function We(t,a){return c(),u("svg",je,[...Re])}const Je={name:"ic-round-queue-music",render:We},Ke={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Qe=r("path",{fill:"currentColor",d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"},null,-1),Xe=[Qe];function Ye(t,a){return c(),u("svg",Ke,[...Xe])}const Ze={name:"ic-sharp-keyboard-voice",render:Ye},et={name:"MaterialSymbolsEditSquareOutline"},tt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},st=r("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4t-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"},null,-1),nt=[st];function at(t,a,s,h,v,d){return c(),u("svg",tt,nt)}const re=L(et,[["render",at]]),lt={class:"preview_log_head"},ot={class:"preview_log_title"},it={class:"preview_log_subtitle text-sm"},ct={class:"preview_log_content"},rt={class:"preview_log_foot"},ut={class:"preview_log_head group-hover:opacity-75"},dt={class:"shrink-0 font-medium"},pt={class:"preview_log_subtitle text-xs leading-none"},_t={class:"h-1em"},vt={class:"h-1em"},mt={class:"preview_log_content group-hover:opacity-75"},ht={class:"preview_log_foot"},gt={class:"preview_log_mark_1"},ft={class:"preview_log_mark_1"},yt={class:"preview_log_mark_1"},wt={__name:"LogItem",props:{id:{type:[Number,String],default:0},log:{type:[Object],default:()=>({})}},emits:["update:id","edit","delete","stop"],setup(t,{emit:a}){const s=a;return(h,v)=>g((c(),u("article",{class:T(["preview_log",{"-active":t.log.id===t.id}])},[t.log.is_showtime?(c(),u(q,{key:0},[r("header",lt,[r("h6",ot,D(t.log.人物),1),r("p",it,D(t.log.show_time),1)]),r("p",ct,D(t.log.show_name),1),r("footer",rt,[r("button",{class:"preview_button ml-auto",onClick:v[0]||(v[0]=d=>s("edit")),title:"編集"},[_(re)]),r("button",{class:"preview_button ml-1",onClick:v[1]||(v[1]=d=>s("delete")),title:"削除"},[_(ce)])])],64)):(c(),u(q,{key:1},[r("button",{class:"group contents",onClick:v[2]||(v[2]=d=>{s("update:id",t.log.id),s("stop")})},[r("header",ut,[r("h6",dt,D(t.log.人物),1),r("p",pt,[r("span",_t,D(t.log.十六夜差分),1),r("span",vt,D(t.log.角色差分),1)])]),r("p",mt,D(t.log.和訳),1)]),r("footer",ht,[g(r("span",gt,"R",512),[[E,t.log.is_replay]]),g(r("span",ft,"U",512),[[E,t.log.is_unknown]]),g(r("span",yt,"S",512),[[E,t.log.is_monolog]]),g(_(Ae,{class:"preview_log_mark_2"},null,512),[[E,t.log.差分特效]]),g(_(Oe,{class:"preview_log_mark_2"},null,512),[[E,t.log.主角特效]]),g(_(e(Je),{class:"preview_log_mark_2"},null,512),[[E,t.log.SE]]),g(_(e(Ze),{class:"preview_log_mark_2"},null,512),[[E,t.log.Voice]]),r("button",{class:"preview_button ml-auto",onClick:v[3]||(v[3]=d=>s("edit")),title:"編集"},[_(re)]),r("button",{class:"preview_button ml-1",onClick:v[4]||(v[4]=d=>s("delete")),title:"削除"},[_(ce)])])],64))],2)),[[E,!t.log.is_delete]])}},$t=L(wt,[["__scopeId","data-v-bc6eb272"]]),bt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},xt=r("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1),kt=[xt];function Ct(t,a){return c(),u("svg",bt,[...kt])}const St={name:"ic-baseline-stop",render:Ct},Bt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},It=r("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1),Gt=[It];function zt(t,a){return c(),u("svg",Bt,[...Gt])}const Mt={name:"ic-baseline-play-arrow",render:zt},Et={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Lt=r("path",{fill:"currentColor",d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"},null,-1),qt=[Lt];function Nt(t,a){return c(),u("svg",Et,[...qt])}const ue={name:"ic-baseline-skip-previous",render:Nt},Tt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},At=r("path",{fill:"currentColor",d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"},null,-1),Vt=[At];function Dt(t,a){return c(),u("svg",Tt,[...Vt])}const Ht={name:"ic-baseline-fullscreen",render:Dt},Ut={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Pt=r("path",{fill:"currentColor",d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"},null,-1),Ot=[Pt];function jt(t,a){return c(),u("svg",Ut,[...Ot])}const Ft={name:"ic-baseline-fullscreen-exit",render:jt},Rt={class:"preview_control"},Wt=["disabled"],Jt=["disabled"],Kt={__name:"Control",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:play","target","stop"],setup(t,{emit:a}){const s=t,h=a,v=te(),{fullscreen:d}=M(v),o=I(0);S(o,n=>h("update:index",n)),S(()=>s.index,n=>o.value=n,{immediate:!0});const m=()=>{const n=o.value;!s.play||s.black||setTimeout(()=>{const l=o.value>=s.length;s.index===n&&s.play&&!s.black&&!s.typing&&!l&&(o.value+=1),l&&h("update:play",!1),m()},3e3)};return S(()=>s.play,m),S(()=>s.typing,m),(n,l)=>(c(),u("div",Rt,[r("button",{class:"preview_button",onClick:l[0]||(l[0]=p=>{o.value-=1,h("stop")}),disabled:o.value===0,title:"前へ"},[_(e(ue))],8,Wt),r("button",{class:"preview_button",onClick:l[1]||(l[1]=p=>h("update:play",!t.play)),title:"プレイ"},[g(_(e(Mt),null,null,512),[[E,!t.play]]),g(_(e(St),null,null,512),[[E,t.play]])]),r("button",{class:"preview_button",onClick:l[2]||(l[2]=p=>{o.value+=1,h("stop")}),disabled:o.value===t.length,title:"次へ"},[_(e(ue),{class:"-scale-x-100"})],8,Jt),_(Ce,{class:"mx-3 grow !bg-dark-text",value:o.value,"onUpdate:value":l[3]||(l[3]=p=>o.value=p),onChange:l[4]||(l[4]=p=>h("stop")),min:0,max:t.length,step:1},null,8,["value","max"]),r("button",{class:"preview_button",onClick:l[5]||(l[5]=p=>d.value=!e(d)),title:"全画面モード"},[g(_(e(Ht),null,null,512),[[E,!e(d)]]),g(_(e(Ft),null,null,512),[[E,e(d)]])])]))}},Qt=L(Kt,[["__scopeId","data-v-ffde7900"]]),Xt={__name:"Comment",props:{data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:typing"],setup(t,{emit:a}){const s=t,h=a,v=se(),{dialogType:d}=v,o=I({}),m=I(0),n=f(()=>o.value.和訳??""),l=f(()=>s.play?n.value.slice(0,m.value):n.value),p=f(()=>({"margin-left":"15cqw","margin-right":"15cqw","margin-bottom":"3.2cqw"})),x=()=>{n.value&&(h("update:typing",!0),m.value=0)},y=()=>{if(!s.play||s.black)return;if(m.value===n.value.length)return h("update:typing",!1);setTimeout(()=>{s.typing?m.value+=1:m.value=n.value.length},25)};return S(()=>s.data,k=>{k.is_showtime||(o.value=k)}),S(o,x),S(n,y),S(l,y),S(m,y),S(()=>s.black,k=>{k||y()}),(k,G)=>(c(),u("article",{class:"preview_dialog",style:H(p.value)},[_(be,{value:l.value,type:e(d)(t.data)},null,8,["value","type"])],4))}},Yt=L(Xt,[["__scopeId","data-v-95429636"]]),W=ve("log",()=>{const t=me(),a=se(),{chapterData:s}=M(a),{findData:h,findIndex:v}=U(),d=I(0),o=I(0),m=I({}),n=f(()=>s.value.filter(i=>{const C=!i.is_delete&&!i.is_showtime,O=i.is_perform&&i.show_time==="暗場";return C||O})),l=f(()=>{const i=v(s.value,d.value);return s.value.slice(0,i+1)});S(d,i=>{const C=h(s.value,i)??{};C.is_scene||(m.value=C,o.value=v(n.value,C.id))}),S(o,i=>{var C;return d.value=((C=n.value[i])==null?void 0:C.id)??0}),S(s,()=>{var i;return d.value=((i=n.value[0])==null?void 0:i.id)??0}),he(()=>{var i;return d.value=((i=n.value[0])==null?void 0:i.id)??0});const p=f(()=>l.value.filter(i=>i.is_showtime&&i.show_time==="CG"&&i.show_name)),x=f(()=>{const i=[...p.value].reverse()[0]??{};return!!i.show_name&&i.show_name!=="結束"}),y=I(!1),k=I(!1),G=I(!1),w=f(()=>({"":y.value}));return S(()=>t.name,()=>y.value=!1),{logId:d,logIndex:o,logData:m,logContents:n,logHistory:l,logCGs:p,logCGMode:x,logPlay:y,logTyping:k,logBlack:G,playEase:w}}),Zt={class:"-ui bg-black",id:"Background"},es={__name:"Background",props:{contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]}},setup(t){const a=t,s=W(),{playEase:h}=M(s),{removeDuplicates:v}=U(),{backgroundUrl:d}=R(),o=f(()=>{const l=n(a.all);return v(l,"show_name")}),m=f(()=>{var p;return(p=n(a.contents).reverse()[0])==null?void 0:p.show_name}),n=l=>l.filter(p=>p.is_showtime&&p.show_time==="BG"&&p.show_name);return(l,p)=>{const x=N("opacity");return c(),u("div",Zt,[(c(!0),u(q,null,A(o.value,y=>g((c(),F(B,{class:T(["-ui",e(h)]),src:e(d)(y.show_name)},null,8,["src","class"])),[[x,y.show_name===m.value]])),256))])}}},ts={class:"-ui",id:"Effect"},de={__name:"Effect",props:{name:{type:[String],default:""},data:{type:[Object],default:()=>({})},all:{type:[Array],default:()=>[]}},setup(t){const a=t,s=W(),{playEase:h}=M(s),{removeDuplicates:v}=U(),{effectUrl:d}=R(),o=f(()=>{const n=m(a.all);return v(n,a.name)}),m=n=>n.filter(l=>!l.is_showtime&&l[a.name]);return(n,l)=>{const p=N("opacity");return c(),u("div",ts,[(c(!0),u(q,null,A(o.value,x=>g((c(),F(B,{class:T(["-ui",e(h)]),src:e(d)(x[t.name])},null,8,["src","class"])),[[p,x[t.name]===t.data[t.name]]])),256))])}}},ss=["data-name"],ns={__name:"Sprite",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,s=Q(),{characterList:h}=M(s),v=W(),{playEase:d}=M(v),{findData:o}=U(),{uiUrl:m}=R(),n={name:"顯示角色",sprite:"角色差分",effect:"差分特效"},l=f(()=>a.isCG?"人物":n.name),p=f(()=>{const w=G(a.contents).reverse(),i=o(w,a.data[l.value],l.value);return i==null?void 0:i[n.sprite]}),x=f(()=>({"mask-image":a.isCG?"":`url(${m("mask_4")})`})),y=f(()=>a.isCG?{}:{top:"0cqw",left:"-10cqw"}),k=f(()=>a.isCG?{}:{width:"100cqw"}),G=w=>w.filter(i=>!i.is_showtime&&i[n.sprite]);return(w,i)=>{const C=N("visible"),O=N("opacity");return c(),u("div",{class:"-ui -mask",id:"Sprite",style:H(x.value)},[r("div",{class:"sprite_container",style:H(y.value)},[r("div",{class:"sprite_inner",style:H(k.value)},[(c(!0),u(q,null,A(e(h),V=>g((c(),u("div",{class:T(["-ui",e(d)]),"data-name":V.name},[(c(!0),u(q,null,A(V.sprite??[],P=>g((c(),F(B,{class:"sprite",src:P.image},null,8,["src"])),[[C,P.name===p.value]])),256))],10,ss)),[[O,V.name===t.data[l.value]]])),256))],4)],4),_(de,{name:n.effect,data:t.data,all:t.all},null,8,["name","data","all"])],4)}}},as=L(ns,[["__scopeId","data-v-c7f1bcad"]]),ls=["data-name"],os={__name:"Sprite2",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,s=Q(),{characterList:h}=M(s),v=W(),{playEase:d}=M(v),{findData:o}=U(),{uiUrl:m}=R(),n={name:"立ち絵2",sprite:"十六夜差分",effect:"主角特效"},l=f(()=>a.isCG?"人物":n.name),p=f(()=>{const w=G(a.contents).reverse(),i=o(w,a.data[l.value],l.value);return i==null?void 0:i[n.sprite]}),x=f(()=>({"mask-image":a.isCG?"":`url(${m("mask_3")})`})),y=f(()=>a.isCG?{}:{top:"13cqw",left:"37cqw"}),k=f(()=>a.isCG?{}:{width:"85cqw"}),G=w=>w.filter(i=>!i.is_showtime&&i[n.sprite]);return(w,i)=>{const C=N("visible"),O=N("opacity");return c(),u("div",{class:"-ui -mask",id:"Sprite2",style:H(x.value)},[r("div",{class:"sprite_container",style:H(y.value)},[r("div",{class:"sprite_inner",style:H(k.value)},[(c(!0),u(q,null,A(e(h),V=>g((c(),u("div",{class:T(["-ui",e(d)]),"data-name":V.name},[(c(!0),u(q,null,A(V.sprite??[],P=>g((c(),F(B,{class:"sprite",src:P.image},null,8,["src"])),[[C,P.name===p.value]])),256))],10,ls)),[[O,V.name===t.data[l.value]]])),256))],4)],4),_(de,{name:n.effect,data:t.data,all:t.all},null,8,["name","data","all"])],4)}}},is=L(os,[["__scopeId","data-v-ea60a6f5"]]),cs={class:"-ui bg-black",id:"CG"},rs={__name:"CG",props:{contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]}},setup(t){const a=t,{removeDuplicates:s}=U(),{cgUrl:h}=R(),v=f(()=>{const m=o(a.all);return s(m,"show_name")}),d=f(()=>{var n;return(n=[...a.contents].reverse()[0])==null?void 0:n.show_name}),o=m=>m.filter(n=>n.is_showtime&&n.show_time==="CG"&&n.show_name&&n.show_name!=="結束");return(m,n)=>{const l=N("opacity");return c(),u("div",cs,[(c(!0),u(q,null,A(v.value,p=>g((c(),F(B,{class:"-ui cg",src:e(h)(p.show_name)},null,8,["src"])),[[l,p.show_name===d.value]])),256))])}}},us=L(rs,[["__scopeId","data-v-f7db31a0"]]),ds={class:"-ui",id:"UI"},ps={__name:"UI",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,s=Q(),{getCharacter:h}=s,v=W(),{playEase:d}=M(v);U();const{uiUrl:o}=R();f(()=>h(a.data.人物));const m=f(()=>a.data.人物===a.data.立ち絵2),n=f(()=>!m.value&&!a.data.is_system&&!a.data.is_announce),l=f(()=>m.value&&!a.data.is_monolog);return(p,x)=>{const y=N("visible"),k=N("opacity");return c(),u("div",ds,[g((c(),u("div",{class:T(["-ui",e(d)])},[r("div",{class:"-ui -mask",style:H({"mask-image":"url("+e(o)("mask_2")+")"})},null,4),_(B,{class:"-ui",src:e(o)("01-1")},null,8,["src"]),_(B,{class:"-ui",src:e(o)("01-2")},null,8,["src"]),_(B,{class:"-ui",src:e(o)("01-3")},null,8,["src"]),_(B,{class:"-ui",src:e(o)("01-4")},null,8,["src"]),g(_(B,{class:"-ui",src:e(o)("01-5")},null,8,["src"]),[[y,n.value]]),g(_(B,{class:"-ui",src:e(o)("01-6")},null,8,["src"]),[[y,l.value]])],2)),[[k,!t.isCG]]),g((c(),u("div",{class:T(["-ui",e(d)])},[_(B,{class:"-ui",src:e(o)("02-1")},null,8,["src"]),g(_(B,{class:"-ui",src:e(o)("02-2")},null,8,["src"]),[[y,n.value]]),g(_(B,{class:"-ui",src:e(o)("02-2")},null,8,["src"]),[[y,l.value]])],2)),[[k,t.isCG]]),g(r("div",{class:T(["-ui -replay",e(d)])},null,2),[[k,t.data.is_replay]])])}}},_s=L(ps,[["__scopeId","data-v-2d473479"]]),vs={class:"-ui",id:"NameTag"},ms={class:"-ui"},hs={class:"-ui"},gs={class:"name_tag -font"},fs={class:"-ui"},ys={__name:"NameTag",props:{data:{type:[Object],default:()=>({})},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,s=te(),{fontFamily:h,fontWeight:v}=M(s),d=Q(),{getCharacter:o}=d,{characterList:m}=M(d),{findData:n}=U(),l=f(()=>o(a.data.人物)),p=f(()=>n(m.value,0)),x=f(()=>a.data.人物===a.data.立ち絵2),y=f(()=>({width:"100cqw",height:"4cqw",bottom:"13.5cqw",left:x.value&&!a.isCG?"71cqw":"4cqw","font-size":"2.5cqw"}));return(k,G)=>{const w=N("opacity");return c(),u("div",vs,[g((c(),u("div",{class:T(["absolute",[e(h).nameTag,e(v).nameTag]]),style:H(y.value)},[g((c(),u("div",ms,[(c(!0),u(q,null,A(e(m),i=>g((c(),u("div",hs,[g((c(),u("p",gs,[ge(D(i.name),1)])),[[w,!i.image_name]]),g(_(B,{class:"name_tag",src:i.image_name},null,8,["src"]),[[w,i.image_name]])])),[[w,i.name===l.value.name]])),256))])),[[w,!t.data.is_unknown]]),g((c(),u("div",fs,[_(B,{class:"name_tag",src:p.value.image_name},null,8,["src"])])),[[w,t.data.is_unknown]])],6)),[[w,!t.data.is_monolog]])])}}},ws=L(ys,[["__scopeId","data-v-0b1fb445"]]),$s=3e3,bs={__name:"Black",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:black"],setup(t,{emit:a}){const s=t,h=a,v=f(()=>s.data.show_time==="暗場"),d=I({}),o=f(()=>(d.value.show_name??"").split(",")),m=f(()=>!o.value.includes("前")),n=f(()=>!o.value.includes("後"));f(()=>o.value.includes("續"));const l=I(!1),p=I(!1),x=()=>{if(v.value){if(d.value={...s.data},p.value=s.play&&m.value,l.value=!0,h("update:black",!0),!s.play)return;setTimeout(()=>{s.index>=s.length||h("update:index",s.index+1)},$s)}else p.value=s.play&&n.value,l.value=!1,h("update:black",!1)};return S(v,x),S(()=>s.play,x),(y,k)=>{const G=N("opacity");return g((c(),u("div",{class:T(["-ui z-20 bg-black",{"duration-1000":p.value}]),id:"Black"},null,2)),[[G,l.value]])}}},xs={class:"preview_title"},ks=["value"],Cs=["data-id"],Ss={class:"preview"},Bs={class:"-ui"},Is={__name:"index",setup(t){const a=te(),{fullscreen:s}=M(a),h=se(),{chapterIndex:v,chapterNames:d,chapterData:o}=M(h),m=W(),{logId:n,logIndex:l,logData:p,logContents:x,logHistory:y,logCGs:k,logCGMode:G,logPlay:w,logTyping:i,logBlack:C,playEase:O}=M(m),{getClientRect:V}=U(),P=()=>{w.value=!1,i.value=!1},ne=I(null),X=()=>{const z=[...ne.value].find($=>$.dataset.id*1===n.value);if(!z)return;const{height:b,top:Z}=V(z);z.parentElement.scrollBy({top:Z-b,behavior:"smooth"})},ae=I(null);S(s,z=>{z?ae.value.requestFullscreen():document.exitFullscreen()});const le=I(null),oe=z=>le.value=z,Y=I(!1),K=fe({id:0,type:""}),ie=(z,{type:b})=>{K.id=z,K.type=b??"",Y.value=!0},pe=z=>o.value.push(z),_e=z=>{n.value=z,setTimeout(X,100)};return(z,b)=>{const Z=N("opacity");return c(),F($e,{class:"flex-row-reverse",main:"!p-0",side:"!p-0 border-4 border-transparent"},{side_head:ee(()=>[_(xe,{positions:le.value,onClear:oe,onUse:b[0]||(b[0]=$=>ie("add",$)),onlyAdd:!0},null,8,["positions"]),r("section",xs,[g(r("select",{class:"preview_title_select","onUpdate:modelValue":b[1]||(b[1]=$=>j(v)?v.value=$:null)},[(c(!0),u(q,null,A(e(d),($,J)=>(c(),u("option",{value:J},D($),9,ks))),256))],512),[[ye,e(v)]]),g(r("button",{class:"preview_button",onClick:X,title:"今の画面のセリフへ"},[_(Me)],512),[[E,!e(s)]]),r("button",{class:"preview_button",onClick:oe,title:"新規"},[_(e(we))])])]),side:ee(()=>[(c(!0),u(q,null,A(e(o),$=>(c(),u("div",{key:$.id,"data-id":$.id,ref_for:!0,ref_key:"logElem",ref:ne},[_($t,{id:e(n),"onUpdate:id":b[2]||(b[2]=J=>j(n)?n.value=J:null),log:$,onEdit:J=>ie($.id,{}),onDelete:J=>$.is_delete=!0,onStop:P},null,8,["id","log","onEdit","onDelete"])],8,Cs))),128))]),default:ee(()=>[r("section",{class:"preview_container",ref_key:"preview",ref:ae},[r("div",Ss,[r("div",Bs,[_(es,{contents:e(y),all:e(o)},null,8,["contents","all"]),_(as,{data:e(p),contents:e(y),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"]),_(is,{data:e(p),contents:e(y),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"]),g(_(us,{contents:e(k),all:e(o),class:T(e(O))},null,8,["contents","all","class"]),[[Z,e(G)]]),_(_s,{data:e(p),contents:e(y),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"])]),_(ws,{data:e(p),isCG:e(G)},null,8,["data","isCG"]),_(Yt,{data:e(p),play:e(w),typing:e(i),"onUpdate:typing":b[3]||(b[3]=$=>j(i)?i.value=$:null),black:e(C)},null,8,["data","play","typing","black"]),_(bs,{index:e(l),"onUpdate:index":b[4]||(b[4]=$=>j(l)?l.value=$:null),data:e(p),play:e(w),black:e(C),"onUpdate:black":b[5]||(b[5]=$=>j(C)?C.value=$:null),length:e(x).length-1},null,8,["index","data","play","black","length"])]),_(Qt,{index:e(l),"onUpdate:index":b[6]||(b[6]=$=>j(l)?l.value=$:null),play:e(w),"onUpdate:play":b[7]||(b[7]=$=>j(w)?w.value=$:null),typing:e(i),black:e(C),length:e(x).length-1,onTarget:X,onStop:P},null,8,["index","play","typing","black","length"])],512),_(ke,{open:Y.value,"onUpdate:open":b[8]||(b[8]=$=>Y.value=$),id:K.id,type:K.type,onAdd:pe,onTarget:_e},null,8,["open","id","type"])]),_:1})}}},Ns=L(Is,[["__scopeId","data-v-0509bb4a"]]);export{Ns as default};
