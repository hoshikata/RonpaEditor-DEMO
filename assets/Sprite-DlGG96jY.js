import{a as S}from"./IconDelete-DMDfa-16.js";import{_ as b,p as U,w as V,o as u,c as p,a as r,G as x,b as l,d as s,n as R,H as y,I as A,J as z,u as H,s as L,l as M,Q as N,h as $,F as O,q as P,B as j,x as q}from"./index-dKBv-Hpv.js";import{U as E}from"./Upload-BgQcZxWK.js";import{_ as G}from"./Image-XZfXazhA.js";import{C as J,D as Q}from"./DropLine-CL5rBzuR.js";import{_}from"./Input-DIxJosbD.js";const T={class:"fancy_window"},W={class:"fancy_container"},K={class:"fancy_bg"},X={__name:"Fancy",props:{open:{type:[Boolean],default:!1}},emits:["update:open"],setup(a,{emit:d}){const n=d,g=e=>{const t=e.target.matches(".fancy_bg, .fancy_bg *"),i=e.target.matches(".fancy_close");(!t||i)&&n("update:open",!1)};return(e,t)=>{const i=U("visible");return V((u(),p("section",{class:"fancy",onClick:g},[r("div",T,[r("div",W,[r("div",K,[x(e.$slots,"default",{},void 0,!0)])])])])),[[i,a.open]])}}},Y=b(X,[["__scopeId","data-v-7ed231e4"]]),Z={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ee=r("path",{fill:"currentColor",d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83l1.41 1.41L19 6.41V10h2V3z"},null,-1),ae=[ee];function te(a,d){return u(),p("svg",Z,[...ae])}const se={name:"ic-baseline-open-in-new",render:te},h=a=>(A("data-v-5ef01402"),a=a(),z(),a),ne=["draggable"],oe={class:"relative"},re={class:"resource_detail"},le=h(()=>r("label",{class:"resource_label"},"名前",-1)),de=h(()=>r("label",{class:"resource_label"},"パス",-1)),ie={__name:"Resource",props:{data:{type:[Object],default:()=>({})},list:{type:[Array],default:()=>[]},hasDrag:{type:[Boolean],default:!1}},emits:["update:data","drag","drop","fancy","add","del"],setup(a,{emit:d}){const n=d;return(g,e)=>(u(),p("div",{class:R(["resource_item",{"-dragging":a.data.dragging}]),draggable:a.data.is_drag,onDragstart:e[11]||(e[11]=t=>n("drag",[t,!0])),onDragend:e[12]||(e[12]=t=>n("drag",[t,!1])),onDrag:e[13]||(e[13]=y(()=>{},["prevent"])),onDrop:e[14]||(e[14]=y(()=>{},["prevent"]))},[l(J,{class:"sm:row-span-2",onAdd:e[0]||(e[0]=t=>n("add",a.data.id)),onDel:e[1]||(e[1]=t=>n("del",a.data.id))}),r("div",oe,[l(E,{class:"aspect-video w-full",value:a.data.path,"onUpdate:value":e[2]||(e[2]=t=>a.data.path=t),type:"contain"},null,8,["value"]),r("button",{class:"resource_open",onClick:e[3]||(e[3]=t=>n("fancy",a.data.path)),title:"開く"},[l(s(se))])]),r("div",re,[le,l(_,{class:"resource_input",value:a.data.name,"onUpdate:value":e[4]||(e[4]=t=>a.data.name=t),onFocus:e[5]||(e[5]=t=>a.data.is_drag=!1),onBlur:e[6]||(e[6]=t=>a.data.is_drag=!0)},null,8,["value"]),de,l(_,{class:"resource_input",value:a.data.path,"onUpdate:value":e[7]||(e[7]=t=>a.data.path=t),onFocus:e[8]||(e[8]=t=>a.data.is_drag=!1),onBlur:e[9]||(e[9]=t=>a.data.is_drag=!0),disabled:""},null,8,["value"])]),l(Q,{class:"resource_dragline",onDrop:e[10]||(e[10]=t=>n("drop",t)),dragging:a.hasDrag},null,8,["dragging"])],42,ne))}},ue=b(ie,[["__scopeId","data-v-5ef01402"]]),ce={class:"resource"},$e={__name:"Sprite",setup(a){const d=H(),{characterReals:n,characterId:g}=L(d),{findData:e}=M(),{newItem:t,addItem:i,delItem:w,getDrag:I,dragItem:B,dropItem:C,fancy:D,setFancy:F}=N(),o=$(()=>e(n.value,g.value)??{}),k=$(()=>I(o.value.sprite));return(ve,f)=>(u(),p("div",ce,[(u(!0),p(O,null,P(o.value.sprite??[],(c,m)=>(u(),q(ue,{key:o.value.id+"_"+c.id,data:c,list:o.value.sprite,hasDrag:k.value,onDrag:v=>s(B)(o.value.sprite,...v,m),onDrop:v=>s(C)(o.value.sprite,v,m+1),onFancy:s(F),onAdd:v=>s(i)(o.value.sprite,m+1),onDel:v=>s(w)(o.value.sprite,m)},null,8,["data","list","hasDrag","onDrag","onDrop","onFancy","onAdd","onDel"]))),128)),r("button",{class:"resource_plus",onClick:f[0]||(f[0]=c=>s(i)(o.value.sprite,o.value.sprite.length))},[l(s(S))]),l(Y,{open:s(D).open,"onUpdate:open":f[1]||(f[1]=c=>s(D).open=c)},{default:j(()=>[l(G,{src:s(D).value},null,8,["src"])]),_:1},8,["open"])]))}};export{$e as default};
