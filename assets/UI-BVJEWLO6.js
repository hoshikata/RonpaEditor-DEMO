import{a as X}from"./IconDelete-lqLGKqev.js";import{U as q,I as ne}from"./UiItem-BsCO3CuO.js";import{_ as M,o as h,c as w,a as e,b as Y,s as ee,x as te,j as se,r as pe,h as G,g as _e,p as ie,w as k,e as o,y as $,d as n,F as R,l as L,m as ae,t as c,v as B,L as oe,M as le,B as z,C as J}from"./index-DTP3OGN9.js";import{_ as ue,S as K}from"./Dialog-CS7KxtJO.js";import{_ as de}from"./Image-BIS8OZUj.js";import{U as ce}from"./Upload-BaOG1MMN.js";import{F as Q}from"./Fancy-BlO0PVwi.js";import{R as F}from"./Resource-CVwq_RO1.js";import{R as U}from"./Radio-B4mI4bl1.js";import{R as g}from"./Range-DW_iE5-Z.js";import{A as re}from"./Aspect-CtWSo9X4.js";import"./round-drag-indicator-CZKdorsV.js";import"./Audio-CxlpiYxQ.js";const ve={name:"PhCopyFill"},ge={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},he=e("path",{fill:"currentColor",d:"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-8 128h-32V88a8 8 0 0 0-8-8H96V48h112Z"},null,-1),me=[he];function fe(d,D,m,r,f,_){return h(),w("svg",ge,me)}const be=M(ve,[["render",fe]]),p=d=>(oe("data-v-d13f307d"),d=d(),le(),d),Ue={class:"popup_window"},$e={class:"popup_container scrollbar"},we={class:"popup_side"},ye={class:"contents"},Ie=p(()=>e("h6",{class:"popup_label"},"名前",-1)),De={class:"contents"},xe={class:"popup_plus_group"},ke=p(()=>e("h6",{class:"popup_label"},"画像",-1)),Fe={class:"popup_plus",title:"新規"},Ce={class:"popup_images_group"},Se={class:"contents"},Be=p(()=>e("h6",{class:"popup_label"},c(`背景ぼかし
クリッピング`),-1)),Re={class:"popup_images_group"},Le=p(()=>e("hr",{class:"popup_hr"},null,-1)),Ve=p(()=>e("h4",{class:"popup_title"},"ダイアログ",-1)),je={class:"contents"},Ae=p(()=>e("h6",{class:"popup_label"},"位置：下",-1)),Ee={class:"popup_range_group"},Ne={class:"contents"},Pe=p(()=>e("h6",{class:"popup_label"},"位置：左",-1)),He={class:"popup_range_group"},Oe={class:"contents"},qe=p(()=>e("h6",{class:"popup_label"},"広さ",-1)),Ge={class:"popup_range_group"},Me=p(()=>e("hr",{class:"popup_hr"},null,-1)),Te=p(()=>e("h4",{class:"popup_title"},"名札",-1)),We={class:"contents"},Ze=p(()=>e("h6",{class:"popup_label"},"名札の数",-1)),ze={class:"contents"},Je=p(()=>e("h6",{class:"popup_label"},"独り言の表示",-1)),Ke={class:"contents"},Qe=p(()=>e("h5",{class:"popup_subtitle"},"名札の位置",-1)),Xe={class:"contents"},Ye=p(()=>e("h6",{class:"popup_label"},"独り言",-1)),et={class:"contents"},tt=p(()=>e("h6",{class:"popup_label"},"主人公",-1)),st={class:"contents"},at=p(()=>e("h6",{class:"popup_label"},"立ち絵1",-1)),ot={class:"contents"},lt=p(()=>e("h6",{class:"popup_label"},"立ち絵2",-1)),nt={class:"contents"},pt={class:"popup_subtitle"},_t={class:"contents"},it=p(()=>e("h6",{class:"popup_label"},"画像",-1)),ut={class:"popup_images_group"},dt={class:"contents"},ct=p(()=>e("h6",{class:"popup_label"},"位置：下",-1)),rt={class:"popup_range_group"},vt={class:"contents"},gt=p(()=>e("h6",{class:"popup_label"},"位置：左",-1)),ht={class:"popup_range_group"},mt={class:"contents"},ft=p(()=>e("h6",{class:"popup_label"},"高さ",-1)),bt={class:"popup_range_group"},Ut=p(()=>e("hr",{class:"popup_hr"},null,-1)),$t=p(()=>e("h4",{class:"popup_title"},"立ち絵",-1)),wt={class:"contents"},yt=p(()=>e("h6",{class:"popup_label"},"立ち絵の数",-1)),It={class:"contents"},Dt={class:"popup_subtitle"},xt={class:"contents"},kt=p(()=>e("h6",{class:"popup_label"},"クリッピング",-1)),Ft={class:"popup_images_group"},Ct={class:"contents"},St=p(()=>e("h6",{class:"popup_label"},"位置：上",-1)),Bt={class:"popup_range_group"},Rt={class:"contents"},Lt=p(()=>e("h6",{class:"popup_label"},"位置：左",-1)),Vt={class:"popup_range_group"},jt={class:"contents"},At=p(()=>e("h6",{class:"popup_label"},"広さ",-1)),Et={class:"popup_range_group"},Nt=p(()=>e("button",{class:"popup_foot_button -cancel",title:"キャンセル"},"キャンセル",-1)),Pt={__name:"UiEdit",props:{open:{type:[Boolean],default:!1},id:{type:[Number,String],default:""}},emits:["update:open","add","fancy"],setup(d,{emit:D}){const m=d,r=D,f=Y(),{newUI:_}=f,{uiList:x}=ee(f),{isDev:j,copyObject:T,findData:C}=te(),{delItem:A,uploadItem:E,getDrag:N,dragItem:P,dropItem:y,fancy:W,setFancy:H,changeFancy:Z}=se(),s=pe({dialog:{},sprite_1:{},sprite_2:{},name_tag_1:{},name_tag_2:{}}),b=G(()=>N(s.value.images)),v=[{id:!1,name:"1の位置"},{id:!0,name:"2の位置"}],O=()=>{const u=C(x.value,m.id);m.id==="add"?x.value.push(s.value):s.value=Object.assign(u,s.value),r("update:open",!1)},S=u=>{const a=u.target.matches(".popup_window, .popup_window *"),I=u.target.matches(".-cancel");!u.target.matches(".resource_button")&&(!a||I)&&r("update:open",!1)};return _e(()=>m.open,u=>{if(!u)return;const a=C(x.value,m.id);m.id==="add"?s.value=_():s.value=T(a),j&&console.log({...s.value})}),(u,a)=>{const I=ie("visible");return k((h(),w("section",{class:"popup",onClick:S},[e("div",Ue,[e("div",$e,[o(re,{class:"popup_aspect !h-cqh lg:!h-[calc(100cqw/16*9)]"},{default:$(()=>[o(q,{class:"border border-light-text",data:s.value,large:!0,edit:!0},null,8,["data"])]),_:1}),e("section",we,[e("div",ye,[Ie,o(ue,{class:"popup_input",value:s.value.name,"onUpdate:value":a[0]||(a[0]=t=>s.value.name=t)},null,8,["value"])]),e("div",De,[e("div",xe,[ke,e("label",Fe,[o(n(X)),o(ce,{class:"hidden",onUpload:a[1]||(a[1]=t=>n(E)(s.value.images,s.value.images.length,t)),multiple:!0})])]),e("div",Ce,[(h(!0),w(R,null,L(s.value.images??[],(t,l)=>(h(),ae(F,{key:t.id,data:t,hasDrag:b.value,onDrag:i=>n(P)(s.value.images,...i,l),onDrop:i=>n(y)(s.value.images,i,l+1),onFancy:a[2]||(a[2]=i=>r("fancy",i)),onDel:i=>n(A)(s.value.images,l)},null,8,["data","hasDrag","onDrag","onDrop","onDel"]))),128))])]),e("div",Se,[Be,e("div",Re,[o(F,{data:{path:s.value.mask},draggable:!1,onUpload:a[3]||(a[3]=t=>s.value.mask=t.path),onDel:a[4]||(a[4]=t=>s.value.mask=""),onFancy:a[5]||(a[5]=t=>r("fancy",t))},null,8,["data"])])]),Le,Ve,e("div",je,[Ae,e("div",Ee,[o(g,{value:s.value.dialog.bottom,"onUpdate:value":a[6]||(a[6]=t=>s.value.dialog.bottom=t),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,c(s.value.dialog.bottom),1)])]),e("div",Ne,[Pe,e("div",He,[o(g,{value:s.value.dialog.left,"onUpdate:value":a[7]||(a[7]=t=>s.value.dialog.left=t),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,c(s.value.dialog.left),1)])]),e("div",Oe,[qe,e("div",Ge,[o(g,{value:s.value.dialog.width,"onUpdate:value":a[8]||(a[8]=t=>s.value.dialog.width=t),min:50,max:100,step:.5},null,8,["value"]),e("span",null,c(s.value.dialog.width),1)])]),Me,Te,e("div",We,[Ze,o(U,{value:s.value.name_tag_number,"onUpdate:value":a[9]||(a[9]=t=>s.value.name_tag_number=t),list:[1,2],name:"name_tag"},null,8,["value"])]),e("div",ze,[Je,o(U,{value:s.value.name_tag_solo_show,"onUpdate:value":a[10]||(a[10]=t=>s.value.name_tag_solo_show=t),list:[{id:!1,name:"非表示"},{id:!0,name:"表示"}],name:"name_tag_solo_show"},null,8,["value"])]),k(e("div",Ke,[Qe,e("div",Xe,[Ye,o(U,{value:s.value.name_tag_solo_right,"onUpdate:value":a[11]||(a[11]=t=>s.value.name_tag_solo_right=t),list:v,name:"name_tag_solo_right"},null,8,["value"])]),e("div",et,[tt,o(U,{value:s.value.name_tag_hero_right,"onUpdate:value":a[12]||(a[12]=t=>s.value.name_tag_hero_right=t),list:v,name:"name_tag_hero_right"},null,8,["value"])]),e("div",st,[at,o(U,{value:s.value.name_tag_sprite_1_right,"onUpdate:value":a[13]||(a[13]=t=>s.value.name_tag_sprite_1_right=t),list:v,name:"name_tag_sprite_1_right"},null,8,["value"])]),k(e("div",ot,[lt,o(U,{value:s.value.name_tag_sprite_2_right,"onUpdate:value":a[14]||(a[14]=t=>s.value.name_tag_sprite_2_right=t),list:v,name:"name_tag_sprite_2_right"},null,8,["value"])],512),[[B,s.value.sprite_number===2]])],512),[[B,s.value.name_tag_number===2]]),(h(),w(R,null,L(2,t=>k(e("div",nt,[e("h5",pt,"名札"+c(t),1),e("div",_t,[it,e("div",ut,[o(F,{data:{path:s.value["name_tag_"+t].path},draggable:!1,onUpload:l=>s.value["name_tag_"+t].path=l.path,onDel:l=>s.value["name_tag_"+t].path="",onFancy:a[15]||(a[15]=l=>r("fancy",l))},null,8,["data","onUpload","onDel"])])]),e("div",dt,[ct,e("div",rt,[o(g,{value:s.value["name_tag_"+t].bottom,"onUpdate:value":l=>s.value["name_tag_"+t].bottom=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,c(s.value["name_tag_"+t].bottom),1)])]),e("div",vt,[gt,e("div",ht,[o(g,{value:s.value["name_tag_"+t].left,"onUpdate:value":l=>s.value["name_tag_"+t].left=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,c(s.value["name_tag_"+t].left),1)])]),e("div",mt,[ft,e("div",bt,[o(g,{value:s.value["name_tag_"+t].height,"onUpdate:value":l=>s.value["name_tag_"+t].height=l,min:1,max:20,step:.5},null,8,["value","onUpdate:value"]),e("span",null,c(s.value["name_tag_"+t].height),1)])])],512),[[B,t===1||t===2&&s.value.name_tag_number===2]])),64)),Ut,$t,e("div",wt,[yt,o(U,{value:s.value.sprite_number,"onUpdate:value":a[16]||(a[16]=t=>s.value.sprite_number=t),list:[1,2],name:"sprite"},null,8,["value"])]),(h(),w(R,null,L(2,t=>k(e("div",It,[e("h5",Dt,"立ち絵"+c(t),1),e("div",xt,[kt,e("div",Ft,[o(F,{data:{path:s.value["sprite_"+t].mask},draggable:!1,onUpload:l=>s.value["sprite_"+t].mask=l.path,onDel:l=>s.value["sprite_"+t].mask="",onFancy:a[17]||(a[17]=l=>r("fancy",l))},null,8,["data","onUpload","onDel"])])]),e("div",Ct,[St,e("div",Bt,[o(g,{value:s.value["sprite_"+t].top,"onUpdate:value":l=>s.value["sprite_"+t].top=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,c(s.value["sprite_"+t].top),1)])]),e("div",Rt,[Lt,e("div",Vt,[o(g,{value:s.value["sprite_"+t].left,"onUpdate:value":l=>s.value["sprite_"+t].left=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,c(s.value["sprite_"+t].left),1)])]),e("div",jt,[At,e("div",Et,[o(g,{value:s.value["sprite_"+t].width,"onUpdate:value":l=>s.value["sprite_"+t].width=l,min:20,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,c(s.value["sprite_"+t].width),1)])])],512),[[B,t===1||t===2&&s.value.sprite_number===2]])),64)),e("div",{class:"popup_foot"},[e("button",{class:"popup_foot_button",onClick:O,title:"保存"},"保存"),Nt])])])])])),[[I,d.open]])}}},Ht=M(Pt,[["__scopeId","data-v-d13f307d"]]),V=d=>(oe("data-v-0b0fd6a8"),d=d(),le(),d),Ot={class:"resource_container"},qt={class:"resource"},Gt=["onClick"],Mt=["onClick"],Tt={class:"resource_footer"},Wt={class:"resource_group !flex-wrap !gap-x-5"},Zt={class:"resource_group"},zt=V(()=>e("span",null,"デフォルトUI",-1)),Jt=V(()=>e("option",{value:""},"なし",-1)),Kt={class:"resource_group"},Qt=V(()=>e("span",null,"CGのUI設定",-1)),Xt=V(()=>e("option",{value:""},"固定なし",-1)),Yt={__name:"UI",setup(d){const D=Y(),{newUI:m}=D,{defaultUI:r,defaultUIForCG:f,uiList:_}=ee(D),{copyObject:x,findData:j,findIndex:T}=te(),{delItem:C,uploadItem:A,getDrag:E,dragItem:N,dropItem:P,fancy:y,setFancy:W,changeFancy:H}=se(),Z=G(()=>E(_.value)),s=G(()=>j(_.value,y.value)),b=z({open:!1,id:""}),v=z({open:!1,value:""}),O=u=>{const a=x(_.value[u]);a.id=m(_.value),_.value.splice(u,0,a)},S=u=>{b.id=u,b.open=!0};return(u,a)=>{var I;return h(),w("div",Ot,[e("div",qt,[(h(!0),w(R,null,L(n(_)??[],(t,l)=>(h(),ae(F,{key:t.id,data:t,hasDrag:Z.value,onDrag:i=>n(N)(n(_),...i,l),onDrop:i=>n(P)(n(_),i,l+1),onFancy:i=>n(W)(n(_),t.id,"id"),onAdd:i=>n(A)(n(_),l+1,[i]),onDel:i=>n(C)(n(_),l)},{image:$(()=>[o(q,{class:"hover:opacity-75",data:t,edit:!0},null,8,["data"])]),button:$(()=>[e("label",{class:"resource_button",onClick:i=>O(l),title:"コピー"},[o(be,{class:"mt-0.5"})],8,Gt),e("label",{class:"resource_button",onClick:i=>S(t.id),title:"編集"},[o(ne,{class:"mt-0.5"})],8,Mt)]),_:2},1032,["data","hasDrag","onDrag","onDrop","onFancy","onAdd","onDel"]))),128))]),e("div",Tt,[e("div",Wt,[e("label",Zt,[zt,o(K,{class:"resource_select",value:n(r),"onUpdate:value":a[0]||(a[0]=t=>J(r)?r.value=t:null),options:n(_)},{default:$(()=>[Jt]),_:1},8,["value","options"])]),e("label",Kt,[Qt,o(K,{class:"resource_select",value:n(f),"onUpdate:value":a[1]||(a[1]=t=>J(f)?f.value=t:null),options:n(_)},{default:$(()=>[Xt]),_:1},8,["value","options"])])]),e("label",{class:"resource_plus",onClick:a[2]||(a[2]=t=>S("add")),title:"新規"},[o(n(X))])]),o(Ht,{open:b.open,"onUpdate:open":a[3]||(a[3]=t=>b.open=t),id:b.id,onFancy:a[4]||(a[4]=t=>{v.value=t,v.open=!0})},null,8,["open","id"]),o(Q,{open:v.open,"onUpdate:open":a[5]||(a[5]=t=>v.open=t)},{default:$(()=>[o(de,{src:v.value,alt:v.value},null,8,["src","alt"])]),_:1},8,["open"]),o(Q,{open:n(y).open,"onUpdate:open":a[6]||(a[6]=t=>n(y).open=t),index:n(y).index,length:(I=n(_))==null?void 0:I.length,onPrev:a[7]||(a[7]=t=>n(H)(n(_),-1,"id")),onNext:a[8]||(a[8]=t=>n(H)(n(_),1,"id"))},{default:$(()=>[o(q,{data:s.value,large:!0,edit:!0},null,8,["data"])]),_:1},8,["open","index","length"])])}}},rs=M(Yt,[["__scopeId","data-v-0b0fd6a8"]]);export{rs as default};
