import{_ as j,r as w,e as J,o as n,c as p,w as v,e5 as le,a as s,n as _,t as l,e6 as ee,H as ce,s as K,f as ne,h as ie,g as Q,e0 as re,i as de,e1 as M,e2 as m,j as X,b as d,u,F as T,v as N,e7 as $,e8 as V,d_ as _e,d$ as pe}from"./index-Tpgw5ASB.js";import{I as he}from"./round-close-YX2Y6b9k.js";import{W as ue}from"./Wrap-S2v2m2Wk.js";import{C as P,D as Y,u as ve}from"./useDrag-CMpTZABe.js";import{D as ge,M as fe,E as me}from"./Dialog-CahfVU6L.js";import{M as be}from"./Mark-DNMrtei-.js";const ye=["disabled"],De={class:"whitespace-nowrap"},we={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(i,{emit:y}){const k=i,x=y,D=w(0);return J(D,f=>x("update:value",f)),J(()=>k.value,f=>D.value=f,{immediate:!0}),(f,b)=>(n(),p("label",{class:_(["inline-flex items-center",i.disabled?"cursor-auto":"cursor-pointer"])},[v(s("input",{class:_(["checkbox",i.box]),"onUpdate:modelValue":b[0]||(b[0]=U=>D.value=U),disabled:i.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,ye),[[le,D.value]]),s("span",De,l(i.title),1),ee(f.$slots,"default",{},void 0,!0)],2))}},Z=j(we,[["__scopeId","data-v-b7a95cdd"]]),ke={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(i){return(y,k)=>(n(),p("button",{class:_(["switch",{"bg-current":i.active}])},[s("span",{class:_(["-mt-0.1em",{"text-white":i.active}])},[ee(y.$slots,"default",{},void 0,!0)],2)],2))}},L=j(ke,[["__scopeId","data-v-8bd1e4e9"]]),g=i=>(_e("data-v-b895eff2"),i=i(),pe(),i),xe={class:"side_list"},Ce={class:"flex"},Se=["onClick","title"],Ie={class:"chapter_head"},Me={class:"mr-9 grid xl:mr-0"},$e=["title"],Le=g(()=>s("span",{class:"chapter_head_number"},"01.png",-1)),Ue=g(()=>s("p",{class:"chapter_head_desc"},"目が覚めたら見知らぬ教室、辺るは水族館のような不思議な光景…自己紹介した後、どこから来た「モノカイ」と自称するぬいぐるみは俺たちをここでコロシアイ学園生活を強いられた。ここから脱出する条件は一つ――誰にばれないように殺人をすることだった。",-1)),Be={class:"mr-9 flex items-end justify-end gap-2 xl:mr-0"},Ee={class:"chapter_log"},Ae=g(()=>s("div",{class:"chapter_log_tr -lock"},[s("div",{class:"chapter_log_th ml-16 xl:ml-0"},"セリフ＆切り替え＆演出"),s("div",{class:"ml-3 w-7 shrink-0 xl:hidden"})],-1)),Te=g(()=>s("div",{class:"chapter_log_tr_2 -lock"},[s("div",{class:"chapter_log_th -col"},"話し手．主人公差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"脇役．差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"SE＆ボイス"),s("div",{class:"chapter_log_th -col"},"備考")],-1)),Ne={key:0,class:"contents"},Ve=["draggable","onDragstart","onDragend"],Pe={class:"chapter_log_scene"},je=g(()=>s("div",{class:"chapter_log_switches xl:hidden"},null,-1)),Fe={class:"chapter_log_tr_2"},Re=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),We=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),ze=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),He={class:"chapter_log_td -col"},Oe={class:"-inner"},qe={key:1,class:"contents"},Ge=["draggable","onDragstart","onDragend"],Je={class:"chapter_log_avatar"},Ke=["src"],Qe={class:"chapter_log_comment"},Xe={class:"chapter_log_switches"},Ye={class:"chapter_log_tr_2"},Ze={class:"chapter_log_td -col"},es={key:0,class:"-inner col-span-2"},ss={key:1,class:"-inner col-span-2"},ts={class:"-inner"},as={class:"-inner"},os={class:"chapter_log_td -col"},ls={class:"-inner col-span-2"},cs={class:"-inner"},ns={class:"-inner"},is={class:"chapter_log_td -col"},rs={class:"-inner"},ds={class:"-inner"},_s={class:"chapter_log_td -col"},ps={class:"-inner"},hs={__name:"Chapters",setup(i){const y=ce(),{characterList:k}=K(y),x=ne(),{newChapter:D,dialogType:f}=x,{chapterIndex:b,chapterNames:U,chapterTitle:F,chapterData:h}=K(x),{findData:R,findIndex:se}=ie(),{dragMove:te,dropMove:ae}=ve(),B=o=>R(k.value,o.人物,"name")??{},W=Q(()=>h.value.some(o=>o.dragging)),E=Q(()=>h.value.filter(o=>o.is_selected).map(o=>o.id)),C=(o,t,r)=>{r&&te(o,{index:t}),E.value.some(c=>h.value[t].id===c)||(h.value[t].is_selected=1),E.value.forEach(c=>{const a=R(h.value,c);a.dragging=r,r||(a.is_selected=0)})},z=(o,t)=>{E.value.forEach(r=>{const e=se(h.value,r);ae(h.value,e,t)})},H=w(!1),O=w(0),q=w(null),S=(o,t)=>{O.value=t,q.value=o,H.value=t===null},oe=({type:o})=>{const t=O.value,r=h.value[t];o==="delete"?r.is_delete=!0:o==="edit"?G(r.id,{}):G("add",{type:o})},A=w(!1),I=re({id:0,type:""}),G=(o,{type:t})=>{I.id=o,I.type=t??"",A.value=!0};return(o,t)=>{const r=de("visible");return n(),M(ue,null,{side:m(()=>[s("ul",xe,[(n(!0),p(T,null,X(u(U),(e,c)=>(n(),p("li",Ce,[d(be,{class:"mt-0.6em bg-current/10",active:c===u(b)},null,8,["active"]),s("button",{class:_(["side_item",{"side_item-active":c===u(b)}]),onClick:a=>b.value=c,title:e},l(e),11,Se)]))),256))])]),main_head:m(()=>[s("header",Ie,[s("div",Me,[s("h1",{class:"chapter_head_title",title:u(F)},l(u(F)),9,$e),Le]),Ue,s("div",Be,[d(L,{class:"relative text-primary bg-primary/25"},{default:m(()=>[d(u(he),{class:"mt-0.1em"}),d(P,{class:"absolute left-0 top-0 opacity-0",onMore:t[0]||(t[0]=e=>S(e,null)),hasDel:!1,hasAdd:!1})]),_:1})])])]),default:m(()=>[s("div",Ee,[Ae,Te,d(Y,{class:"chapter_log_dragline",onDrop:t[1]||(t[1]=e=>z(e,0)),dragging:W.value},null,8,["dragging"]),(n(!0),p(T,null,X(u(h),(e,c)=>(n(),p(T,{key:e.id},[e.is_showtime?v((n(),p("section",Ne,[s("div",{class:_(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:a=>C(a,c,!0),onDragend:a=>C(a,c,!1),onDrag:t[2]||(t[2]=$(()=>{},["prevent"])),onDrop:t[3]||(t[3]=$(()=>{},["prevent"]))},[s("div",{class:_(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[d(Z,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":a=>e.is_selected=a},null,8,["value","onUpdate:value"]),d(P,{class:"chapter_log_control",onMore:a=>S(a,c),hasDel:!1,hasAdd:!1},null,8,["onMore"]),s("div",Pe,[s("span",null,l(e.人物),1),s("span",null,l(e.show_time),1),s("span",null,l(e.show_name),1)])],2),je],42,Ve),s("div",Fe,[Re,We,ze,s("div",He,[s("div",Oe,l(e.備註),1)])])],512)),[[N,!e.is_delete]]):v((n(),p("section",qe,[s("div",{class:_(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:a=>C(a,c,!0),onDragend:a=>C(a,c,!1),onDrag:t[4]||(t[4]=$(()=>{},["prevent"])),onDrop:t[5]||(t[5]=$(()=>{},["prevent"]))},[s("div",{class:_(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[d(Z,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":a=>e.is_selected=a},null,8,["value","onUpdate:value"]),d(P,{class:"chapter_log_control",onMore:a=>S(a,c),onDel:a=>e.is_delete=!0,hasDel:!1,hasAdd:!1},null,8,["onMore","onDel"]),s("div",{class:_(["chapter_log_info",{"flex-row-reverse":B(e).is_hero,"-replay":e.is_replay}])},[v((n(),p("div",Je,[s("img",{src:B(e).image_head},null,8,Ke)])),[[r,B(e).image_head]]),s("div",Qe,[d(ge,{class:"chapter_log_dialog",value:e.和訳,type:u(f)(e)},null,8,["value","type"])])],2)],2),s("div",Xe,[v((n(),M(L,{class:_(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:m(()=>[V("R")]),_:2},1032,["active","class"])),[[r,e.is_replay]]),v((n(),M(L,{class:_(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未紹介"},{default:m(()=>[V("U")]),_:2},1032,["active","class"])),[[r,e.is_unknown]]),v((n(),M(L,{class:_(["chapter_log_switch",{"-monolog":e.is_solo}]),active:e.is_solo,title:"独り言"},{default:m(()=>[V("S")]),_:2},1032,["active","class"])),[[r,e.is_solo]])])],42,Ge),s("div",Ye,[s("div",Ze,[e.is_announce||e.is_system?(n(),p("div",es,l(e.人物),1)):(n(),p("div",ss,l(e.人物),1)),s("div",ts,l(e.十六夜差分),1),s("div",as,l(e.主角特效),1)]),s("div",os,[s("div",ls,l(e.顯示角色),1),s("div",cs,l(e.角色差分),1),s("div",ns,l(e.差分特效),1)]),s("div",is,[s("div",rs,l(e.SE),1),s("div",ds,l(e.Voice),1)]),s("div",_s,[s("div",ps,l(e.備註),1)])])],512)),[[N,!e.is_delete]]),v(d(Y,{class:"chapter_log_dragline",onDrop:a=>z(a,c+1),dragging:W.value},null,8,["onDrop","dragging"]),[[N,!e.is_delete]])],64))),128))]),d(fe,{positions:q.value,onClear:S,onUse:oe,onlyAdd:H.value},null,8,["positions","onlyAdd"]),d(me,{open:A.value,"onUpdate:open":t[6]||(t[6]=e=>A.value=e),id:I.id,type:I.type},null,8,["open","id","type"])]),_:1})}}},ys=j(hs,[["__scopeId","data-v-b895eff2"]]);export{ys as default};
