import{_ as I,o as _,c as p,a,r as $,e as D,q as N,w as C,x as se,y as ie,z as re,l as ue,A as R,F,p as q,t as B,v as O,u as U,B as _e,C as ve,n as c,f as pe,s as Y,g as he,i as K,j as Z,k as x,b as n,D as A,E as me,G as fe}from"./index-DdnuG28l.js";import{I as ye}from"./Menu.vue_vue_type_style_index_0_scoped_460a9451_lang-DEuYdNpd.js";import{W as ge}from"./Wrap-CALcOQoa.js";import{C as j,D as ee,u as be}from"./useDrag-Cyxp5dnL.js";import{D as ke,M as we}from"./Dialog-BGjIqQi_.js";import{M as xe}from"./Mark-DJnplI8Y.js";const Ue={name:"MdiExclamationThick"},Se={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},$e=a("path",{fill:"currentColor",d:"M10 3h4v11h-4zm0 18v-4h4v4z"},null,-1),Ce=[$e];function De(l,y,g,b,v,i){return _(),p("svg",Se,Ce)}const Be=I(Ue,[["render",De]]),Me=["disabled","placeholder"],S={__name:"Input",props:{value:{type:[String,Number],default:""},disabled:{type:[Boolean],default:!1},placeholder:{type:[String],default:""}},emits:["update:value"],setup(l,{emit:y}){const g=l,b=y,v=$("");return D(v,i=>b("update:value",i)),D(()=>g.value,i=>v.value=i,{immediate:!0}),(i,u)=>{const h=N("verify");return C((_(),p("input",{"onUpdate:modelValue":u[0]||(u[0]=k=>v.value=k),disabled:l.disabled,placeholder:l.disabled?"":l.placeholder},null,8,Me)),[[se,v.value,void 0,{lazy:!0,trim:!0}],[h,void 0,void 0,{check:!0}]])}}},Ie=["disabled","placeholder"],Ee=["value"],Te={__name:"Select",props:{value:{type:[String,Number],default:""},options:{type:[Array],default:()=>[]},disabled:{type:[Boolean],default:!1},placeholder:{type:[String],default:""}},emits:["update:value"],setup(l,{emit:y}){ie(u=>({"4ad1a84a":U(v).light.text}));const g=l,b=y,{colors:v}=re(),i=$("");return D(i,u=>b("update:value",u)),D(()=>g.value,u=>i.value=u,{immediate:!0}),(u,h)=>{const k=N("verify");return C((_(),p("select",{class:"select","onUpdate:modelValue":h[0]||(h[0]=d=>i.value=d),disabled:l.disabled,placeholder:l.disabled?"":l.placeholder},[R(u.$slots,"default",{},void 0,!0),(_(!0),p(F,null,q(l.options,d=>C((_(),p("option",{value:d.id??d},B(d.title??d.id??d),9,Ee)),[[O,d.show??!0]])),256))],8,Ie)),[[ue,i.value,void 0,{lazy:!0,trim:!0}],[k,void 0,void 0,{check:!0}]])}}},P=I(Te,[["__scopeId","data-v-1b98bee5"]]),Ve=["disabled","placeholder"],te={__name:"Textarea",props:{value:{type:[String,Number],default:""},disabled:{type:[Boolean],default:!1},placeholder:{type:[String],default:""}},emits:["update:value","selected"],setup(l,{emit:y}){const g=l,b=y,v=$(null),i=$(""),u=h=>{if(!h.ctrlKey)return;const{selectionStart:k,selectionEnd:d}=v.value;b("selected",{start:k,end:d})};return D(i,h=>b("update:value",h)),D(()=>g.value,h=>i.value=h,{immediate:!0}),(h,k)=>{const d=N("verify");return C((_(),p("textarea",{class:"scrollbar min-h-0 resize-none","onUpdate:modelValue":k[0]||(k[0]=L=>i.value=L),disabled:l.disabled,placeholder:l.disabled?"":l.placeholder,onKeydown:_e(u,["q"]),ref_key:"textarea",ref:v},null,40,Ve)),[[se,i.value,void 0,{lazy:!0,trim:!0}],[d,void 0,void 0,{check:!0}]])}}},ze=["disabled"],Ae={class:"whitespace-nowrap"},Fe={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(l,{emit:y}){const g=l,b=y,v=$(0);return D(v,i=>b("update:value",i)),D(()=>g.value,i=>v.value=i,{immediate:!0}),(i,u)=>(_(),p("label",{class:c(["inline-flex items-center",l.disabled?"cursor-auto":"cursor-pointer"])},[C(a("input",{class:c(["checkbox",l.box]),"onUpdate:modelValue":u[0]||(u[0]=h=>v.value=h),disabled:l.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,ze),[[ve,v.value]]),a("span",Ae,B(l.title),1),R(i.$slots,"default",{},void 0,!0)],2))}},ae=I(Fe,[["__scopeId","data-v-b7a95cdd"]]),Ne={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(l){return(y,g)=>(_(),p("button",{class:c(["switch",{"bg-current":l.active}])},[a("span",{class:c(["-mt-0.1em",{"text-white":l.active}])},[R(y.$slots,"default",{},void 0,!0)],2)],2))}},M=I(Ne,[["__scopeId","data-v-8bd1e4e9"]]),m=l=>(me("data-v-91a269da"),l=l(),fe(),l),Le={class:"side_list"},Ge={class:"flex"},Ke=["onClick","title"],je={class:"chapter_head"},Pe={class:"mr-9 grid xl:mr-0"},qe=["title"],Oe=m(()=>a("span",{class:"chapter_head_number"},"01.png",-1)),Re=m(()=>a("p",{class:"chapter_head_desc"},"目が覚めたら見知らぬ教室、辺るは水族館のような不思議な光景…自己紹介した後、どこから来た「モノカイ」と自称するぬいぐるみは俺たちをここでコロシアイ学園生活を強いられた。ここから脱出する条件は一つ――誰にばれないように殺人をすることだった。",-1)),We={class:"mr-9 flex items-end justify-end gap-2 xl:mr-0"},He=m(()=>a("span",{class:"text-xs opacity-50"},"セリフにキーワードを指定したい場合は、文字を[ ]で囲んでください。",-1)),Je={class:"chapter_log"},Qe=m(()=>a("div",{class:"chapter_log_tr -lock"},[a("div",{class:"chapter_log_th ml-16 xl:ml-0"},"セリフ＆切り替え＆演出"),a("div",{class:"ml-4 w-8 shrink-0 xl:hidden"})],-1)),Xe=m(()=>a("div",{class:"chapter_log_tr_2 -lock"},[a("div",{class:"chapter_log_th -col"},"話し手．主人公差分＆エフェクト"),a("div",{class:"chapter_log_th -col"},"脇役．差分＆エフェクト"),a("div",{class:"chapter_log_th -col"},"SE"),a("div",{class:"chapter_log_th -col"},"ボイス"),a("div",{class:"chapter_log_th -col"},"備考")],-1)),Ye={key:0,class:"contents"},Ze=["draggable","onDragstart","onDragend"],et={class:"chapter_log_scene"},tt=m(()=>a("div",{class:"ml-2 w-8 shrink-0 xl:hidden"},null,-1)),at={class:"chapter_log_tr_2"},st=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),lt=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),nt=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),ot=m(()=>a("div",{class:"chapter_log_td -col"},null,-1)),ct={class:"chapter_log_td -col"},dt={key:1,class:"contents"},it=["draggable","onDragstart","onDragend"],rt={class:"chapter_log_avatar"},ut=["src"],_t={class:"chapter_log_switches"},vt=m(()=>a("span",{class:"dark:text-dark-wrap"},"R",-1)),pt=m(()=>a("span",{class:"dark:text-dark-wrap"},"U",-1)),ht=m(()=>a("span",{class:"dark:text-dark-wrap"},"S",-1)),mt={class:"chapter_log_tr_2"},ft={class:"chapter_log_td -col"},yt=m(()=>a("option",{class:"text-primary",value:""},"話し手",-1)),gt={class:"chapter_log_td -col"},bt=m(()=>a("option",{value:""},"脇役",-1)),kt={class:"chapter_log_td -col"},wt={class:"chapter_log_td -col"},xt={class:"chapter_log_td -col"},Ut={__name:"Chapters",setup(l){const y=pe(),{characterList:g}=Y(y),b=he(),{newChapter:v,dialogType:i}=b,{chapterIndex:u,chapterNames:h,chapterTitle:k,chapterData:d}=Y(b),{dragMove:L,dropMove:le}=be(),ne=s=>[{id:"BG",show:s.is_scene},{id:"BGM",show:s.is_scene},{id:"CG",show:s.is_perform},{id:"暗場",show:s.is_perform},{id:"動畫",show:s.is_perform}],W=K(()=>g.value.map(s=>({id:s.name}))),w=s=>({"!bg-secondary !text-black/60 dark:!text-neutral-800/75":!!s}),E=s=>g.value.find(o=>(s.人物??"")===o.name)??{},oe=(s,o)=>{const f=o.和訳,e=f.slice(0,s.start),r=f.slice(s.start,s.end),t=f.slice(s.end);o.和訳=[e,"[",r,"]",t].join("")},H=K(()=>d.value.some(s=>s.dragging)),G=K(()=>d.value.filter(s=>s.is_selected).map(s=>s.id)),T=(s,o,f)=>{f&&L(s,{index:o}),G.value.some(r=>d.value[o].id===r)||(d.value[o].is_selected=1),G.value.forEach(r=>{const t=d.value.find(de=>de.id===r);t.dragging=f,f||(t.is_selected=0)})},J=(s,o)=>{G.value.forEach(f=>{const e=d.value.findIndex(r=>r.id===f);le(d.value,e,o)})},Q=$(!1),V=$(0),X=$(null),z=(s,o)=>{V.value=o,X.value=s,Q.value=o===null},ce=({type:s})=>{const o=V.value,f=d.value[o];if(s==="delete")f.is_delete=!0;else{const e=V.value===null?d.value.length:V.value+1;d.value.splice(e,0,v(s))}};return(s,o)=>{const f=N("visible");return _(),Z(ge,null,{side:x(()=>[a("ul",Le,[(_(!0),p(F,null,q(U(h),(e,r)=>(_(),p("li",Ge,[n(xe,{class:"mt-0.6em bg-current/10",active:r===U(u)},null,8,["active"]),a("button",{class:c(["side_item",{"side_item-active":r===U(u)}]),onClick:t=>u.value=r,title:e},B(e),11,Ke)]))),256))])]),main_head:x(()=>[a("div",je,[a("div",Pe,[a("h1",{class:"chapter_head_title",title:U(k)},B(U(k)),9,qe),Oe]),Re,a("div",We,[He,n(M,{class:"bg-keyword text-keyword-dark"},{default:x(()=>[n(Be,{class:"mt-0.1em"})]),_:1}),n(M,{class:"relative text-primary bg-primary/25"},{default:x(()=>[n(U(ye),{class:"mt-0.1em"}),n(j,{class:"absolute left-0 top-0 opacity-0",onMore:o[0]||(o[0]=e=>z(e,null)),hasDel:!1,hasAdd:!1})]),_:1})])])]),default:x(()=>[a("div",Je,[Qe,Xe,n(ee,{class:"chapter_log_dragline",onDrop:o[1]||(o[1]=e=>J(e,0)),dragging:H.value},null,8,["dragging"]),(_(!0),p(F,null,q(U(d),(e,r)=>(_(),p(F,{key:e.id},[e.is_showtime?C((_(),p("div",Ye,[a("div",{class:c(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:t=>T(t,r,!0),onDragend:t=>T(t,r,!1),onDrag:o[2]||(o[2]=A(()=>{},["prevent"])),onDrop:o[3]||(o[3]=A(()=>{},["prevent"]))},[a("div",{class:c(["chapter_log_td flex px-2",{"bg-secondary/60":e.is_selected}])},[n(ae,{class:"mr-1 shrink-0",value:e.is_selected,"onUpdate:value":t=>e.is_selected=t},null,8,["value","onUpdate:value"]),n(j,{class:"-mx-1 shrink-0 px-1",onMore:t=>z(t,r),hasDel:!1,hasAdd:!1},null,8,["onMore"]),a("div",et,[a("span",null,B(e.人物),1),n(P,{value:e.show_time,"onUpdate:value":t=>e.show_time=t,options:ne(e),onFocus:t=>e.is_drag=!1,onBlur:t=>e.is_drag=!0,onChange:t=>e.show_name=""},null,8,["value","onUpdate:value","options","onFocus","onBlur","onChange"]),n(S,{value:e.show_name,"onUpdate:value":t=>e.show_name=t,onFocus:t=>e.is_drag=!1,onBlur:t=>e.is_drag=!0},null,8,["value","onUpdate:value","onFocus","onBlur"])])],2),tt],42,Ze),a("div",at,[st,lt,nt,ot,a("div",ct,[n(S,{class:c(["-inner",w(e.備註)]),value:e.備註,"onUpdate:value":t=>e.備註=t},null,8,["value","onUpdate:value","class"])])])],512)),[[O,!e.is_delete]]):C((_(),p("div",dt,[a("div",{class:c(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:t=>T(t,r,!0),onDragend:t=>T(t,r,!1),onDrag:o[4]||(o[4]=A(()=>{},["prevent"])),onDrop:o[5]||(o[5]=A(()=>{},["prevent"]))},[a("div",{class:c(["chapter_log_td flex px-2",{"bg-secondary/60":e.is_selected}])},[n(ae,{class:"mr-1 shrink-0",value:e.is_selected,"onUpdate:value":t=>e.is_selected=t},null,8,["value","onUpdate:value"]),n(j,{class:"-mx-1 shrink-0 px-1",onMore:t=>z(t,r),hasDel:!1,hasAdd:!1},null,8,["onMore"]),a("div",{class:c(["chapter_log_info",{"flex-row-reverse":E(e).is_hero,"-replay":e.is_replay}])},[C((_(),p("div",rt,[a("img",{src:E(e).image_head},null,8,ut)])),[[f,E(e).image_head]]),a("div",{class:c(["chapter_log_dialog",{"-hero":E(e).is_hero}])},[n(ke,{class:"my-auto w-full",value:e.和訳,type:U(i)(e)},null,8,["value","type"]),n(te,{class:"chapter_log_dialog_input",value:e.和訳,"onUpdate:value":t=>e.和訳=t,onSelected:t=>oe(t,e),onFocus:t=>e.is_drag=!1,onBlur:t=>e.is_drag=!0},null,8,["value","onUpdate:value","onSelected","onFocus","onBlur"])],2)],2)],2),a("div",_t,[n(M,{class:c(["chapter_log_switch",{"text-replay":e.is_replay}]),onClick:t=>e.is_replay=!e.is_replay,active:e.is_replay,title:"再放送"},{default:x(()=>[vt]),_:2},1032,["onClick","active","class"]),n(M,{class:c(["chapter_log_switch",{"text-unknown":e.is_unknown}]),onClick:t=>e.is_unknown=!e.is_unknown,active:e.is_unknown,title:"未紹介"},{default:x(()=>[pt]),_:2},1032,["onClick","active","class"]),n(M,{class:c(["chapter_log_switch",{"text-monolog-dark dark:text-monolog":e.is_solo}]),onClick:t=>e.is_solo=!e.is_solo,active:e.is_solo,title:"独り言"},{default:x(()=>[ht]),_:2},1032,["onClick","active","class"])])],42,it),a("div",mt,[a("div",ft,[e.is_announce||e.is_system?(_(),p("div",{key:0,class:c(["-inner col-span-2",w(!0)])},B(e.人物),3)):(_(),Z(P,{key:1,class:c(["-inner col-span-2",w(e.人物)]),value:e.人物,"onUpdate:value":t=>e.人物=t,options:W.value,placeholder:"話し手"},{default:x(()=>[yt]),_:2},1032,["value","onUpdate:value","options","class"])),n(S,{class:c(["-inner",w(e.十六夜差分)]),value:e.十六夜差分,"onUpdate:value":t=>e.十六夜差分=t,placeholder:"主人公差分"},null,8,["value","onUpdate:value","class"]),n(S,{class:c(["-inner",w(e.主角特效)]),value:e.主角特效,"onUpdate:value":t=>e.主角特效=t,placeholder:"主人公エフェクト"},null,8,["value","onUpdate:value","class"])]),a("div",gt,[n(P,{class:c(["-inner col-span-2",w(e.顯示角色)]),value:e.顯示角色,"onUpdate:value":t=>e.顯示角色=t,options:W.value,placeholder:"脇役"},{default:x(()=>[bt]),_:2},1032,["value","onUpdate:value","options","class"]),n(S,{class:c(["-inner",w(e.角色差分)]),value:e.角色差分,"onUpdate:value":t=>e.角色差分=t,placeholder:"脇役差分"},null,8,["value","onUpdate:value","class"]),n(S,{class:c(["-inner",w(e.差分特效)]),value:e.差分特效,"onUpdate:value":t=>e.差分特效=t,placeholder:"脇役エフェクト"},null,8,["value","onUpdate:value","class"])]),a("div",kt,[n(S,{class:c(["-inner",w(e.SE)]),value:e.SE,"onUpdate:value":t=>e.SE=t},null,8,["value","onUpdate:value","class"])]),a("div",wt,[n(S,{class:c(["-inner",w(e.Voice)]),value:e.Voice,"onUpdate:value":t=>e.Voice=t},null,8,["value","onUpdate:value","class"])]),a("div",xt,[n(te,{class:c(["-inner",w(e.備註)]),value:e.備註,"onUpdate:value":t=>e.備註=t},null,8,["value","onUpdate:value","class"])])])],512)),[[O,!e.is_delete]]),n(ee,{class:"chapter_log_dragline",onDrop:t=>J(t,r+1),dragging:H.value},null,8,["onDrop","dragging"])],64))),128))]),n(we,{positions:X.value,onClear:z,onUse:ce,onlyAdd:Q.value},null,8,["positions","onlyAdd"])]),_:1})}}},It=I(Ut,[["__scopeId","data-v-91a269da"]]);export{It as default};
