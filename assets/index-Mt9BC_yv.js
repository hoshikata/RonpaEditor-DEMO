import{_ as M,o as r,c as m,a as t,r as T,g as se,w as y,G as fe,n as d,t as x,H as ie,m as re,i as L,f as be,s as B,u as we,h as ye,b as De,B as ke,q as xe,y as V,C as w,e as a,d as l,x as ae,F as W,v as F,I as E,A as G,J as Ce,K as Se,L as Ie}from"./index-DBHXhL4u.js";import{a as le,I as $e}from"./IconDelete-CiV-FiI4.js";import{_ as Te,D as Le,M as Me,E as qe}from"./Dialog-BmxjBILh.js";import{W as Ae}from"./Wrap-CUfiMRF-.js";import{C as z}from"./Control-DNKsFeFz.js";import{D as oe}from"./DropLine-BBC62VDw.js";import{M as Ue}from"./Mark-bHSUWdkw.js";import{A as Be}from"./Avatar-BeIq3AZ1.js";/* empty css                                                             */import"./Image-DvWA8E0Z.js";const Ve={name:"MaterialSymbolsArrowWarmUpRounded"},Ee={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ne=t("path",{fill:"currentColor",d:"M12 13q-.425 0-.712-.288T11 12V5.825L7.1 9.7q-.275.275-.687.288T5.7 9.7q-.275-.275-.275-.7t.275-.7l5.6-5.6q.15-.15.325-.212T12 2.425t.375.063t.325.212l5.6 5.6q.275.275.275.688T18.3 9.7q-.3.3-.712.3t-.713-.3L13 5.825V12q0 .425-.288.713T12 13m0 5q-.425 0-.712-.288T11 17v-1q0-.425.288-.712T12 15t.713.288T13 16v1q0 .425-.288.713T12 18m0 4q-.425 0-.712-.288T11 21t.288-.712T12 20t.713.288T13 21t-.288.713T12 22"},null,-1),Pe=[Ne];function Re(c,p,b,f,h,v){return r(),m("svg",Ee,Pe)}const ne=M(Ve,[["render",Re]]),We=["disabled"],Fe={class:"whitespace-nowrap"},Ge={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(c,{emit:p}){const b=c,f=p,h=T(0);return se(h,v=>f("update:value",v)),se(()=>b.value,v=>h.value=v,{immediate:!0}),(v,C)=>(r(),m("label",{class:d(["inline-flex items-center",c.disabled?"cursor-auto":"cursor-pointer"])},[y(t("input",{class:d(["checkbox",c.box]),"onUpdate:modelValue":C[0]||(C[0]=S=>h.value=S),disabled:c.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,We),[[fe,h.value]]),t("span",Fe,x(c.title),1),ie(v.$slots,"default",{},void 0,!0)],2))}},ce=M(Ge,[["__scopeId","data-v-b7a95cdd"]]),ze={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(c){return(p,b)=>(r(),m("button",{class:d(["switch",{"bg-current":c.active}])},[t("span",{class:d(["-mt-0.1em",{"text-white":c.active}])},[ie(p.$slots,"default",{},void 0,!0)],2)],2))}},N=M(ze,[["__scopeId","data-v-8bd1e4e9"]]),He={__name:"Inner",props:{value:{type:[Number,String],default:void 0},list:{type:[Array],default:()=>[]}},setup(c){const p=c,{findData:b}=re(),f=L(()=>b(p.list,p.value)),h=L(()=>p.list.length?p.value!==""&&!f.value:!1),v=L(()=>({"!bg-red-500/50":h.value}));return(C,S)=>{var I;return r(),m("div",{class:d(["inner",v.value])},x((I=f.value)==null?void 0:I.name),3)}}},g=M(He,[["__scopeId","data-v-62a93efc"]]),D=c=>(Ce("data-v-b145400e"),c=c(),Se(),c),Je={class:"side_list"},Ke={class:"flex"},Oe=["onClick","title"],je={class:"chapter_head"},Qe=["disabled"],Xe=["disabled"],Ye={class:"chapter_log"},Ze={class:"chapter_log_tr -lock"},et={class:"mx-1 w-14 self-center"},tt=D(()=>t("div",{class:"chapter_log_th xl:ml-0"},"セリフ＆切り替え＆演出",-1)),st=D(()=>t("div",{class:"ml-3 w-7 shrink-0 xl:hidden"},null,-1)),at=D(()=>t("div",{class:"chapter_log_tr_2 -lock"},[t("div",{class:"chapter_log_th -col"},"立ち絵1．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"立ち絵2．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"SE＆ボイス"),t("div",{class:"chapter_log_th -col"},"備考")],-1)),lt={key:0,class:"contents"},ot=["onDragstart","onDragend"],nt={class:"chapter_log_scene"},ct=D(()=>t("div",{class:"chapter_log_switches xl:!hidden"},null,-1)),it={class:"chapter_log_tr_2"},rt=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),dt=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),_t=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),ut={class:"chapter_log_td -col"},pt={key:1,class:"contents"},vt=["onDragstart","onDragend"],ht={class:"chapter_log_comment"},gt={class:"chapter_log_switches"},mt={class:"chapter_log_tr_2"},ft={class:"chapter_log_td -col"},bt={class:"chapter_log_td -col"},wt={class:"chapter_log_td -col"},yt={class:"chapter_log_td -col"},Dt={__name:"index",setup(c){const p=be();B(p);const b=we(),{getCharacter:f}=b,{characterList:h}=B(b),v=ye(),{dialogType:C,newChapter:S,deleteChapter:I,moveChapter:H}=v,{chapterIndex:$,chapterNames:de,chapterLength:J,chapterTarget:K,chapterData:u}=B(v),O=De(),{getShowName:_e,getSe:kt}=O,{effectList:j,backgroundList:xt,cgList:Ct,bgmList:St,seList:It}=B(O),{findData:ue,findIndex:pe}=re(),{dragMove:ve,dropMove:he}=Ie(),Q=o=>f(o.人物),X=L(()=>u.value.some(o=>o.dragging)),P=L(()=>u.value.filter(o=>o.is_selected).map(o=>o.id)),q=(o,s,_)=>{_&&ve(o,{index:s}),P.value.some(i=>u.value[s].id===i)||(u.value[s].is_selected=1),P.value.forEach(i=>{const n=ue(u.value,i);n.dragging=_,_||(n.is_selected=0)})},Y=(o,s)=>{P.value.forEach(_=>{const e=pe(u.value,_);he(u.value,e,s)})},Z=T(!1),A=T(0),ee=T(null),U=(o,s)=>{A.value=s,ee.value=o,Z.value=s===null},ge=({type:o})=>{const s=A.value,_=u.value[s];o==="delete"?_.is_delete=!0:o==="edit"?te(_.id,{}):o==="copy"?u.value.splice(s,0,{..._}):te("add",{type:o})},R=T(!1),k=ke({id:0,type:"",index:0}),te=(o,{type:s})=>{k.id=o,k.type=s??"",k.index=A.value,R.value=!0},me=o=>{const s=A.value===null?u.value.length:k.index+1;u.value.splice(s,0,o)};return(o,s)=>{const _=xe("visible");return r(),V(Ae,null,{side_foot:w(()=>[t("button",{class:"chapter_add",onClick:s[0]||(s[0]=(...e)=>l(S)&&l(S)(...e)),title:"新規"},[a(l(le))])]),side:w(()=>[t("ul",Je,[(r(!0),m(W,null,ae(l(de),(e,i)=>(r(),m("li",Ke,[a(Ue,{class:"chapter_mark",active:i===l($)},null,8,["active"]),t("button",{class:d(["side_item",{"side_item-active":i===l($)}]),onClick:n=>$.value=i,title:e},x(e),11,Oe)]))),256))])]),main_head:w(()=>[t("header",je,[a(Te,{class:"chapter_head_title",value:l(K).title,"onUpdate:value":s[1]||(s[1]=e=>l(K).title=e),placeholder:"タイトル"},null,8,["value"]),t("button",{class:"chapter_head_button",onClick:s[2]||(s[2]=e=>l(H)(-1)),disabled:!l($),title:"上に移動"},[a(ne)],8,Qe),t("button",{class:"chapter_head_button",onClick:s[3]||(s[3]=e=>l(H)(1)),disabled:!l(J)||l($)===l(J)-1,title:"下に移動"},[a(ne,{class:"-scale-y-100"})],8,Xe),t("button",{class:"chapter_head_button",onClick:s[4]||(s[4]=(...e)=>l(I)&&l(I)(...e)),title:"削除"},[a($e)])])]),default:w(()=>[t("div",Ye,[t("div",Ze,[t("div",et,[a(N,{class:"chapter_plus",title:"新規"},{default:w(()=>[a(l(le),{class:"mt-0.1em"}),a(z,{class:"absolute left-0 top-0 opacity-0",onMore:s[5]||(s[5]=e=>U(e,null)),hasDel:!1,hasAdd:!1})]),_:1})]),tt,st]),at,a(oe,{class:"chapter_log_dragline",onDrop:s[6]||(s[6]=e=>Y(e,0)),dragging:X.value},null,8,["dragging"]),(r(!0),m(W,null,ae(l(u),(e,i)=>(r(),m(W,{key:e.id},[e.is_showtime?y((r(),m("section",lt,[t("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>q(n,i,!0),onDragend:n=>q(n,i,!1),onDrag:s[7]||(s[7]=E(()=>{},["prevent"])),onDrop:s[8]||(s[8]=E(()=>{},["prevent"]))},[t("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ce,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(z,{class:"chapter_log_control",onMore:n=>U(n,i),hasDel:!1,hasAdd:!1},null,8,["onMore"]),t("div",nt,[t("span",null,x(e.人物),1),t("span",null,x(e.show_time),1),t("span",null,x(l(_e)(e.show_time,e.show_name)),1)])],2),ct],42,ot),t("div",it,[rt,dt,_t,t("div",ut,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[F,!e.is_delete]]):y((r(),m("section",pt,[t("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>q(n,i,!0),onDragend:n=>q(n,i,!1),onDrag:s[9]||(s[9]=E(()=>{},["prevent"])),onDrop:s[10]||(s[10]=E(()=>{},["prevent"]))},[t("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ce,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(z,{class:"chapter_log_control",onMore:n=>U(n,i),onDel:n=>e.is_delete=!0,hasDel:!1,hasAdd:!1},null,8,["onMore","onDel"]),t("div",{class:d(["chapter_log_info",{"flex-row-reverse":Q(e).is_hero,"-replay":e.is_replay}])},[a(Be,{class:"chapter_log_avatar",name:Q(e).name},null,8,["name"]),t("div",ht,[a(Le,{class:"chapter_log_dialog",value:e.和訳,type:l(C)(e)},null,8,["value","type"])])],2)],2),t("div",gt,[y((r(),V(N,{class:d(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:w(()=>[G("R")]),_:2},1032,["active","class"])),[[_,e.is_replay]]),y((r(),V(N,{class:d(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未解明"},{default:w(()=>[G("U")]),_:2},1032,["active","class"])),[[_,e.is_unknown]]),y((r(),V(N,{class:d(["chapter_log_switch",{"-monolog":e.is_monolog}]),active:e.is_monolog,title:"独り言"},{default:w(()=>[G("S")]),_:2},1032,["active","class"])),[[_,e.is_monolog]])])],42,vt),t("div",mt,[t("div",ft,[a(g,{class:"col-span-2",value:e.顯示角色,list:l(h)},null,8,["value","list"]),a(g,{value:e.角色差分,list:l(f)(e.顯示角色).sprite},null,8,["value","list"]),a(g,{value:e.差分特效,list:l(j)},null,8,["value","list"])]),t("div",bt,[a(g,{class:"col-span-2",value:e.立ち絵2,list:l(h)},null,8,["value","list"]),a(g,{value:e.十六夜差分,list:l(f)(e.立ち絵2).sprite},null,8,["value","list"]),a(g,{value:e.主角特效,list:l(j)},null,8,["value","list"])]),t("div",wt,[a(g,{value:e.SE},null,8,["value"]),a(g,{value:e.Voice},null,8,["value"])]),t("div",yt,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[F,!e.is_delete]]),y(a(oe,{class:"chapter_log_dragline",onDrop:n=>Y(n,i+1),dragging:X.value},null,8,["onDrop","dragging"]),[[F,!e.is_delete]])],64))),128))]),a(Me,{positions:ee.value,onClear:U,onUse:ge,onlyAdd:Z.value},null,8,["positions","onlyAdd"]),a(qe,{open:R.value,"onUpdate:open":s[11]||(s[11]=e=>R.value=e),id:k.id,type:k.type,onAdd:me},null,8,["open","id","type"])]),_:1})}}},Nt=M(Dt,[["__scopeId","data-v-b145400e"]]);export{Nt as default};
