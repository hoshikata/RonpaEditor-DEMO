import{_ as M,o as r,c as f,a as s,r as T,g as se,w as y,G as we,n as d,t as C,H as ie,m as re,i as L,f as ye,s as U,u as De,h as ke,b as Ce,B as xe,q as Se,y as V,C as w,d as a,e as o,x as ae,F as R,v as W,I as E,A as F,J as Ie,K as $e,L as Te}from"./index-D0GbkE8i.js";import{a as le,I as Le}from"./IconDelete-Bqd5S59N.js";import{_ as Me}from"./Input-BFAgUE_7.js";import{W as qe}from"./Wrap-CnHyLras.js";import{C as z,D as oe}from"./DropLine-BbnlAZUJ.js";import{D as Ae,M as Be,E as Ue}from"./Dialog-DRLhTuNq.js";import{M as Ve}from"./Mark-C8dM0otT.js";import{A as Ee}from"./Avatar-D0M6Hic_.js";/* empty css                                                             */import"./Image-qcYgLhux.js";const Ne={name:"MaterialSymbolsArrowWarmUpRounded"},Ge={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Pe=s("path",{fill:"currentColor",d:"M12 13q-.425 0-.712-.288T11 12V5.825L7.1 9.7q-.275.275-.687.288T5.7 9.7q-.275-.275-.275-.7t.275-.7l5.6-5.6q.15-.15.325-.212T12 2.425t.375.063t.325.212l5.6 5.6q.275.275.275.688T18.3 9.7q-.3.3-.712.3t-.713-.3L13 5.825V12q0 .425-.288.713T12 13m0 5q-.425 0-.712-.288T11 17v-1q0-.425.288-.712T12 15t.713.288T13 16v1q0 .425-.288.713T12 18m0 4q-.425 0-.712-.288T11 21t.288-.712T12 20t.713.288T13 21t-.288.713T12 22"},null,-1),Re=[Pe];function We(c,p,b,m,h,v){return r(),f("svg",Ge,Re)}const ne=M(Ne,[["render",We]]),Fe=["disabled"],ze={class:"whitespace-nowrap"},He={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(c,{emit:p}){const b=c,m=p,h=T(0);return se(h,v=>m("update:value",v)),se(()=>b.value,v=>h.value=v,{immediate:!0}),(v,x)=>(r(),f("label",{class:d(["inline-flex items-center",c.disabled?"cursor-auto":"cursor-pointer"])},[y(s("input",{class:d(["checkbox",c.box]),"onUpdate:modelValue":x[0]||(x[0]=S=>h.value=S),disabled:c.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,Fe),[[we,h.value]]),s("span",ze,C(c.title),1),ie(v.$slots,"default",{},void 0,!0)],2))}},ce=M(He,[["__scopeId","data-v-b7a95cdd"]]),Je={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(c){return(p,b)=>(r(),f("button",{class:d(["switch",{"bg-current":c.active}])},[s("span",{class:d(["-mt-0.1em",{"text-white":c.active}])},[ie(p.$slots,"default",{},void 0,!0)],2)],2))}},N=M(Je,[["__scopeId","data-v-8bd1e4e9"]]),Ke={__name:"Inner",props:{value:{type:[Number,String],default:""},list:{type:[Array],default:()=>[]}},setup(c){const p=c,{findData:b}=re(),m=L(()=>b(p.list,p.value)),h=L(()=>p.list.length?p.value!==""&&!m.value:!1),v=L(()=>({"!bg-red-500/50":h.value}));return(x,S)=>{var I;return r(),f("div",{class:d(["inner",v.value])},C((I=m.value)==null?void 0:I.name),3)}}},g=M(Ke,[["__scopeId","data-v-c1544263"]]),D=c=>(Ie("data-v-55d83eec"),c=c(),$e(),c),Oe={class:"side_list"},je={class:"flex"},Qe=["onClick","title"],Xe={class:"chapter_head"},Ye=["disabled"],Ze=["disabled"],et={class:"chapter_log"},tt={class:"chapter_log_tr -lock"},st={class:"mx-1 w-14 self-center"},at=D(()=>s("div",{class:"chapter_log_th xl:ml-0"},"セリフ＆切り替え＆演出",-1)),lt=D(()=>s("div",{class:"ml-3 w-7 shrink-0 xl:hidden"},null,-1)),ot=D(()=>s("div",{class:"chapter_log_tr_2 -lock"},[s("div",{class:"chapter_log_th -col"},"立ち絵1．差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"立ち絵2．差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"SE＆ボイス"),s("div",{class:"chapter_log_th -col"},"備考")],-1)),nt={key:0,class:"contents"},ct=["onDragstart","onDragend"],it={class:"chapter_log_scene"},rt=D(()=>s("div",{class:"chapter_log_switches xl:!hidden"},null,-1)),dt={class:"chapter_log_tr_2"},ut=D(()=>s("div",{class:"chapter_log_td -col"},null,-1)),_t=D(()=>s("div",{class:"chapter_log_td -col"},null,-1)),pt=D(()=>s("div",{class:"chapter_log_td -col"},null,-1)),vt={class:"chapter_log_td -col"},ht={key:1,class:"contents"},gt=["onDragstart","onDragend"],ft={class:"chapter_log_comment"},mt={class:"chapter_log_switches"},bt={class:"chapter_log_tr_2"},wt={class:"chapter_log_td -col"},yt={class:"chapter_log_td -col"},Dt={class:"chapter_log_td -col"},kt={class:"chapter_log_td -col"},Ct={__name:"index",setup(c){const p=ye();U(p);const b=De(),{getCharacter:m}=b,{characterList:h}=U(b),v=ke(),{dialogType:x,newChapter:S,deleteChapter:I,moveChapter:H}=v,{chapterIndex:$,chapterNames:de,chapterLength:J,chapterTarget:K,chapterData:_}=U(v),O=Ce(),{getBackground:ue,getCg:_e,getBgm:xt,getSe:St}=O,{effectList:j,backgroundList:It,cgList:$t,bgmList:Tt,seList:Lt}=U(O),{findData:pe,findIndex:ve}=re(),{dragMove:he,dropMove:ge}=Te(),Q=l=>m(l.人物),fe=(l,t)=>(l==="BG"&&(t=ue(t).name??""),l==="CG"&&(t=t==="結束"?t:_e(t).name??""),t),X=L(()=>_.value.some(l=>l.dragging)),G=L(()=>_.value.filter(l=>l.is_selected).map(l=>l.id)),q=(l,t,u)=>{u&&he(l,{index:t}),G.value.some(i=>_.value[t].id===i)||(_.value[t].is_selected=1),G.value.forEach(i=>{const n=pe(_.value,i);n.dragging=u,u||(n.is_selected=0)})},Y=(l,t)=>{G.value.forEach(u=>{const e=ve(_.value,u);ge(_.value,e,t)})},Z=T(!1),A=T(0),ee=T(null),B=(l,t)=>{A.value=t,ee.value=l,Z.value=t===null},me=({type:l})=>{const t=A.value,u=_.value[t];l==="delete"?u.is_delete=!0:l==="edit"?te(u.id,{}):l==="copy"?_.value.splice(t,0,{...u}):te("add",{type:l})},P=T(!1),k=xe({id:0,type:"",index:0}),te=(l,{type:t})=>{k.id=l,k.type=t??"",k.index=A.value,P.value=!0},be=l=>{const t=A.value===null?_.value.length:k.index+1;_.value.splice(t,0,l)};return(l,t)=>{const u=Se("visible");return r(),V(qe,null,{side_foot:w(()=>[s("button",{class:"chapter_add",onClick:t[0]||(t[0]=(...e)=>o(S)&&o(S)(...e)),title:"新規"},[a(o(le))])]),side:w(()=>[s("ul",Oe,[(r(!0),f(R,null,ae(o(de),(e,i)=>(r(),f("li",je,[a(Ve,{class:"chapter_mark",active:i===o($)},null,8,["active"]),s("button",{class:d(["side_item",{"side_item-active":i===o($)}]),onClick:n=>$.value=i,title:e},C(e),11,Qe)]))),256))])]),main_head:w(()=>[s("header",Xe,[a(Me,{class:"chapter_head_title",value:o(K).title,"onUpdate:value":t[1]||(t[1]=e=>o(K).title=e),placeholder:"タイトル"},null,8,["value"]),s("button",{class:"chapter_head_button",onClick:t[2]||(t[2]=e=>o(H)(-1)),disabled:!o($),title:"上に移動"},[a(ne)],8,Ye),s("button",{class:"chapter_head_button",onClick:t[3]||(t[3]=e=>o(H)(1)),disabled:!o(J)||o($)===o(J)-1,title:"下に移動"},[a(ne,{class:"-scale-y-100"})],8,Ze),s("button",{class:"chapter_head_button",onClick:t[4]||(t[4]=(...e)=>o(I)&&o(I)(...e)),title:"削除"},[a(Le)])])]),default:w(()=>[s("div",et,[s("div",tt,[s("div",st,[a(N,{class:"chapter_plus",title:"新規"},{default:w(()=>[a(o(le),{class:"mt-0.1em"}),a(z,{class:"absolute left-0 top-0 opacity-0",onMore:t[5]||(t[5]=e=>B(e,null)),hasDel:!1,hasAdd:!1})]),_:1})]),at,lt]),ot,a(oe,{class:"chapter_log_dragline",onDrop:t[6]||(t[6]=e=>Y(e,0)),dragging:X.value},null,8,["dragging"]),(r(!0),f(R,null,ae(o(_),(e,i)=>(r(),f(R,{key:e.id},[e.is_showtime?y((r(),f("section",nt,[s("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>q(n,i,!0),onDragend:n=>q(n,i,!1),onDrag:t[7]||(t[7]=E(()=>{},["prevent"])),onDrop:t[8]||(t[8]=E(()=>{},["prevent"]))},[s("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ce,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(z,{class:"chapter_log_control",onMore:n=>B(n,i),hasDel:!1,hasAdd:!1},null,8,["onMore"]),s("div",it,[s("span",null,C(e.人物),1),s("span",null,C(e.show_time),1),s("span",null,C(fe(e.show_time,e.show_name)),1)])],2),rt],42,ct),s("div",dt,[ut,_t,pt,s("div",vt,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[W,!e.is_delete]]):y((r(),f("section",ht,[s("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>q(n,i,!0),onDragend:n=>q(n,i,!1),onDrag:t[9]||(t[9]=E(()=>{},["prevent"])),onDrop:t[10]||(t[10]=E(()=>{},["prevent"]))},[s("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ce,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(z,{class:"chapter_log_control",onMore:n=>B(n,i),onDel:n=>e.is_delete=!0,hasDel:!1,hasAdd:!1},null,8,["onMore","onDel"]),s("div",{class:d(["chapter_log_info",{"flex-row-reverse":Q(e).is_hero,"-replay":e.is_replay}])},[a(Ee,{class:"chapter_log_avatar",name:Q(e).name},null,8,["name"]),s("div",ft,[a(Ae,{class:"chapter_log_dialog",value:e.和訳,type:o(x)(e)},null,8,["value","type"])])],2)],2),s("div",mt,[y((r(),V(N,{class:d(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:w(()=>[F("R")]),_:2},1032,["active","class"])),[[u,e.is_replay]]),y((r(),V(N,{class:d(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未解明"},{default:w(()=>[F("U")]),_:2},1032,["active","class"])),[[u,e.is_unknown]]),y((r(),V(N,{class:d(["chapter_log_switch",{"-monolog":e.is_monolog}]),active:e.is_monolog,title:"独り言"},{default:w(()=>[F("S")]),_:2},1032,["active","class"])),[[u,e.is_monolog]])])],42,gt),s("div",bt,[s("div",wt,[a(g,{class:"col-span-2",value:e.顯示角色,list:o(h)},null,8,["value","list"]),a(g,{value:e.角色差分,list:o(m)(e.顯示角色).sprite},null,8,["value","list"]),a(g,{value:e.差分特效,list:o(j)},null,8,["value","list"])]),s("div",yt,[a(g,{class:"col-span-2",value:e.立ち絵2,list:o(h)},null,8,["value","list"]),a(g,{value:e.十六夜差分,list:o(m)(e.立ち絵2).sprite},null,8,["value","list"]),a(g,{value:e.主角特效,list:o(j)},null,8,["value","list"])]),s("div",Dt,[a(g,{value:e.SE},null,8,["value"]),a(g,{value:e.Voice},null,8,["value"])]),s("div",kt,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[W,!e.is_delete]]),y(a(oe,{class:"chapter_log_dragline",onDrop:n=>Y(n,i+1),dragging:X.value},null,8,["onDrop","dragging"]),[[W,!e.is_delete]])],64))),128))]),a(Be,{positions:ee.value,onClear:B,onUse:me,onlyAdd:Z.value},null,8,["positions","onlyAdd"]),a(Ue,{open:P.value,"onUpdate:open":t[11]||(t[11]=e=>P.value=e),id:k.id,type:k.type,onAdd:be},null,8,["open","id","type"])]),_:1})}}},Rt=M(Ct,[["__scopeId","data-v-55d83eec"]]);export{Rt as default};
