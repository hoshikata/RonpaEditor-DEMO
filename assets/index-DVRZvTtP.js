import{_ as b,o as s,c as l,a as e,w as _,v,F as I,t as f,b as n,u as r,n as R,d as P,s as H,r as x,e as y,f as N,g as F,h as U,i as O,j,k as S,l as W,m as G,p as q}from"./index-DdnuG28l.js";import{I as J}from"./Menu.vue_vue_type_style_index_0_scoped_460a9451_lang-DEuYdNpd.js";import{W as K}from"./Wrap-CALcOQoa.js";import{M as Q,D as X}from"./Dialog-BGjIqQi_.js";import{R as Y}from"./Range-HzD5XHmw.js";const Z={name:"RiShiningFill"},ee={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},te=e("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10z"},null,-1),oe=[te];function ne(t,c,p,w,d,a){return s(),l("svg",ee,oe)}const se=b(Z,[["render",ne]]),le={name:"RiShiningLine"},ie={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},ce=e("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10zm4.803 1A12.044 12.044 0 0 1 12 18.197A12.043 12.043 0 0 1 18.197 12A12.044 12.044 0 0 1 12 5.803A12.044 12.044 0 0 1 5.803 12"},null,-1),ae=[ce];function re(t,c,p,w,d,a){return s(),l("svg",ie,ae)}const de=b(le,[["render",re]]),ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},he=e("path",{fill:"currentColor",d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1m0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1M4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18c-1.84 0-3.28 1.64-2.95 3.54c.21 1.21 1.2 2.2 2.41 2.41c1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),_e=[he];function ve(t,c){return s(),l("svg",ue,[..._e])}const me={name:"ic-round-queue-music",render:ve},ge={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},pe=e("path",{fill:"currentColor",d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"},null,-1),$e=[pe];function we(t,c){return s(),l("svg",ge,[...$e])}const fe={name:"ic-sharp-keyboard-voice",render:we},xe={name:"MaterialSymbolsDeleteOutline"},be={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ce=e("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"},null,-1),ye=[Ce];function ze(t,c,p,w,d,a){return s(),l("svg",be,ye)}const L=b(xe,[["render",ze]]),Me={name:"MaterialSymbolsEditSquareOutline"},Ve={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ie=e("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4t-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"},null,-1),ke=[Ie];function Se(t,c,p,w,d,a){return s(),l("svg",Ve,ke)}const A=b(Me,[["render",Se]]),He={class:"preview_log_head"},Be={class:"shrink-0 font-medium"},Te={class:"truncate text-sm opacity-50"},qe={class:"preview_log_content"},Le={class:"preview_log_foot"},Ae={class:"preview_button ml-auto",title:"編集"},De={class:"preview_log_head group-hover:opacity-75"},Ee={class:"shrink-0 font-medium"},Re={class:"flex flex-col gap-1 truncate text-right text-xs leading-none opacity-50"},Pe={class:"h-1em"},Ne={class:"h-1em"},Fe={class:"preview_log_content group-hover:opacity-75"},Ue={class:"preview_log_foot"},Oe={class:"w-3 text-center text-sm font-medium opacity-50"},je={class:"w-3 text-center text-sm font-medium opacity-50"},We={class:"w-3 text-center text-sm font-medium opacity-50"},Ge={class:"preview_button ml-auto",title:"編集"},Je={__name:"LogItem",props:{id:{type:[Number,String],default:0},log:{type:[Object],default:()=>({})}},emits:["update:id"],setup(t,{emit:c}){const p=c;return(w,d)=>_((s(),l("div",{class:R(["preview_log",{"-active":t.log.id===t.id}])},[t.log.is_showtime?(s(),l(I,{key:0},[e("div",He,[e("h6",Be,f(t.log.人物),1),e("p",Te,f(t.log.show_time),1)]),e("p",qe,f(t.log.show_name),1),e("div",Le,[e("button",Ae,[n(A)]),e("button",{class:"preview_button ml-1",onClick:d[0]||(d[0]=a=>t.log.is_delete=!0),title:"削除"},[n(L)])])],64)):(s(),l(I,{key:1},[e("button",{class:"group contents",onClick:d[1]||(d[1]=a=>p("update:id",t.log.id))},[e("div",De,[e("h6",Ee,f(t.log.人物),1),e("p",Re,[e("span",Pe,f(t.log.十六夜差分),1),e("span",Ne,f(t.log.角色差分),1)])]),e("p",Fe,f(t.log.和訳),1)]),e("div",Ue,[_(e("span",Oe,"R",512),[[v,t.log.is_replay]]),_(e("span",je,"U",512),[[v,t.log.is_unknown]]),_(e("span",We,"S",512),[[v,t.log.is_solo]]),_(n(se,{class:"text-sm opacity-50"},null,512),[[v,t.log.差分特效]]),_(n(de,{class:"text-sm opacity-50"},null,512),[[v,t.log.主角特效]]),_(n(r(me),{class:"text-sm opacity-50"},null,512),[[v,t.log.SE]]),_(n(r(fe),{class:"text-sm opacity-50"},null,512),[[v,t.log.Voice]]),e("button",Ge,[n(A)]),e("button",{class:"preview_button ml-1",onClick:d[2]||(d[2]=a=>t.log.is_delete=!0),title:"削除"},[n(L)])])],64))],2)),[[v,!t.log.is_delete]])}},Ke=b(Je,[["__scopeId","data-v-35fc5d31"]]),Qe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Xe=e("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1),Ye=[Xe];function Ze(t,c){return s(),l("svg",Qe,[...Ye])}const et={name:"ic-baseline-stop",render:Ze},tt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ot=e("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1),nt=[ot];function st(t,c){return s(),l("svg",tt,[...nt])}const lt={name:"ic-baseline-play-arrow",render:st},it={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ct=e("path",{fill:"currentColor",d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"},null,-1),at=[ct];function rt(t,c){return s(),l("svg",it,[...at])}const D={name:"ic-baseline-skip-previous",render:rt},dt={name:"MdiTarget"},ut={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},ht=e("path",{fill:"currentColor",d:"M11 2v2.07A8 8 0 0 0 4.07 11H2v2h2.07A8 8 0 0 0 11 19.93V22h2v-2.07A8 8 0 0 0 19.93 13H22v-2h-2.07A8 8 0 0 0 13 4.07V2m-2 4.08V8h2V6.09c2.5.41 4.5 2.41 4.92 4.91H16v2h1.91c-.41 2.5-2.41 4.5-4.91 4.92V16h-2v1.91C8.5 17.5 6.5 15.5 6.08 13H8v-2H6.09C6.5 8.5 8.5 6.5 11 6.08M12 11a1 1 0 0 0-1 1a1 1 0 0 0 1 1a1 1 0 0 0 1-1a1 1 0 0 0-1-1"},null,-1),_t=[ht];function vt(t,c,p,w,d,a){return s(),l("svg",ut,_t)}const mt=b(dt,[["render",vt]]),gt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},pt=e("path",{fill:"currentColor",d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"},null,-1),$t=[pt];function wt(t,c){return s(),l("svg",gt,[...$t])}const ft={name:"ic-baseline-fullscreen",render:wt},xt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},bt=e("path",{fill:"currentColor",d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"},null,-1),Ct=[bt];function yt(t,c){return s(),l("svg",xt,[...Ct])}const zt={name:"ic-baseline-fullscreen-exit",render:yt},Mt={class:"preview_control"},Vt=["disabled"],It=["disabled"],kt={__name:"Control",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0}},emits:["update:index","target"],setup(t,{emit:c}){const p=t,w=c,d=P(),{fullscreen:a}=H(d),$=x(0);y($,C=>w("update:index",C)),y(()=>p.index,C=>$.value=C,{immediate:!0});const m=x(!1),M=()=>{m.value&&setTimeout(()=>{m.value&&($.value+=1,M())},1e3)};return y(m,M),x(null),(C,o)=>(s(),l("div",Mt,[_(e("button",{class:"preview_button",onClick:o[0]||(o[0]=g=>w("target")),title:"今のセリフへ"},[n(mt)],512),[[v,!r(a)]]),e("button",{class:"preview_button",onClick:o[1]||(o[1]=g=>$.value-=1),disabled:$.value===0,title:"前へ"},[n(r(D))],8,Vt),e("button",{class:"preview_button",onClick:o[2]||(o[2]=g=>m.value=!m.value),title:"プレイ"},[_(n(r(lt),null,null,512),[[v,!m.value]]),_(n(r(et),null,null,512),[[v,m.value]])]),e("button",{class:"preview_button",onClick:o[3]||(o[3]=g=>$.value+=1),disabled:$.value===t.length,title:"次へ"},[n(r(D),{class:"-scale-x-100"})],8,It),n(Y,{class:"mx-3 grow !bg-dark-text",value:$.value,"onUpdate:value":o[4]||(o[4]=g=>$.value=g),onChange:o[5]||(o[5]=g=>m.value=!1),min:0,max:t.length,step:1},null,8,["value","max"]),e("button",{class:"preview_button",onClick:o[6]||(o[6]=g=>a.value=!r(a)),title:"全画面モード"},[_(n(r(ft),null,null,512),[[v,!r(a)]]),_(n(r(zt),null,null,512),[[v,r(a)]])])]))}},St=b(kt,[["__scopeId","data-v-2fb2344d"]]),Ht={class:"preview_title"},Bt=["value"],Tt=["data-id"],qt={class:"preview_container",ref:"preview"},Lt={class:"preview"},At={class:"preview_dialog"},Dt={__name:"index",setup(t){const c=N();H(c);const p=F(),{newChapter:w,dialogType:d}=p,{chapterIndex:a,chapterNames:$,chapterData:m}=H(p),{getClientRect:M}=U(),C=x(null),o=x(0),g=x(0),V=O(()=>m.value.filter(u=>!u.is_delete&&!u.is_showtime)),k=x({});y(V,u=>{var i;return o.value=((i=u[0])==null?void 0:i.id)??0}),y(o,u=>{const i=m.value.find(h=>h.id===u)??{};i.is_showtime||(k.value=i,g.value=V.value.findIndex(h=>h.id===i.id))}),y(g,u=>{var i;return o.value=((i=V.value[u])==null?void 0:i.id)??0});const E=()=>{const u=[...C.value].find(z=>z.dataset.id*1===o.value);if(!u)return;const{height:i,top:h}=M(u);u.parentElement.scrollBy({top:h-i,behavior:"smooth"})},B=x(null),T=u=>B.value=u;return(u,i)=>(s(),j(K,{class:"flex-row-reverse",main:"!p-0",side:"!p-0 border-4 border-transparent"},{side_head:S(()=>[n(Q,{positions:B.value,onClear:T,onlyAdd:!0},null,8,["positions"]),e("div",Ht,[_(e("select",{class:"preview_title_select","onUpdate:modelValue":i[0]||(i[0]=h=>G(a)?a.value=h:null)},[(s(!0),l(I,null,q(r($),(h,z)=>(s(),l("option",{value:z},f(h),9,Bt))),256))],512),[[W,r(a)]]),e("button",{class:"preview_button",onClick:T},[n(r(J))])])]),side:S(()=>[(s(!0),l(I,null,q(r(m),h=>(s(),l("div",{key:h.id,"data-id":h.id,ref_for:!0,ref_key:"logElem",ref:C},[n(Ke,{id:o.value,"onUpdate:id":i[1]||(i[1]=z=>o.value=z),log:h},null,8,["id","log"])],8,Tt))),128))]),default:S(()=>[e("div",qt,[e("div",Lt,[e("div",At,[n(X,{value:k.value.和訳,type:r(d)(k.value)},null,8,["value","type"])])]),n(St,{index:g.value,"onUpdate:index":i[2]||(i[2]=h=>g.value=h),length:V.value.length-1,onTarget:E},null,8,["index","length"])],512)]),_:1}))}},Ut=b(Dt,[["__scopeId","data-v-4dfa19cc"]]);export{Ut as default};
