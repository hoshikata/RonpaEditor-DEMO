import{_ as q,o as i,c as m,a as t,r as T,f as ee,w as y,E as he,n as d,t as x,G as ne,l as ce,h as M,e as ge,s as R,u as me,g as fe,A as be,p as we,x as B,B as w,b as a,d as l,q as te,F as W,v as z,H as E,z as F,I as ye,J as De,K as ke}from"./index-SMKVIrGu.js";import{a as se,I as xe}from"./IconDelete-TO_dbRsd.js";import{_ as Ce}from"./Input-BqRows6N.js";import{W as Se}from"./Wrap-BgvsxfsE.js";import{C as G,D as ae}from"./DropLine-BQow_nhe.js";import{D as Ie,M as $e,E as Te}from"./Dialog-btx7QIRd.js";import{M as Me}from"./Mark-CWnovkZ9.js";import{A as qe}from"./Avatar-CEy3yUhI.js";/* empty css                                                             */import"./Image-COFTwgKG.js";const Ae={name:"MaterialSymbolsArrowWarmUpRounded"},Le={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ue=t("path",{fill:"currentColor",d:"M12 13q-.425 0-.712-.288T11 12V5.825L7.1 9.7q-.275.275-.687.288T5.7 9.7q-.275-.275-.275-.7t.275-.7l5.6-5.6q.15-.15.325-.212T12 2.425t.375.063t.325.212l5.6 5.6q.275.275.275.688T18.3 9.7q-.3.3-.712.3t-.713-.3L13 5.825V12q0 .425-.288.713T12 13m0 5q-.425 0-.712-.288T11 17v-1q0-.425.288-.712T12 15t.713.288T13 16v1q0 .425-.288.713T12 18m0 4q-.425 0-.712-.288T11 21t.288-.712T12 20t.713.288T13 21t-.288.713T12 22"},null,-1),Be=[Ue];function Ee(c,p,b,f,h,v){return i(),m("svg",Le,Be)}const le=q(Ae,[["render",Ee]]),Ve=["disabled"],Ne={class:"whitespace-nowrap"},Pe={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(c,{emit:p}){const b=c,f=p,h=T(0);return ee(h,v=>f("update:value",v)),ee(()=>b.value,v=>h.value=v,{immediate:!0}),(v,C)=>(i(),m("label",{class:d(["inline-flex items-center",c.disabled?"cursor-auto":"cursor-pointer"])},[y(t("input",{class:d(["checkbox",c.box]),"onUpdate:modelValue":C[0]||(C[0]=S=>h.value=S),disabled:c.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,Ve),[[he,h.value]]),t("span",Ne,x(c.title),1),ne(v.$slots,"default",{},void 0,!0)],2))}},oe=q(Pe,[["__scopeId","data-v-b7a95cdd"]]),Re={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(c){return(p,b)=>(i(),m("button",{class:d(["switch",{"bg-current":c.active}])},[t("span",{class:d(["-mt-0.1em",{"text-white":c.active}])},[ne(p.$slots,"default",{},void 0,!0)],2)],2))}},V=q(Re,[["__scopeId","data-v-8bd1e4e9"]]),We={__name:"Inner",props:{value:{type:[Number,String],default:""},list:{type:[Array],default:()=>[]}},setup(c){const p=c,{findData:b}=ce(),f=M(()=>b(p.list,p.value)),h=M(()=>p.list.length?p.value!==""&&!f.value:!1),v=M(()=>({"!bg-red-500/50":h.value}));return(C,S)=>{var I;return i(),m("div",{class:d(["inner",v.value])},x((I=f.value)==null?void 0:I.name),3)}}},g=q(We,[["__scopeId","data-v-c1544263"]]),D=c=>(ye("data-v-67bc1ed4"),c=c(),De(),c),ze={class:"side_list"},Fe={class:"flex"},Ge=["onClick","title"],He={class:"chapter_head"},Je=["disabled"],Ke=["disabled"],Oe={class:"chapter_log"},je={class:"chapter_log_tr -lock"},Qe={class:"mx-1 w-14 self-center"},Xe=D(()=>t("div",{class:"chapter_log_th xl:ml-0"},"セリフ＆切り替え＆演出",-1)),Ye=D(()=>t("div",{class:"ml-3 w-7 shrink-0 xl:hidden"},null,-1)),Ze=D(()=>t("div",{class:"chapter_log_tr_2 -lock"},[t("div",{class:"chapter_log_th -col"},"立ち絵1．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"立ち絵2．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"SE＆ボイス"),t("div",{class:"chapter_log_th -col"},"備考")],-1)),et={key:0,class:"contents"},tt=["onDragstart","onDragend"],st={class:"chapter_log_scene"},at=D(()=>t("div",{class:"chapter_log_switches xl:!hidden"},null,-1)),lt={class:"chapter_log_tr_2"},ot=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),nt=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),ct=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),rt={class:"chapter_log_td -col"},it={key:1,class:"contents"},dt=["onDragstart","onDragend"],_t={class:"chapter_log_comment"},ut={class:"chapter_log_switches"},pt={class:"chapter_log_tr_2"},vt={class:"chapter_log_td -col"},ht={class:"chapter_log_td -col"},gt={class:"chapter_log_td -col"},mt={class:"chapter_log_td -col"},ft={__name:"index",setup(c){const p=ge();R(p);const b=me(),{getCharacter:f}=b,{characterList:h}=R(b),v=fe(),{dialogType:C,newChapter:S,deleteChapter:I,moveChapter:H}=v,{chapterIndex:$,chapterNames:re,chapterLength:J,chapterTarget:K,chapterData:u}=R(v),{findData:ie,findIndex:de}=ce(),{dragMove:_e,dropMove:ue}=ke(),O=o=>f(o.人物),j=M(()=>u.value.some(o=>o.dragging)),N=M(()=>u.value.filter(o=>o.is_selected).map(o=>o.id)),A=(o,s,_)=>{_&&_e(o,{index:s}),N.value.some(r=>u.value[s].id===r)||(u.value[s].is_selected=1),N.value.forEach(r=>{const n=ie(u.value,r);n.dragging=_,_||(n.is_selected=0)})},Q=(o,s)=>{N.value.forEach(_=>{const e=de(u.value,_);ue(u.value,e,s)})},X=T(!1),L=T(0),Y=T(null),U=(o,s)=>{L.value=s,Y.value=o,X.value=s===null},pe=({type:o})=>{const s=L.value,_=u.value[s];o==="delete"?_.is_delete=!0:o==="edit"?Z(_.id,{}):o==="copy"?u.value.splice(s,0,{..._}):Z("add",{type:o})},P=T(!1),k=be({id:0,type:"",index:0}),Z=(o,{type:s})=>{k.id=o,k.type=s??"",k.index=L.value,P.value=!0},ve=o=>{const s=L.value===null?u.value.length:k.index+1;u.value.splice(s,0,o)};return(o,s)=>{const _=we("visible");return i(),B(Se,null,{side_foot:w(()=>[t("button",{class:"chapter_add",onClick:s[0]||(s[0]=(...e)=>l(S)&&l(S)(...e)),title:"新規"},[a(l(se))])]),side:w(()=>[t("ul",ze,[(i(!0),m(W,null,te(l(re),(e,r)=>(i(),m("li",Fe,[a(Me,{class:"chapter_mark",active:r===l($)},null,8,["active"]),t("button",{class:d(["side_item",{"side_item-active":r===l($)}]),onClick:n=>$.value=r,title:e},x(e),11,Ge)]))),256))])]),main_head:w(()=>[t("header",He,[a(Ce,{class:"chapter_head_title",value:l(K).title,"onUpdate:value":s[1]||(s[1]=e=>l(K).title=e),placeholder:"タイトル"},null,8,["value"]),t("button",{class:"chapter_head_button",onClick:s[2]||(s[2]=e=>l(H)(-1)),disabled:!l($),title:"上に移動"},[a(le)],8,Je),t("button",{class:"chapter_head_button",onClick:s[3]||(s[3]=e=>l(H)(1)),disabled:!l(J)||l($)===l(J)-1,title:"下に移動"},[a(le,{class:"-scale-y-100"})],8,Ke),t("button",{class:"chapter_head_button",onClick:s[4]||(s[4]=(...e)=>l(I)&&l(I)(...e)),title:"削除"},[a(xe)])])]),default:w(()=>[t("div",Oe,[t("div",je,[t("div",Qe,[a(V,{class:"chapter_plus",title:"新規"},{default:w(()=>[a(l(se),{class:"mt-0.1em"}),a(G,{class:"absolute left-0 top-0 opacity-0",onMore:s[5]||(s[5]=e=>U(e,null)),hasDel:!1,hasAdd:!1})]),_:1})]),Xe,Ye]),Ze,a(ae,{class:"chapter_log_dragline",onDrop:s[6]||(s[6]=e=>Q(e,0)),dragging:j.value},null,8,["dragging"]),(i(!0),m(W,null,te(l(u),(e,r)=>(i(),m(W,{key:e.id},[e.is_showtime?y((i(),m("section",et,[t("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>A(n,r,!0),onDragend:n=>A(n,r,!1),onDrag:s[7]||(s[7]=E(()=>{},["prevent"])),onDrop:s[8]||(s[8]=E(()=>{},["prevent"]))},[t("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(oe,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(G,{class:"chapter_log_control",onMore:n=>U(n,r),hasDel:!1,hasAdd:!1},null,8,["onMore"]),t("div",st,[t("span",null,x(e.人物),1),t("span",null,x(e.show_time),1),t("span",null,x(e.show_name),1)])],2),at],42,tt),t("div",lt,[ot,nt,ct,t("div",rt,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[z,!e.is_delete]]):y((i(),m("section",it,[t("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>A(n,r,!0),onDragend:n=>A(n,r,!1),onDrag:s[9]||(s[9]=E(()=>{},["prevent"])),onDrop:s[10]||(s[10]=E(()=>{},["prevent"]))},[t("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(oe,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(G,{class:"chapter_log_control",onMore:n=>U(n,r),onDel:n=>e.is_delete=!0,hasDel:!1,hasAdd:!1},null,8,["onMore","onDel"]),t("div",{class:d(["chapter_log_info",{"flex-row-reverse":O(e).is_hero,"-replay":e.is_replay}])},[a(qe,{class:"chapter_log_avatar",name:O(e).name},null,8,["name"]),t("div",_t,[a(Ie,{class:"chapter_log_dialog",value:e.和訳,type:l(C)(e)},null,8,["value","type"])])],2)],2),t("div",ut,[y((i(),B(V,{class:d(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:w(()=>[F("R")]),_:2},1032,["active","class"])),[[_,e.is_replay]]),y((i(),B(V,{class:d(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未解明"},{default:w(()=>[F("U")]),_:2},1032,["active","class"])),[[_,e.is_unknown]]),y((i(),B(V,{class:d(["chapter_log_switch",{"-monolog":e.is_monolog}]),active:e.is_monolog,title:"独り言"},{default:w(()=>[F("S")]),_:2},1032,["active","class"])),[[_,e.is_monolog]])])],42,dt),t("div",pt,[t("div",vt,[a(g,{class:"col-span-2",value:e.顯示角色,list:l(h)},null,8,["value","list"]),a(g,{value:e.角色差分,list:l(f)(e.顯示角色).sprite},null,8,["value","list"]),a(g,{value:e.差分特效},null,8,["value"])]),t("div",ht,[a(g,{class:"col-span-2",value:e.立ち絵2,list:l(h)},null,8,["value","list"]),a(g,{value:e.十六夜差分,list:l(f)(e.立ち絵2).sprite},null,8,["value","list"]),a(g,{value:e.主角特效},null,8,["value"])]),t("div",gt,[a(g,{value:e.SE},null,8,["value"]),a(g,{value:e.Voice},null,8,["value"])]),t("div",mt,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[z,!e.is_delete]]),y(a(ae,{class:"chapter_log_dragline",onDrop:n=>Q(n,r+1),dragging:j.value},null,8,["onDrop","dragging"]),[[z,!e.is_delete]])],64))),128))]),a($e,{positions:Y.value,onClear:U,onUse:pe,onlyAdd:X.value},null,8,["positions","onlyAdd"]),a(Te,{open:P.value,"onUpdate:open":s[11]||(s[11]=e=>P.value=e),id:k.id,type:k.type,onAdd:ve},null,8,["open","id","type"])]),_:1})}}},Tt=q(ft,[["__scopeId","data-v-67bc1ed4"]]);export{Tt as default};
