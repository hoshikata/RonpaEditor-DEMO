import{_ as T,o as d,c as v,a as t,r as $,e as Q,w as b,E as he,n as p,t as i,G as ae,y as oe,g as I,m as le,b as l,h as ve,z as E,d as ge,s as X,f as me,k as fe,A as be,q as L,B as y,u as n,p as Y,F as z,v as R,H as U,I as we,J as ye}from"./index-BA0hwjmF.js";import{a as Z,I as De}from"./IconDelete-DaMGOccu.js";import{_ as ke,D as Ce,M as xe,E as Se}from"./Dialog-TVy085ez.js";import{W as $e}from"./Wrap-DT2j-D5u.js";import{C as W,D as ee,u as Ie}from"./useDrag-CDbfFX-l.js";import{M as Te}from"./Mark-WrpWr3Ey.js";import{_ as Me}from"./Image-D9VCuOiC.js";const qe={name:"MaterialSymbolsArrowWarmUpRounded"},Ae={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Le=t("path",{fill:"currentColor",d:"M12 13q-.425 0-.712-.288T11 12V5.825L7.1 9.7q-.275.275-.687.288T5.7 9.7q-.275-.275-.275-.7t.275-.7l5.6-5.6q.15-.15.325-.212T12 2.425t.375.063t.325.212l5.6 5.6q.275.275.275.688T18.3 9.7q-.3.3-.712.3t-.713-.3L13 5.825V12q0 .425-.288.713T12 13m0 5q-.425 0-.712-.288T11 17v-1q0-.425.288-.712T12 15t.713.288T13 16v1q0 .425-.288.713T12 18m0 4q-.425 0-.712-.288T11 21t.288-.712T12 20t.713.288T13 21t-.288.713T12 22"},null,-1),Ue=[Le];function Be(c,m,D,C,_,g){return d(),v("svg",Ae,Ue)}const te=T(qe,[["render",Be]]),Ee=["disabled"],Ve={class:"whitespace-nowrap"},Ne={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(c,{emit:m}){const D=c,C=m,_=$(0);return Q(_,g=>C("update:value",g)),Q(()=>D.value,g=>_.value=g,{immediate:!0}),(g,f)=>(d(),v("label",{class:p(["inline-flex items-center",c.disabled?"cursor-auto":"cursor-pointer"])},[b(t("input",{class:p(["checkbox",c.box]),"onUpdate:modelValue":f[0]||(f[0]=S=>_.value=S),disabled:c.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,Ee),[[he,_.value]]),t("span",Ve,i(c.title),1),ae(g.$slots,"default",{},void 0,!0)],2))}},se=T(Ne,[["__scopeId","data-v-b7a95cdd"]]),Pe={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(c){return(m,D)=>(d(),v("button",{class:p(["switch",{"bg-current":c.active}])},[t("span",{class:p(["-mt-0.1em",{"text-white":c.active}])},[ae(m.$slots,"default",{},void 0,!0)],2)],2))}},B=T(Pe,[["__scopeId","data-v-8bd1e4e9"]]),ze={class:"avatar"},Re={__name:"Avatar",props:{name:{type:[String],default:""}},setup(c){const m=c,D=oe(),{getCharacter:C}=D,_=I(()=>C(m.name)),g=I(()=>m.name.replaceAll(/\s|=|＝|‧|・/g,`
`)),f=I(()=>_.value.image_head||_.value.default_head);return(S,V)=>{const w=le("visible");return d(),v("div",ze,[b(l(Me,{src:f.value},null,8,["src"]),[[w,f.value]]),b((d(),v("div",{class:"avatar_text",style:ve({color:_.value.name_text,"background-color":_.value.name_bg})},[E(i(g.value),1)],4)),[[w,!f.value]])])}}},We=T(Re,[["__scopeId","data-v-a670e591"]]),k=c=>(we("data-v-7355647f"),c=c(),ye(),c),Fe={class:"side_list"},Ge={class:"flex"},He=["onClick","title"],Je={class:"chapter_head"},Oe=["disabled"],je=["disabled"],Ke={class:"chapter_log"},Qe={class:"chapter_log_tr -lock"},Xe={class:"mx-1 w-14 self-center"},Ye=k(()=>t("div",{class:"chapter_log_th xl:ml-0"},"セリフ＆切り替え＆演出",-1)),Ze=k(()=>t("div",{class:"ml-3 w-7 shrink-0 xl:hidden"},null,-1)),et=k(()=>t("div",{class:"chapter_log_tr_2 -lock"},[t("div",{class:"chapter_log_th -col"},"立ち絵1．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"立ち絵2．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"SE＆ボイス"),t("div",{class:"chapter_log_th -col"},"備考")],-1)),tt={key:0,class:"contents"},st=["onDragstart","onDragend"],at={class:"chapter_log_scene"},ot=k(()=>t("div",{class:"chapter_log_switches xl:!hidden"},null,-1)),lt={class:"chapter_log_tr_2"},nt=k(()=>t("div",{class:"chapter_log_td -col"},null,-1)),ct=k(()=>t("div",{class:"chapter_log_td -col"},null,-1)),it=k(()=>t("div",{class:"chapter_log_td -col"},null,-1)),rt={class:"chapter_log_td -col"},dt={class:"-inner"},_t={key:1,class:"contents"},ut=["onDragstart","onDragend"],pt={class:"chapter_log_comment"},ht={class:"chapter_log_switches"},vt={class:"chapter_log_tr_2"},gt={class:"chapter_log_td -col"},mt={class:"-inner col-span-2"},ft={class:"-inner"},bt={class:"-inner"},wt={class:"chapter_log_td -col"},yt={class:"-inner col-span-2"},Dt={class:"-inner"},kt={class:"-inner"},Ct={class:"chapter_log_td -col"},xt={class:"-inner"},St={class:"-inner"},$t={class:"chapter_log_td -col"},It={class:"-inner"},Tt={__name:"Chapters",setup(c){const m=ge();X(m);const D=oe(),{getCharacter:C}=D,_=me(),{dialogType:g,newChapter:f,deleteChapter:S,moveChapter:V}=_,{chapterIndex:w,chapterNames:ne,chapterLength:F,chapterTarget:G,chapterData:h}=X(_),{findData:ce,findIndex:ie}=fe(),{dragMove:re,dropMove:de}=Ie(),_e=a=>C(a.人物),H=I(()=>h.value.some(a=>a.dragging)),N=I(()=>h.value.filter(a=>a.is_selected).map(a=>a.id)),M=(a,s,u)=>{u&&re(a,{index:s}),N.value.some(r=>h.value[s].id===r)||(h.value[s].is_selected=1),N.value.forEach(r=>{const o=ce(h.value,r);o.dragging=u,u||(o.is_selected=0)})},J=(a,s)=>{N.value.forEach(u=>{const e=ie(h.value,u);de(h.value,e,s)})},O=$(!1),q=$(0),j=$(null),A=(a,s)=>{q.value=s,j.value=a,O.value=s===null},ue=({type:a})=>{const s=q.value,u=h.value[s];a==="delete"?u.is_delete=!0:a==="edit"?K(u.id,{}):a==="copy"?h.value.splice(s,0,{...u}):K("add",{type:a})},P=$(!1),x=be({id:0,type:"",index:0}),K=(a,{type:s})=>{x.id=a,x.type=s??"",x.index=q.value,P.value=!0},pe=a=>{const s=q.value===null?h.value.length:x.index+1;h.value.splice(s,0,a)};return(a,s)=>{const u=le("visible");return d(),L($e,null,{side_foot:y(()=>[t("button",{class:"chapter_add",onClick:s[0]||(s[0]=(...e)=>n(f)&&n(f)(...e)),title:"新規"},[l(n(Z))])]),side:y(()=>[t("ul",Fe,[(d(!0),v(z,null,Y(n(ne),(e,r)=>(d(),v("li",Ge,[l(Te,{class:"chapter_mark",active:r===n(w)},null,8,["active"]),t("button",{class:p(["side_item",{"side_item-active":r===n(w)}]),onClick:o=>w.value=r,title:e},i(e),11,He)]))),256))])]),main_head:y(()=>[t("header",Je,[l(ke,{class:"chapter_head_title",value:n(G).title,"onUpdate:value":s[1]||(s[1]=e=>n(G).title=e),placeholder:"タイトル"},null,8,["value"]),t("button",{class:"chapter_head_button",onClick:s[2]||(s[2]=e=>n(V)(-1)),disabled:!n(w),title:"上に移動"},[l(te)],8,Oe),t("button",{class:"chapter_head_button",onClick:s[3]||(s[3]=e=>n(V)(1)),disabled:!n(F)||n(w)===n(F)-1,title:"下に移動"},[l(te,{class:"-scale-y-100"})],8,je),t("button",{class:"chapter_head_button",onClick:s[4]||(s[4]=(...e)=>n(S)&&n(S)(...e)),title:"削除"},[l(De)])])]),default:y(()=>[t("div",Ke,[t("div",Qe,[t("div",Xe,[l(B,{class:"chapter_plus",title:"新規"},{default:y(()=>[l(n(Z),{class:"mt-0.1em"}),l(W,{class:"absolute left-0 top-0 opacity-0",onMore:s[5]||(s[5]=e=>A(e,null)),hasDel:!1,hasAdd:!1})]),_:1})]),Ye,Ze]),et,l(ee,{class:"chapter_log_dragline",onDrop:s[6]||(s[6]=e=>J(e,0)),dragging:H.value},null,8,["dragging"]),(d(!0),v(z,null,Y(n(h),(e,r)=>(d(),v(z,{key:e.id},[e.is_showtime?b((d(),v("section",tt,[t("div",{class:p(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:o=>M(o,r,!0),onDragend:o=>M(o,r,!1),onDrag:s[7]||(s[7]=U(()=>{},["prevent"])),onDrop:s[8]||(s[8]=U(()=>{},["prevent"]))},[t("div",{class:p(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[l(se,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":o=>e.is_selected=o},null,8,["value","onUpdate:value"]),l(W,{class:"chapter_log_control",onMore:o=>A(o,r),hasDel:!1,hasAdd:!1},null,8,["onMore"]),t("div",at,[t("span",null,i(e.人物),1),t("span",null,i(e.show_time),1),t("span",null,i(e.show_name),1)])],2),ot],42,st),t("div",lt,[nt,ct,it,t("div",rt,[t("div",dt,i(e.備註),1)])])],512)),[[R,!e.is_delete]]):b((d(),v("section",_t,[t("div",{class:p(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:o=>M(o,r,!0),onDragend:o=>M(o,r,!1),onDrag:s[9]||(s[9]=U(()=>{},["prevent"])),onDrop:s[10]||(s[10]=U(()=>{},["prevent"]))},[t("div",{class:p(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[l(se,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":o=>e.is_selected=o},null,8,["value","onUpdate:value"]),l(W,{class:"chapter_log_control",onMore:o=>A(o,r),onDel:o=>e.is_delete=!0,hasDel:!1,hasAdd:!1},null,8,["onMore","onDel"]),t("div",{class:p(["chapter_log_info",{"flex-row-reverse":_e(e).is_hero,"-replay":e.is_replay}])},[l(We,{class:"chapter_log_avatar",name:e.人物},null,8,["name"]),t("div",pt,[l(Ce,{class:"chapter_log_dialog",value:e.和訳,type:n(g)(e)},null,8,["value","type"])])],2)],2),t("div",ht,[b((d(),L(B,{class:p(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:y(()=>[E("R")]),_:2},1032,["active","class"])),[[u,e.is_replay]]),b((d(),L(B,{class:p(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未解明"},{default:y(()=>[E("U")]),_:2},1032,["active","class"])),[[u,e.is_unknown]]),b((d(),L(B,{class:p(["chapter_log_switch",{"-monolog":e.is_monolog}]),active:e.is_monolog,title:"独り言"},{default:y(()=>[E("S")]),_:2},1032,["active","class"])),[[u,e.is_monolog]])])],42,ut),t("div",vt,[t("div",gt,[t("div",mt,i(e.顯示角色),1),t("div",ft,i(e.角色差分),1),t("div",bt,i(e.差分特效),1)]),t("div",wt,[t("div",yt,i(e.立ち絵2),1),t("div",Dt,i(e.十六夜差分),1),t("div",kt,i(e.主角特效),1)]),t("div",Ct,[t("div",xt,i(e.SE),1),t("div",St,i(e.Voice),1)]),t("div",$t,[t("div",It,i(e.備註),1)])])],512)),[[R,!e.is_delete]]),b(l(ee,{class:"chapter_log_dragline",onDrop:o=>J(o,r+1),dragging:H.value},null,8,["onDrop","dragging"]),[[R,!e.is_delete]])],64))),128))]),l(xe,{positions:j.value,onClear:A,onUse:ue,onlyAdd:O.value},null,8,["positions","onlyAdd"]),l(Se,{open:P.value,"onUpdate:open":s[11]||(s[11]=e=>P.value=e),id:x.id,type:x.type,onAdd:pe},null,8,["open","id","type"])]),_:1})}}},Vt=T(Tt,[["__scopeId","data-v-7355647f"]]);export{Vt as default};
