import{o as _,c as u,a as t,_ as L,u as N,s as H,i as A,h as D,q as E,e as g,y as T,F as k,m as j,d as n,t as i,w as d,v as q,n as U,l as b,P as p,E as w,M as P,N as R,I as G}from"./index-KCNCY3mu.js";import{U as B}from"./Upload-Ce91b9E3.js";import{_ as J}from"./Image-qa4RBVjT.js";import{C as K}from"./Control-KF390FK2.js";/* empty css                                                             */import{D as C}from"./IconDelete-D526KsXi.js";import{H as O}from"./Header-Crtkibft.js";import"./round-drag-indicator-DyUHpdXD.js";const Q={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},W=t("path",{fill:"currentColor",d:"m12 17.27l4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72l3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41l-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18l-1.1 4.72c-.2.86.73 1.54 1.49 1.08z"},null,-1),X=[W];function Y(v,f){return _(),u("svg",Q,[...X])}const Z={name:"ic-round-star",render:Y},F=v=>(P("data-v-8d1d2c43"),v=v(),R(),v),ee={class:"setting_wrap"},se=F(()=>t("div",null,null,-1)),te={class:"setting_head"},ne={class:"setting_title"},oe={class:"setting_desc"},le={class:"setting_desc highlight"},ae={class:"setting_head col-span-2"},ie={class:"setting_title"},de={class:"setting_desc"},_e={class:"setting_head"},ue={class:"setting_title"},ge={class:"setting_desc"},me={class:"setting_desc"},re=["draggable","onDragstart","onDragend"],pe={class:"setting_avatar"},ve=["onClick","title"],ce={class:"setting_detail",draggable:"false"},be=["value","disabled","onFocus","onBlur"],fe=["onUpdate:modelValue","disabled","onFocus","onBlur"],he={class:"setting_col"},ye={class:"ml-0.5"},$e=["onUpdate:modelValue","onFocus","onBlur"],De=["onUpdate:modelValue"],ke={class:"setting_detail"},Ue=["value","disabled","onFocus","onBlur"],we=["onUpdate:modelValue","disabled","onFocus","onBlur"],Be={class:"setting_col"},Ce={class:"ml-0.5"},Fe=["onUpdate:modelValue","onFocus","onBlur"],Ve=["onUpdate:modelValue"],xe=F(()=>t("div",{class:"col-span-5 mb-4"},null,-1)),ze={__name:"Character",setup(v){const f=N(),{characterList:m,characterNew:V}=H(f),{dragMove:x,dropMove:z}=G(),{t:o}=A("lang"),S=D(()=>m.value.some(l=>l.is_hero)),I=l=>m.value.splice(l+1,0,{...V.value}),M=l=>m.value.splice(l,1),h=D(()=>m.value.some(l=>l.dragging)),y=(l,a,r)=>{r&&x(l,{index:a}),m.value[a].dragging=r},$=(l,a)=>z(m.value,l.index,a);return(l,a)=>{const r=E("visible");return _(),u("div",ee,[g(O,{col:"col-span-5"},{default:T(()=>[se,t("div",te,[t("h2",ne,i(n(o)("character.icon")),1),t("p",oe,i(n(o)("character.in-game")),1),t("p",le,"â˜… = "+i(n(o)("edit.hero")),1)]),t("div",ae,[t("h2",ie,i(n(o)("character.name")),1),t("p",de,i(n(o)("character.in-excel")),1)]),t("div",_e,[t("h2",ue,i(n(o)("character.name-tag")),1),t("p",ge,i(n(o)("character.in-game")),1),t("p",me,i(n(o)("character.if-no-name")),1)])]),_:1}),g(C,{class:"setting_dragline",onDrop:a[0]||(a[0]=e=>$(e,0)),dragging:h.value},null,8,["dragging"]),(_(!0),u(k,null,j(n(m),(e,c)=>(_(),u(k,{key:e.id},[t("section",{class:U(["setting_container",{dragging:e.dragging}]),draggable:e.is_drag,onDragstart:s=>y(s,c,!0),onDragend:s=>y(s,c,!1),onDrag:a[1]||(a[1]=w(()=>{},["prevent"])),onDrop:a[2]||(a[2]=w(()=>{},["prevent"]))},[g(K,{class:"row-span-2 -mr-6",hasDel:!e.disabled,onAdd:s=>I(c),onDel:s=>M(c)},null,8,["hasDel","onAdd","onDel"]),t("div",pe,[d(g(J,{class:"setting_avatar_img",src:e.default_head,alt:e.name},null,8,["src","alt"]),[[r,e.disabled&&!e.image_head]]),g(B,{class:"size-full",value:e.image_head,"onUpdate:value":s=>e.image_head=s,type:"cover"},null,8,["value","onUpdate:value"]),d((_(),u("button",{class:U(["setting_star",{"setting_star-active":e.is_hero}]),onClick:s=>e.is_hero=!e.is_hero,title:n(o)("edit.hero")},[g(n(Z))],10,ve)),[[r,!(S.value&&!e.is_hero)],[q,!e.disabled]])]),t("div",ce,[e.disabled&&!e.unknown?(_(),u("input",{key:0,class:"setting_name last",value:n(o)(`showtime.${e.name}`),style:b({"--name-bg":e.name_bg,"--name-text":e.name_text}),disabled:e.disabled,onFocus:s=>e.is_drag=!1,onBlur:s=>e.is_drag=!0},null,44,be)):d((_(),u("input",{key:1,class:"setting_name last","onUpdate:modelValue":s=>e.name=s,style:b({"--name-bg":e.name_bg,"--name-text":e.name_text}),disabled:e.disabled,onFocus:s=>e.is_drag=!1,onBlur:s=>e.is_drag=!0},null,44,fe)),[[p,e.name,void 0,{lazy:!0,trim:!0}]]),t("div",he,[t("p",ye,i(n(o)("character.name-color")),1),d(t("input",{class:"setting_input","onUpdate:modelValue":s=>e.name_text=s,onFocus:s=>e.is_drag=!1,onBlur:s=>e.is_drag=!0},null,40,$e),[[p,e.name_text,void 0,{lazy:!0,trim:!0}]]),t("label",{class:"setting_color",style:b({"background-color":e.name_text})},[d(t("input",{class:"hidden","onUpdate:modelValue":s=>e.name_text=s,type:"color"},null,8,De),[[p,e.name_text,void 0,{lazy:!0}]])],4)])]),t("div",ke,[e.disabled&&!e.unknown?(_(),u("input",{key:0,class:"setting_name first",value:n(o)(`showtime.${e.name}`),disabled:e.disabled,onFocus:s=>e.is_drag=!1,onBlur:s=>e.is_drag=!0},null,40,Ue)):d((_(),u("input",{key:1,class:"setting_name first","onUpdate:modelValue":s=>e.katakana=s,disabled:e.disabled,onFocus:s=>e.is_drag=!1,onBlur:s=>e.is_drag=!0},null,40,we)),[[p,e.katakana,void 0,{lazy:!0,trim:!0}]]),t("div",Be,[t("p",Ce,i(n(o)("character.name-bg")),1),d(t("input",{class:"setting_input","onUpdate:modelValue":s=>e.name_bg=s,onFocus:s=>e.is_drag=!1,onBlur:s=>e.is_drag=!0},null,40,Fe),[[p,e.name_bg,void 0,{lazy:!0,trim:!0}]]),t("label",{class:"setting_color",style:b({"background-color":e.name_bg})},[d(t("input",{class:"hidden","onUpdate:modelValue":s=>e.name_bg=s,type:"color"},null,8,Ve),[[p,e.name_bg,void 0,{lazy:!0}]])],4)])]),d(g(B,{class:"setting_nametag",value:e.image_name,"onUpdate:value":s=>e.image_name=s},null,8,["value","onUpdate:value"]),[[r,!(e.disabled&&!e.unknown)]])],42,re),g(C,{class:"setting_dragline",onDrop:s=>$(s,c+1),dragging:h.value},null,8,["onDrop","dragging"])],64))),128)),xe])}}},Te=L(ze,[["__scopeId","data-v-8d1d2c43"]]);export{Te as default};
