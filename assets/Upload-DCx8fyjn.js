import{a as g,I as y}from"./IconDelete-BsHnlf2I.js";import{_ as h}from"./Image-BmY2dVDH.js";import{x as U,_ as x,p as B,o as v,c as b,a as d,e as p,d as L,n as m,w as F}from"./index-DBARMjmE.js";function I(){const{findData:s}=U(),u=(e,a)=>{const t=a.replace(/\s/g,"").toLowerCase().split(","),l=e.name.slice(e.name.lastIndexOf(".")).toLowerCase();return a!==""?t.includes(l):!0},i=e=>e instanceof Blob;return{isFileType:u,isBlobFile:i,blobUrl:(e,a)=>{const t=l=>l.slice(-1)==="/"?"":l;return i(e)?URL.createObjectURL(e):t(a??"")},getFileName:e=>{var t;e=e??"";const a=(t=e.lastIndexOf)==null?void 0:t.call(e,"/");return i(e)||a===-1?e:e.slice(a).slice(1)},getFilesData:(e,a)=>{const t=a.filter(c=>!c.id),l=e.filter(c=>!s(a,c.id)).map(c=>c.name),o=e.filter(c=>s(a,c.id));return{addList:t,delList:l,resultList:o}}}}const _=["accept","multiple"],C={class:"upload_image"},w={__name:"Upload",props:{value:{type:[String],default:""},name:{type:[String],default:""},type:{type:[String],default:"contain"},accept:{type:[String],default:"image/*"},multiple:{type:[Boolean],default:!1},disabled:{type:[Boolean],default:!1}},emits:["update:value","update:name","upload"],setup(s,{emit:u}){const{blobUrl:i}=I(),f=s,n=u,r=t=>window.electron?t.path:i(t,""),e=t=>{const l=t.target.files;if(f.multiple){const o=[...l].map(c=>({path:r(c),name:c.name}));n("upload",o)}else{const o=r(l[0]);n("update:value",o),n("update:name",l[0].name),n("upload",{path:o,name:l[0].name})}},a=()=>n("update:value","");return(t,l)=>{const o=B("visible");return v(),b("div",{class:m(["upload group",{"pointer-events-none":s.disabled}])},[d("label",{class:m(["upload_input",{"opacity-0":s.value}])},[p(L(g)),d("input",{class:"hidden",onChange:e,type:"file",accept:s.accept,multiple:s.multiple},null,40,_)],2),F((v(),b("div",C,[p(h,{class:m(["size-full",s.type==="cover"?"object-cover":"object-contain"]),src:s.value,alt:s.name},null,8,["src","alt","class"]),d("button",{class:"upload_remove",onClick:a,title:"削除画像"},[p(y)])])),[[o,s.value]])],2)}}},k=x(w,[["__scopeId","data-v-81e58970"]]);export{k as U};
