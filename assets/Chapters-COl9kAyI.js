import{_ as P,r as B,e as q,o as n,c as u,w as v,e4 as te,a as s,n as r,t as l,e5 as X,H as ae,s as G,f as le,h as oe,g as J,i as ce,e0 as I,e1 as f,j as K,b as _,u as p,F as T,v as E,e6 as M,e7 as N,d_ as ne,d$ as ie}from"./index-C2pZrs4_.js";import{I as re}from"./Menu.vue_vue_type_style_index_0_scoped_c8f5dede_lang-DAONZl9P.js";import{W as de}from"./Wrap-_ucRoTJ6.js";import{C as V,D as O,u as _e}from"./useDrag-CzGfwrE4.js";import{D as he,M as ue}from"./Dialog-CrYUnfBA.js";import{M as pe}from"./Mark-BNdEsKlu.js";const ve=["disabled"],ge={class:"whitespace-nowrap"},me={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(i,{emit:D}){const w=i,k=D,b=B(0);return q(b,m=>k("update:value",m)),q(()=>w.value,m=>b.value=m,{immediate:!0}),(m,y)=>(n(),u("label",{class:r(["inline-flex items-center",i.disabled?"cursor-auto":"cursor-pointer"])},[v(s("input",{class:r(["checkbox",i.box]),"onUpdate:modelValue":y[0]||(y[0]=U=>b.value=U),disabled:i.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,ve),[[te,b.value]]),s("span",ge,l(i.title),1),X(m.$slots,"default",{},void 0,!0)],2))}},Q=P(me,[["__scopeId","data-v-b7a95cdd"]]),fe={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(i){return(D,w)=>(n(),u("button",{class:r(["switch",{"bg-current":i.active}])},[s("span",{class:r(["-mt-0.1em",{"text-white":i.active}])},[X(D.$slots,"default",{},void 0,!0)],2)],2))}},$=P(fe,[["__scopeId","data-v-8bd1e4e9"]]),g=i=>(ne("data-v-eba8f817"),i=i(),ie(),i),be={class:"side_list"},ye={class:"flex"},De=["onClick","title"],we={class:"chapter_head"},ke={class:"mr-9 grid xl:mr-0"},xe=["title"],Ce=g(()=>s("span",{class:"chapter_head_number"},"01.png",-1)),Se=g(()=>s("p",{class:"chapter_head_desc"},"目が覚めたら見知らぬ教室、辺るは水族館のような不思議な光景…自己紹介した後、どこから来た「モノカイ」と自称するぬいぐるみは俺たちをここでコロシアイ学園生活を強いられた。ここから脱出する条件は一つ――誰にばれないように殺人をすることだった。",-1)),Ie={class:"mr-9 flex items-end justify-end gap-2 xl:mr-0"},Me={class:"chapter_log"},$e=g(()=>s("div",{class:"chapter_log_tr -lock"},[s("div",{class:"chapter_log_th ml-16 xl:ml-0"},"セリフ＆切り替え＆演出"),s("div",{class:"ml-3 w-7 shrink-0 xl:hidden"})],-1)),Be=g(()=>s("div",{class:"chapter_log_tr_2 -lock"},[s("div",{class:"chapter_log_th -col"},"話し手．主人公差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"脇役．差分＆エフェクト"),s("div",{class:"chapter_log_th -col"},"SE＆ボイス"),s("div",{class:"chapter_log_th -col"},"備考")],-1)),Ue={key:0,class:"contents"},Ae=["draggable","onDragstart","onDragend"],Le={class:"chapter_log_scene"},Te=g(()=>s("div",{class:"chapter_log_switches xl:hidden"},null,-1)),Ee={class:"chapter_log_tr_2"},Ne=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),Ve=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),Pe=g(()=>s("div",{class:"chapter_log_td -col"},null,-1)),je={class:"chapter_log_td -col"},Fe={class:"-inner"},Re={key:1,class:"contents"},We=["draggable","onDragstart","onDragend"],ze={class:"chapter_log_avatar"},He=["src"],qe={class:"chapter_log_comment"},Ge={class:"chapter_log_switches"},Je={class:"chapter_log_tr_2"},Ke={class:"chapter_log_td -col"},Oe={key:0,class:"-inner col-span-2"},Qe={key:1,class:"-inner col-span-2"},Xe={class:"-inner"},Ye={class:"-inner"},Ze={class:"chapter_log_td -col"},es={class:"-inner col-span-2"},ss={class:"-inner"},ts={class:"-inner"},as={class:"chapter_log_td -col"},ls={class:"-inner"},os={class:"-inner"},cs={class:"chapter_log_td -col"},ns={class:"-inner"},is={__name:"Chapters",setup(i){const D=ae(),{characterList:w}=G(D),k=le(),{newChapter:b,dialogType:m}=k,{chapterIndex:y,chapterNames:U,chapterTitle:j,chapterData:h}=G(k),{findData:F,findIndex:Y}=oe(),{dragMove:Z,dropMove:ee}=_e(),A=o=>F(w.value,o.人物,"name")??{},R=J(()=>h.value.some(o=>o.dragging)),L=J(()=>h.value.filter(o=>o.is_selected).map(o=>o.id)),x=(o,t,d)=>{d&&Z(o,{index:t}),L.value.some(c=>h.value[t].id===c)||(h.value[t].is_selected=1),L.value.forEach(c=>{const a=F(h.value,c);a.dragging=d,d||(a.is_selected=0)})},W=(o,t)=>{L.value.forEach(d=>{const e=Y(h.value,d);ee(h.value,e,t)})},z=B(!1),C=B(0),H=B(null),S=(o,t)=>{C.value=t,H.value=o,z.value=t===null},se=({type:o})=>{const t=C.value,d=h.value[t];if(o==="delete")d.is_delete=!0;else{const e=C.value===null?h.value.length:C.value+1;h.value.splice(e,0,b(o))}};return(o,t)=>{const d=ce("visible");return n(),I(de,null,{side:f(()=>[s("ul",be,[(n(!0),u(T,null,K(p(U),(e,c)=>(n(),u("li",ye,[_(pe,{class:"mt-0.6em bg-current/10",active:c===p(y)},null,8,["active"]),s("button",{class:r(["side_item",{"side_item-active":c===p(y)}]),onClick:a=>y.value=c,title:e},l(e),11,De)]))),256))])]),main_head:f(()=>[s("header",we,[s("div",ke,[s("h1",{class:"chapter_head_title",title:p(j)},l(p(j)),9,xe),Ce]),Se,s("div",Ie,[_($,{class:"relative text-primary bg-primary/25"},{default:f(()=>[_(p(re),{class:"mt-0.1em"}),_(V,{class:"absolute left-0 top-0 opacity-0",onMore:t[0]||(t[0]=e=>S(e,null)),hasDel:!1,hasAdd:!1})]),_:1})])])]),default:f(()=>[s("div",Me,[$e,Be,_(O,{class:"chapter_log_dragline",onDrop:t[1]||(t[1]=e=>W(e,0)),dragging:R.value},null,8,["dragging"]),(n(!0),u(T,null,K(p(h),(e,c)=>(n(),u(T,{key:e.id},[e.is_showtime?v((n(),u("section",Ue,[s("div",{class:r(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:a=>x(a,c,!0),onDragend:a=>x(a,c,!1),onDrag:t[2]||(t[2]=M(()=>{},["prevent"])),onDrop:t[3]||(t[3]=M(()=>{},["prevent"]))},[s("div",{class:r(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[_(Q,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":a=>e.is_selected=a},null,8,["value","onUpdate:value"]),_(V,{class:"chapter_log_control",onMore:a=>S(a,c),hasDel:!1,hasAdd:!1},null,8,["onMore"]),s("div",Le,[s("span",null,l(e.人物),1),s("span",null,l(e.show_time),1),s("span",null,l(e.show_name),1)])],2),Te],42,Ae),s("div",Ee,[Ne,Ve,Pe,s("div",je,[s("div",Fe,l(e.備註),1)])])],512)),[[E,!e.is_delete]]):v((n(),u("section",Re,[s("div",{class:r(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:e.is_drag,onDragstart:a=>x(a,c,!0),onDragend:a=>x(a,c,!1),onDrag:t[4]||(t[4]=M(()=>{},["prevent"])),onDrop:t[5]||(t[5]=M(()=>{},["prevent"]))},[s("div",{class:r(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[_(Q,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":a=>e.is_selected=a},null,8,["value","onUpdate:value"]),_(V,{class:"chapter_log_control",onMore:a=>S(a,c),onDel:a=>e.is_delete=!0,hasAdd:!1},null,8,["onMore","onDel"]),s("div",{class:r(["chapter_log_info",{"flex-row-reverse":A(e).is_hero,"-replay":e.is_replay}])},[v((n(),u("div",ze,[s("img",{src:A(e).image_head},null,8,He)])),[[d,A(e).image_head]]),s("div",qe,[_(he,{class:"chapter_log_dialog",value:e.和訳,type:p(m)(e)},null,8,["value","type"])])],2)],2),s("div",Ge,[v((n(),I($,{class:r(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:f(()=>[N("R")]),_:2},1032,["active","class"])),[[d,e.is_replay]]),v((n(),I($,{class:r(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未紹介"},{default:f(()=>[N("U")]),_:2},1032,["active","class"])),[[d,e.is_unknown]]),v((n(),I($,{class:r(["chapter_log_switch",{"-monolog":e.is_solo}]),active:e.is_solo,title:"独り言"},{default:f(()=>[N("S")]),_:2},1032,["active","class"])),[[d,e.is_solo]])])],42,We),s("div",Je,[s("div",Ke,[e.is_announce||e.is_system?(n(),u("div",Oe,l(e.人物),1)):(n(),u("div",Qe,l(e.人物),1)),s("div",Xe,l(e.十六夜差分),1),s("div",Ye,l(e.主角特效),1)]),s("div",Ze,[s("div",es,l(e.顯示角色),1),s("div",ss,l(e.角色差分),1),s("div",ts,l(e.差分特效),1)]),s("div",as,[s("div",ls,l(e.SE),1),s("div",os,l(e.Voice),1)]),s("div",cs,[s("div",ns,l(e.備註),1)])])],512)),[[E,!e.is_delete]]),v(_(O,{class:"chapter_log_dragline",onDrop:a=>W(a,c+1),dragging:R.value},null,8,["onDrop","dragging"]),[[E,!e.is_delete]])],64))),128))]),_(ue,{positions:H.value,onClear:S,onUse:se,onlyAdd:z.value},null,8,["positions","onlyAdd"])]),_:1})}}},vs=P(is,[["__scopeId","data-v-eba8f817"]]);export{vs as default};
