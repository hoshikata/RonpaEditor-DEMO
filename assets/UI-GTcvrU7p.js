import{a as ee}from"./IconDelete-Sjud7laH.js";import{U as T,I as ie}from"./UiItem-BeFY0r8k.js";import{_ as G,o as v,c as $,a as e,b as te,s as se,y as ae,k as oe,i as le,r as J,h as z,g as ue,q as pe,w as C,e as i,z as y,t as o,d as t,F as j,m as A,p as ne,v as V,M as _e,N as de,C as K,D as Q}from"./index-CXH-8nV4.js";import{S as X}from"./Dialog-Cdz4KE43.js";import{_ as ce}from"./Image-Bn05j1uW.js";import{U as re}from"./Upload-BsiPtqRv.js";import{F as Y}from"./Fancy-BPAg2AG3.js";import{R as S}from"./Resource-CTxOae_G.js";import{_ as ve,R as w}from"./Radio-CStiv0f3.js";import{R as r}from"./Range-C1NDmUYT.js";import{A as ge}from"./Aspect-CVcG_GD9.js";import"./useMouse-GwYX7KgS.js";import"./round-drag-indicator-DfNWITTZ.js";import"./Audio-C1vxi4tb.js";const he={name:"PhCopyFill"},me={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},be=e("path",{fill:"currentColor",d:"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-8 128h-32V88a8 8 0 0 0-8-8H96V48h112Z"},null,-1),fe=[be];function Ue(g,x,h,c,f,d){return v(),$("svg",me,fe)}const we=G(he,[["render",Ue]]),E=g=>(_e("data-v-686dddfb"),g=g(),de(),g),ye={class:"popup_window"},$e={class:"popup_side"},De={class:"contents"},Ie={class:"popup_label"},ke={class:"contents"},xe={class:"popup_plus_group"},Fe={class:"popup_label"},Ce=["title"],Se={class:"popup_images_group"},Re={class:"contents"},Be={class:"popup_label"},Ne={class:"popup_images_group"},Ve={class:"contents"},je={class:"popup_label"},Ae={class:"popup_range_group"},Ee=E(()=>e("hr",{class:"popup_hr"},null,-1)),Le=E(()=>e("h4",{class:"popup_title"},"ダイアログ",-1)),Pe={class:"contents"},qe={class:"popup_label"},He={class:"popup_range_group"},Me={class:"contents"},Oe={class:"popup_label"},Te={class:"popup_range_group"},ze={class:"contents"},Ge={class:"popup_label"},We={class:"popup_range_group"},Ze=E(()=>e("hr",{class:"popup_hr"},null,-1)),Je={class:"popup_title"},Ke={class:"contents"},Qe={class:"popup_label"},Xe={class:"contents"},Ye={class:"popup_label"},et={class:"contents"},tt={class:"popup_subtitle"},st={class:"contents"},at={class:"popup_label"},ot={class:"contents"},lt={class:"popup_label"},nt={class:"contents"},it={class:"popup_label"},ut={class:"contents"},pt={class:"popup_label"},_t={class:"contents"},dt={class:"popup_subtitle"},ct={class:"contents"},rt={class:"popup_label"},vt={class:"popup_images_group"},gt={class:"contents"},ht={class:"popup_label"},mt={class:"popup_range_group"},bt={class:"contents"},ft={class:"popup_label"},Ut={class:"popup_range_group"},wt={class:"contents"},yt={class:"popup_label"},$t={class:"popup_range_group"},Dt=E(()=>e("hr",{class:"popup_hr"},null,-1)),It={class:"popup_title"},kt={class:"contents"},xt={class:"popup_label"},Ft={class:"contents"},Ct={class:"popup_subtitle"},St={class:"contents"},Rt={class:"popup_label"},Bt={class:"popup_images_group"},Nt={class:"contents"},Vt={class:"popup_label"},jt={class:"popup_range_group"},At={class:"contents"},Et={class:"popup_label"},Lt={class:"popup_range_group"},Pt={class:"contents"},qt={class:"popup_label"},Ht={class:"popup_range_group"},Mt={class:"popup_foot"},Ot=["title"],Tt=["title"],zt={__name:"UiEdit",props:{open:{type:[Boolean],default:!1},id:{type:[Number,String],default:""}},emits:["update:open","add","fancy"],setup(g,{emit:x}){const h=g,c=x,f=te(),{newUI:d}=f,{uiList:F}=se(f),{isDev:L,copyObject:W,findData:R}=ae(),{delItem:P,uploadItem:q,getDrag:H,dragItem:M,dropItem:D,fancy:Z,setFancy:O,changeFancy:m}=oe(),{t:l}=le("lang"),B=J(null),s=J({dialog:{},sprite_1:{},sprite_2:{},name_tag_1:{},name_tag_2:{}}),b=z(()=>H(s.value.images)),I=[{id:!1,name:"1"+l("search.is")+l("ui.position")},{id:!0,name:"2"+l("search.is")+l("ui.position")}],N=()=>{const p=R(F.value,h.id);h.id==="add"?F.value.push(s.value):s.value=Object.assign(p,s.value),c("update:open",!1)},U=p=>{const n=p.target.matches(".popup_window, .popup_window *"),_=p.target.matches(".-cancel");!p.target.matches(".resource_button")&&(!n||_)&&c("update:open",!1)};return ue(()=>h.open,p=>{if(!p)return;const n=R(F.value,h.id);h.id==="add"?s.value=d():s.value=W(n),L&&console.log({...s.value}),B.value.scrollTo({top:0,left:0})}),(p,n)=>{const _=pe("visible");return C((v(),$("section",{class:"popup",onClick:U},[e("div",ye,[e("div",{class:"popup_container scrollbar",ref_key:"container",ref:B},[i(ge,{class:"popup_aspect !h-cqh lg:!h-[calc(100cqw/16*9)]"},{default:y(()=>[i(T,{class:"border border-light-text",data:s.value,large:!0,edit:!0},null,8,["data"])]),_:1}),e("section",$e,[e("div",De,[e("h6",Ie,o(t(l)("edit.name")),1),i(ve,{class:"popup_input",value:s.value.name,"onUpdate:value":n[0]||(n[0]=a=>s.value.name=a)},null,8,["value"])]),e("div",ke,[e("div",xe,[e("h6",Fe,o(t(l)("ui.assign"))+o(t(l)("edit.image")),1),e("label",{class:"popup_plus",title:t(l)("button.new")},[i(t(ee)),i(re,{class:"hidden",onUpload:n[1]||(n[1]=a=>t(q)(s.value.images,s.value.images.length,a)),multiple:!0})],8,Ce)]),e("div",Se,[(v(!0),$(j,null,A(s.value.images??[],(a,u)=>(v(),ne(S,{key:a.id,data:a,hasDrag:b.value,onDrag:k=>t(M)(s.value.images,...k,u),onDrop:k=>t(D)(s.value.images,k,u+1),onFancy:n[2]||(n[2]=k=>c("fancy",k)),onDel:k=>t(P)(s.value.images,u)},null,8,["data","hasDrag","onDrag","onDrop","onDel"]))),128))])]),e("div",Re,[e("h6",Be,o(t(l)("ui.bg-blur"))+o(`
`)+o(t(l)("ui.area")),1),e("div",Ne,[i(S,{data:{path:s.value.mask},draggable:!1,onUpload:n[3]||(n[3]=a=>s.value.mask=a.path),onDel:n[4]||(n[4]=a=>s.value.mask=""),onFancy:n[5]||(n[5]=a=>c("fancy",a))},null,8,["data"])])]),e("div",Ve,[e("h6",je,o(t(l)("ui.bg-blur"))+o(`
`)+o(t(l)("ui.level")),1),e("div",Ae,[i(r,{value:s.value.blur,"onUpdate:value":n[6]||(n[6]=a=>s.value.blur=a),min:0,max:3,step:.1},null,8,["value"]),e("span",null,o(Math.round(s.value.blur*10)/10),1)])]),Ee,Le,e("div",Pe,[e("h6",qe,o(t(l)("ui.position"))+"："+o(t(l)("ui.bottom")),1),e("div",He,[i(r,{value:s.value.dialog.bottom,"onUpdate:value":n[7]||(n[7]=a=>s.value.dialog.bottom=a),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,o(s.value.dialog.bottom),1)])]),e("div",Me,[e("h6",Oe,o(t(l)("ui.position"))+"："+o(t(l)("ui.left")),1),e("div",Te,[i(r,{value:s.value.dialog.left,"onUpdate:value":n[8]||(n[8]=a=>s.value.dialog.left=a),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,o(s.value.dialog.left),1)])]),e("div",ze,[e("h6",Ge,o(t(l)("ui.width")),1),e("div",We,[i(r,{value:s.value.dialog.width,"onUpdate:value":n[9]||(n[9]=a=>s.value.dialog.width=a),min:50,max:100,step:.5},null,8,["value"]),e("span",null,o(s.value.dialog.width),1)])]),Ze,e("h4",Je,o(t(l)("ui.name-tag")),1),e("div",Ke,[e("h6",Qe,o(t(l)("ui.name-tag"))+o(t(l)("search.is"))+o(t(l)("ui.num")),1),i(w,{value:s.value.name_tag_number,"onUpdate:value":n[10]||(n[10]=a=>s.value.name_tag_number=a),list:[1,2],name:"name_tag"},null,8,["value"])]),e("div",Xe,[e("h6",Ye,o(t(l)("data.monolog")),1),i(w,{value:s.value.name_tag_solo_show,"onUpdate:value":n[11]||(n[11]=a=>s.value.name_tag_solo_show=a),list:[{id:!1,name:t(l)("ui.hide")},{id:!0,name:t(l)("ui.show")}],name:"name_tag_solo_show"},null,8,["value","list"])]),C(e("div",et,[e("h5",tt,o(t(l)("ui.name-tag"))+"の"+o(t(l)("ui.position")),1),e("div",st,[e("h6",at,o(t(l)("data.monolog")),1),i(w,{value:s.value.name_tag_solo_right,"onUpdate:value":n[12]||(n[12]=a=>s.value.name_tag_solo_right=a),list:I,name:"name_tag_solo_right"},null,8,["value"])]),e("div",ot,[e("h6",lt,o(t(l)("edit.hero")),1),i(w,{value:s.value.name_tag_hero_right,"onUpdate:value":n[13]||(n[13]=a=>s.value.name_tag_hero_right=a),list:I,name:"name_tag_hero_right"},null,8,["value"])]),e("div",nt,[e("h6",it,o(t(l)("edit.char"))+"1",1),i(w,{value:s.value.name_tag_sprite_1_right,"onUpdate:value":n[14]||(n[14]=a=>s.value.name_tag_sprite_1_right=a),list:I,name:"name_tag_sprite_1_right"},null,8,["value"])]),C(e("div",ut,[e("h6",pt,o(t(l)("edit.char"))+"2",1),i(w,{value:s.value.name_tag_sprite_2_right,"onUpdate:value":n[15]||(n[15]=a=>s.value.name_tag_sprite_2_right=a),list:I,name:"name_tag_sprite_2_right"},null,8,["value"])],512),[[V,s.value.sprite_number===2]])],512),[[V,s.value.name_tag_number===2]]),(v(),$(j,null,A(2,a=>C(e("div",_t,[e("h5",dt,o(t(l)("ui.name-tag"))+o(a),1),e("div",ct,[e("h6",rt,o(t(l)("ui.assign"))+o(t(l)("edit.image")),1),e("div",vt,[i(S,{data:{path:s.value["name_tag_"+a].path},draggable:!1,onUpload:u=>s.value["name_tag_"+a].path=u.path,onDel:u=>s.value["name_tag_"+a].path="",onFancy:n[16]||(n[16]=u=>c("fancy",u))},null,8,["data","onUpload","onDel"])])]),e("div",gt,[e("h6",ht,o(t(l)("ui.position"))+"："+o(t(l)("ui.bottom")),1),e("div",mt,[i(r,{value:s.value["name_tag_"+a].bottom,"onUpdate:value":u=>s.value["name_tag_"+a].bottom=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["name_tag_"+a].bottom),1)])]),e("div",bt,[e("h6",ft,o(t(l)("ui.position"))+"："+o(t(l)("ui.left")),1),e("div",Ut,[i(r,{value:s.value["name_tag_"+a].left,"onUpdate:value":u=>s.value["name_tag_"+a].left=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["name_tag_"+a].left),1)])]),e("div",wt,[e("h6",yt,o(t(l)("ui.height")),1),e("div",$t,[i(r,{value:s.value["name_tag_"+a].height,"onUpdate:value":u=>s.value["name_tag_"+a].height=u,min:1,max:20,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["name_tag_"+a].height),1)])])],512),[[V,a===1||a===2&&s.value.name_tag_number===2]])),64)),Dt,e("h4",It,o(t(l)("edit.char")),1),e("div",kt,[e("h6",xt,o(t(l)("edit.char"))+o(t(l)("search.is"))+o(t(l)("ui.num")),1),i(w,{value:s.value.sprite_number,"onUpdate:value":n[17]||(n[17]=a=>s.value.sprite_number=a),list:[1,2],name:"sprite"},null,8,["value"])]),(v(),$(j,null,A(2,a=>C(e("div",Ft,[e("h5",Ct,o(t(l)("edit.char"))+o(a),1),e("div",St,[e("h6",Rt,o(t(l)("ui.area")),1),e("div",Bt,[i(S,{data:{path:s.value["sprite_"+a].mask},draggable:!1,onUpload:u=>s.value["sprite_"+a].mask=u.path,onDel:u=>s.value["sprite_"+a].mask="",onFancy:n[18]||(n[18]=u=>c("fancy",u))},null,8,["data","onUpload","onDel"])])]),e("div",Nt,[e("h6",Vt,o(t(l)("ui.position"))+"："+o(t(l)("ui.top")),1),e("div",jt,[i(r,{value:s.value["sprite_"+a].top,"onUpdate:value":u=>s.value["sprite_"+a].top=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["sprite_"+a].top),1)])]),e("div",At,[e("h6",Et,o(t(l)("ui.position"))+"："+o(t(l)("ui.left")),1),e("div",Lt,[i(r,{value:s.value["sprite_"+a].left,"onUpdate:value":u=>s.value["sprite_"+a].left=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["sprite_"+a].left),1)])]),e("div",Pt,[e("h6",qt,o(t(l)("ui.width")),1),e("div",Ht,[i(r,{value:s.value["sprite_"+a].width,"onUpdate:value":u=>s.value["sprite_"+a].width=u,min:20,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["sprite_"+a].width),1)])])],512),[[V,a===1||a===2&&s.value.sprite_number===2]])),64)),e("div",Mt,[e("button",{class:"popup_foot_button",onClick:N,title:t(l)("button.save")},o(t(l)("button.save")),9,Ot),e("button",{class:"popup_foot_button -cancel",title:t(l)("button.cancel")},o(t(l)("button.cancel")),9,Tt)])])],512)])])),[[_,g.open]])}}},Gt=G(zt,[["__scopeId","data-v-686dddfb"]]),Wt={class:"resource_container"},Zt={class:"resource"},Jt=["onClick","title"],Kt=["onClick","title"],Qt={class:"resource_footer"},Xt={class:"resource_group !flex-wrap !gap-x-5"},Yt={class:"resource_group"},es={value:""},ts={class:"resource_group"},ss={value:""},as=["title"],os={__name:"UI",setup(g){const x=te(),{newUI:h}=x,{defaultUI:c,defaultUIForCG:f,uiList:d}=se(x),{copyObject:F,findData:L,findIndex:W}=ae(),{delItem:R,uploadItem:P,getDrag:q,dragItem:H,dropItem:M,fancy:D,setFancy:Z,changeFancy:O}=oe(),{t:m}=le("lang"),l=z(()=>q(d.value)),B=z(()=>L(d.value,D.value)),s=K({open:!1,id:""}),b=K({open:!1,value:""}),I=U=>{const p=F(d.value[U]);p.id=h(d.value),d.value.splice(U+1,0,p)},N=U=>{s.id=U,s.open=!0};return(U,p)=>{var n;return v(),$("div",Wt,[e("div",Zt,[(v(!0),$(j,null,A(t(d)??[],(_,a)=>(v(),ne(S,{key:_.id,data:_,hasDrag:l.value,onDrag:u=>t(H)(t(d),...u,a),onDrop:u=>t(M)(t(d),u,a+1),onFancy:u=>t(Z)(t(d),_.id,"id"),onAdd:u=>t(P)(t(d),a+1,[u]),onDel:u=>t(R)(t(d),a)},{image:y(()=>[i(T,{class:"hover:opacity-75",data:_,edit:!0},null,8,["data"])]),button:y(()=>[e("label",{class:"resource_button",onClick:u=>I(a),title:t(m)("button.copy")},[i(we,{class:"mt-0.5"})],8,Jt),e("label",{class:"resource_button",onClick:u=>N(_.id),title:t(m)("button.edit")},[i(ie,{class:"mt-0.5"})],8,Kt)]),_:2},1032,["data","hasDrag","onDrag","onDrop","onFancy","onAdd","onDel"]))),128))]),e("div",Qt,[e("div",Xt,[e("label",Yt,[e("span",null,o(t(m)("ui.default-ui")),1),i(X,{class:"resource_select",value:t(c),"onUpdate:value":p[0]||(p[0]=_=>Q(c)?c.value=_:null),options:t(d)},{default:y(()=>[e("option",es,o(t(m)("edit.none")),1)]),_:1},8,["value","options"])]),e("label",ts,[e("span",null,o(t(m)("ui.cg-ui")),1),i(X,{class:"resource_select",value:t(f),"onUpdate:value":p[1]||(p[1]=_=>Q(f)?f.value=_:null),options:t(d)},{default:y(()=>[e("option",ss,o(t(m)("ui.none-ui")),1)]),_:1},8,["value","options"])])]),e("label",{class:"resource_plus",onClick:p[2]||(p[2]=_=>N("add")),title:t(m)("button.new")},[i(t(ee))],8,as)]),i(Gt,{open:s.open,"onUpdate:open":p[3]||(p[3]=_=>s.open=_),id:s.id,onFancy:p[4]||(p[4]=_=>{b.value=_,b.open=!0})},null,8,["open","id"]),i(Y,{open:b.open,"onUpdate:open":p[5]||(p[5]=_=>b.open=_)},{default:y(()=>[i(ce,{src:b.value,alt:b.value},null,8,["src","alt"])]),_:1},8,["open"]),i(Y,{open:t(D).open,"onUpdate:open":p[6]||(p[6]=_=>t(D).open=_),index:t(D).index,length:(n=t(d))==null?void 0:n.length,onPrev:p[7]||(p[7]=_=>t(O)(t(d),-1,"id")),onNext:p[8]||(p[8]=_=>t(O)(t(d),1,"id"))},{default:y(()=>[i(T,{data:B.value,large:!0,edit:!0},null,8,["data"])]),_:1},8,["open","index","length"])])}}},fs=G(os,[["__scopeId","data-v-56e29a41"]]);export{fs as default};
