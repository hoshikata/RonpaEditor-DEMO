import{_ as B,o as i,c as u,a as n,w as g,v as k,F as H,t as z,b as _,n as U,u as f,d as K,s as D,r as w,e as $,f as Q,g as C,h as oe,i as X,j as Y,k as le,l as A,m as se,p as ae,q as N,x as ie,y as ce}from"./index-5DYZORmv.js";import{I as re}from"./round-close-DEfFdHzG.js";import{W as ue}from"./Wrap-BTA8ItBl.js";import{D as de,M as ve,E as _e}from"./Dialog-CKly0wrN.js";import{R as pe}from"./Range-D1lba2Dp.js";const he={name:"RiShiningFill"},me={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},ge=n("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10z"},null,-1),fe=[ge];function we(e,p,t,d,a,v){return i(),u("svg",me,fe)}const $e=B(he,[["render",we]]),ye={name:"RiShiningLine"},be={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},xe=n("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10zm4.803 1A12.044 12.044 0 0 1 12 18.197A12.043 12.043 0 0 1 18.197 12A12.044 12.044 0 0 1 12 5.803A12.044 12.044 0 0 1 5.803 12"},null,-1),ke=[xe];function Ce(e,p,t,d,a,v){return i(),u("svg",be,ke)}const Be=B(ye,[["render",Ce]]),ze={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Me=n("path",{fill:"currentColor",d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1m0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1M4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18c-1.84 0-3.28 1.64-2.95 3.54c.21 1.21 1.2 2.2 2.41 2.41c1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),Se=[Me];function Ie(e,p){return i(),u("svg",ze,[...Se])}const Ve={name:"ic-round-queue-music",render:Ie},He={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qe=n("path",{fill:"currentColor",d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"},null,-1),Te=[qe];function Ee(e,p){return i(),u("svg",He,[...Te])}const De={name:"ic-sharp-keyboard-voice",render:Ee},Le={name:"MaterialSymbolsDeleteOutline"},Ne={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ue=n("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"},null,-1),Ae=[Ue];function Fe(e,p,t,d,a,v){return i(),u("svg",Ne,Ae)}const j=B(Le,[["render",Fe]]),Pe={name:"MaterialSymbolsEditSquareOutline"},Ge={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Oe=n("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4t-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"},null,-1),Re=[Oe];function je(e,p,t,d,a,v){return i(),u("svg",Ge,Re)}const W=B(Pe,[["render",je]]),We={class:"preview_log_head"},Je={class:"preview_log_title"},Ke={class:"preview_log_subtitle text-sm"},Qe={class:"preview_log_content"},Xe={class:"preview_log_foot"},Ye={class:"preview_log_head group-hover:opacity-75"},Ze={class:"shrink-0 font-medium"},et={class:"preview_log_subtitle text-xs leading-none"},tt={class:"h-1em"},nt={class:"h-1em"},ot={class:"preview_log_content group-hover:opacity-75"},lt={class:"preview_log_foot"},st={class:"preview_log_mark_1"},at={class:"preview_log_mark_1"},it={class:"preview_log_mark_1"},ct={__name:"LogItem",props:{id:{type:[Number,String],default:0},log:{type:[Object],default:()=>({})}},emits:["update:id","edit","delete","stop"],setup(e,{emit:p}){const t=p;return(d,a)=>g((i(),u("article",{class:U(["preview_log",{"-active":e.log.id===e.id}])},[e.log.is_showtime?(i(),u(H,{key:0},[n("header",We,[n("h6",Je,z(e.log.人物),1),n("p",Ke,z(e.log.show_time),1)]),n("p",Qe,z(e.log.show_name),1),n("footer",Xe,[n("button",{class:"preview_button ml-auto",onClick:a[0]||(a[0]=v=>t("edit")),title:"編集"},[_(W)]),n("button",{class:"preview_button ml-1",onClick:a[1]||(a[1]=v=>t("delete")),title:"削除"},[_(j)])])],64)):(i(),u(H,{key:1},[n("button",{class:U(["group contents",{"pointer-events-none":!e.log.和訳}]),onClick:a[2]||(a[2]=v=>{t("update:id",e.log.id),t("stop")})},[n("header",Ye,[n("h6",Ze,z(e.log.人物),1),n("p",et,[n("span",tt,z(e.log.十六夜差分),1),n("span",nt,z(e.log.角色差分),1)])]),n("p",ot,z(e.log.和訳),1)],2),n("footer",lt,[g(n("span",st,"R",512),[[k,e.log.is_replay]]),g(n("span",at,"U",512),[[k,e.log.is_unknown]]),g(n("span",it,"S",512),[[k,e.log.is_solo]]),g(_($e,{class:"preview_log_mark_2"},null,512),[[k,e.log.差分特效]]),g(_(Be,{class:"preview_log_mark_2"},null,512),[[k,e.log.主角特效]]),g(_(f(Ve),{class:"preview_log_mark_2"},null,512),[[k,e.log.SE]]),g(_(f(De),{class:"preview_log_mark_2"},null,512),[[k,e.log.Voice]]),n("button",{class:"preview_button ml-auto",onClick:a[3]||(a[3]=v=>t("edit")),title:"編集"},[_(W)]),n("button",{class:"preview_button ml-1",onClick:a[4]||(a[4]=v=>t("delete")),title:"削除"},[_(j)])])],64))],2)),[[k,!e.log.is_delete]])}},rt=B(ct,[["__scopeId","data-v-751d67ad"]]),ut={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},dt=n("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1),vt=[dt];function _t(e,p){return i(),u("svg",ut,[...vt])}const pt={name:"ic-baseline-stop",render:_t},ht={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},mt=n("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1),gt=[mt];function ft(e,p){return i(),u("svg",ht,[...gt])}const wt={name:"ic-baseline-play-arrow",render:ft},$t={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},yt=n("path",{fill:"currentColor",d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"},null,-1),bt=[yt];function xt(e,p){return i(),u("svg",$t,[...bt])}const J={name:"ic-baseline-skip-previous",render:xt},kt={name:"MdiTarget"},Ct={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Bt=n("path",{fill:"currentColor",d:"M11 2v2.07A8 8 0 0 0 4.07 11H2v2h2.07A8 8 0 0 0 11 19.93V22h2v-2.07A8 8 0 0 0 19.93 13H22v-2h-2.07A8 8 0 0 0 13 4.07V2m-2 4.08V8h2V6.09c2.5.41 4.5 2.41 4.92 4.91H16v2h1.91c-.41 2.5-2.41 4.5-4.91 4.92V16h-2v1.91C8.5 17.5 6.5 15.5 6.08 13H8v-2H6.09C6.5 8.5 8.5 6.5 11 6.08M12 11a1 1 0 0 0-1 1a1 1 0 0 0 1 1a1 1 0 0 0 1-1a1 1 0 0 0-1-1"},null,-1),zt=[Bt];function Mt(e,p,t,d,a,v){return i(),u("svg",Ct,zt)}const St=B(kt,[["render",Mt]]),It={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Vt=n("path",{fill:"currentColor",d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"},null,-1),Ht=[Vt];function qt(e,p){return i(),u("svg",It,[...Ht])}const Tt={name:"ic-baseline-fullscreen",render:qt},Et={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Dt=n("path",{fill:"currentColor",d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"},null,-1),Lt=[Dt];function Nt(e,p){return i(),u("svg",Et,[...Lt])}const Ut={name:"ic-baseline-fullscreen-exit",render:Nt},At={class:"preview_control"},Ft=["disabled"],Pt=["disabled"],Gt={__name:"Control",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:play","target","stop"],setup(e,{emit:p}){const t=e,d=p,a=K(),{fullscreen:v}=D(a),c=w(0);$(c,m=>d("update:index",m)),$(()=>t.index,m=>c.value=m,{immediate:!0});const y=()=>{const m=c.value;!t.play||t.black||setTimeout(()=>{const l=c.value>=t.length;t.index===m&&t.play&&!t.black&&!t.typing&&!l&&(c.value+=1),l&&d("update:play",!1),y()},3e3)};return $(()=>t.play,y),$(()=>t.typing,y),(m,l)=>(i(),u("div",At,[n("button",{class:"preview_button",onClick:l[0]||(l[0]=h=>{c.value-=1,d("stop")}),disabled:c.value===0,title:"前へ"},[_(f(J))],8,Ft),n("button",{class:"preview_button",onClick:l[1]||(l[1]=h=>d("update:play",!e.play)),title:"プレイ"},[g(_(f(wt),null,null,512),[[k,!e.play]]),g(_(f(pt),null,null,512),[[k,e.play]])]),n("button",{class:"preview_button",onClick:l[2]||(l[2]=h=>{c.value+=1,d("stop")}),disabled:c.value===e.length,title:"次へ"},[_(f(J),{class:"-scale-x-100"})],8,Pt),_(pe,{class:"mx-3 grow !bg-dark-text",value:c.value,"onUpdate:value":l[3]||(l[3]=h=>c.value=h),onChange:l[4]||(l[4]=h=>d("stop")),min:0,max:e.length,step:1},null,8,["value","max"]),g(n("button",{class:"preview_button",onClick:l[5]||(l[5]=h=>d("target")),title:"今のセリフへ"},[_(St)],512),[[k,!f(v)]]),n("button",{class:"preview_button",onClick:l[6]||(l[6]=h=>v.value=!f(v)),title:"全画面モード"},[g(_(f(Tt),null,null,512),[[k,!f(v)]]),g(_(f(Ut),null,null,512),[[k,f(v)]])])]))}},Ot=B(Gt,[["__scopeId","data-v-6754a860"]]),Rt={class:"preview_dialog",style:{"margin-left":"15cqw","margin-right":"15cqw","margin-bottom":"3.2cqw"}},jt={__name:"Comment",props:{data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:typing"],setup(e,{emit:p}){const t=e,d=p,a=Q(),{dialogType:v}=a,c=w({}),y=w(0),m=C(()=>c.value.和訳??""),l=C(()=>t.play?m.value.slice(0,y.value):m.value),h=()=>{m.value&&(d("update:typing",!0),y.value=0)},b=()=>{if(!t.play||t.black)return;if(y.value===m.value.length)return d("update:typing",!1);setTimeout(()=>{t.typing?y.value+=1:y.value=m.value.length},25)};return $(()=>t.data,x=>{x.is_showtime||(c.value=x)}),$(c,h),$(m,b),$(l,b),$(y,b),$(()=>t.black,x=>{x||b()}),(x,I)=>(i(),u("article",Rt,[_(de,{value:l.value,type:f(v)(e.data)},null,8,["value","type"])]))}},Wt=B(jt,[["__scopeId","data-v-ae9b1745"]]),Jt={class:"-ui",id:"NameTag"},Kt={class:"-ui"},Qt=["src"],Xt=["src"],Yt={__name:"NameTag",props:{data:{type:[Object],default:()=>({})},isCG:{type:[Boolean],default:!1}},setup(e){const p=e,t=oe(),{characterList:d}=D(t),{findData:a}=X(),v=C(()=>a(d.value,p.data.人物,"name")??{}),c=C(()=>a(d.value,0));return(y,m)=>{const l=Y("opacity");return i(),u("div",Jt,[g((i(),u("div",{class:"absolute w-cqw",style:le({height:"4cqw",bottom:"13.5cqw",left:v.value.is_hero&&!e.isCG?"71cqw":"4cqw"})},[g((i(),u("div",Kt,[(i(!0),u(H,null,A(f(d),h=>g((i(),u("img",{class:"name_tag",src:h.image_name},null,8,Qt)),[[l,h.name===v.value.name]])),256))])),[[l,!e.data.is_unknown]]),g(n("img",{class:"name_tag",src:c.value.image_name},null,8,Xt),[[l,e.data.is_unknown]])],4)),[[l,!e.data.is_solo]])])}}},Zt=B(Yt,[["__scopeId","data-v-939a5969"]]),en=3e3,tn={__name:"Black",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:black"],setup(e,{emit:p}){const t=e,d=p,a=C(()=>t.data.show_time==="暗場"),v=w({}),c=C(()=>(v.value.show_name??"").split(",")),y=C(()=>!c.value.includes("前")),m=C(()=>!c.value.includes("後"));C(()=>c.value.includes("續"));const l=w(!1),h=w(!1),b=()=>{if(a.value){if(v.value={...t.data},h.value=t.play&&y.value,l.value=!0,d("update:black",!0),!t.play)return;setTimeout(()=>{t.index>=t.length||d("update:index",t.index+1)},en)}else h.value=t.play&&m.value,l.value=!1,d("update:black",!1)};return $(a,b),$(()=>t.play,b),(x,I)=>{const M=Y("opacity");return g((i(),u("div",{class:U(["-ui z-20 bg-black",{"duration-1000":h.value}]),id:"Black"},null,2)),[[M,l.value]])}}},nn={class:"preview_title"},on=["value"],ln=["data-id"],sn={class:"preview"},an={__name:"index",setup(e){const p=K(),{fullscreen:t}=D(p),d=Q(),{chapterIndex:a,chapterNames:v,chapterData:c}=D(d),{findData:y,findIndex:m,getClientRect:l}=X(),h=w(null),b=w(0),x=w(0),I=w({}),M=C(()=>c.value.filter(s=>{const o=!s.is_delete&&!s.is_showtime&&!!s.和訳,r=s.is_perform&&s.show_time==="暗場";return o||r})),Z=C(()=>{const s=m(c.value,b.value);return c.value.slice(0,s+1)});$(M,s=>{var o;return b.value=((o=s[0])==null?void 0:o.id)??0}),$(b,s=>{const o=y(c.value,s)??{};o.is_scene||(I.value=o,x.value=m(M.value,o.id))}),$(x,s=>{var o;return b.value=((o=M.value[s])==null?void 0:o.id)??0});const ee=C(()=>Z.value.filter(s=>s.is_showtime&&s.show_time==="CG"&&s.show_name)),te=C(()=>{const s=[...ee.value].reverse()[0]??{};return!!s.show_name&&s.show_name!=="結束"}),V=w(!1),q=w(!1),T=w(!1),F=()=>{V.value=!1,q.value=!1},ne=()=>{const s=[...h.value].find(S=>S.dataset.id*1===b.value);if(!s)return;const{height:o,top:r}=l(s);s.parentElement.scrollBy({top:r-o,behavior:"smooth"})},P=w(null);$(t,s=>{s?P.value.requestFullscreen():document.exitFullscreen()});const G=w(null),O=s=>G.value=s,L=w(!1),E=se({id:0,type:""}),R=(s,{type:o})=>{E.id=s,E.type=o??"",L.value=!0};return(s,o)=>(i(),ae(ue,{class:"flex-row-reverse",main:"!p-0",side:"!p-0 border-4 border-transparent"},{side_head:N(()=>[_(ve,{positions:G.value,onClear:O,onUse:o[0]||(o[0]=r=>R("add",r)),onlyAdd:!0},null,8,["positions"]),n("section",nn,[g(n("select",{class:"preview_title_select","onUpdate:modelValue":o[1]||(o[1]=r=>ce(a)?a.value=r:null)},[(i(!0),u(H,null,A(f(v),(r,S)=>(i(),u("option",{value:S},z(r),9,on))),256))],512),[[ie,f(a)]]),n("button",{class:"preview_button",onClick:O},[_(f(re))])])]),side:N(()=>[(i(!0),u(H,null,A(f(c),r=>(i(),u("div",{key:r.id,"data-id":r.id,ref_for:!0,ref_key:"logElem",ref:h},[_(rt,{id:b.value,"onUpdate:id":o[2]||(o[2]=S=>b.value=S),log:r,onEdit:S=>R(r.id,{}),onDelete:S=>r.is_delete=!0,onStop:F},null,8,["id","log","onEdit","onDelete"])],8,ln))),128))]),default:N(()=>[n("section",{class:"preview_container",ref_key:"preview",ref:P},[n("div",sn,[_(Zt,{data:I.value,isCG:te.value},null,8,["data","isCG"]),_(Wt,{data:I.value,play:V.value,typing:q.value,"onUpdate:typing":o[3]||(o[3]=r=>q.value=r),black:T.value},null,8,["data","play","typing","black"]),_(tn,{index:x.value,"onUpdate:index":o[4]||(o[4]=r=>x.value=r),data:I.value,play:V.value,black:T.value,"onUpdate:black":o[5]||(o[5]=r=>T.value=r),length:M.value.length-1},null,8,["index","data","play","black","length"])]),_(Ot,{index:x.value,"onUpdate:index":o[6]||(o[6]=r=>x.value=r),play:V.value,"onUpdate:play":o[7]||(o[7]=r=>V.value=r),typing:q.value,black:T.value,length:M.value.length-1,onTarget:ne,onStop:F},null,8,["index","play","typing","black","length"])],512),_(_e,{open:L.value,"onUpdate:open":o[8]||(o[8]=r=>L.value=r),id:E.id,type:E.type},null,8,["open","id","type"])]),_:1}))}},_n=B(an,[["__scopeId","data-v-c30d1043"]]);export{_n as default};
