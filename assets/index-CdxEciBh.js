import{_ as L,o as c,c as d,a as u,u as K,w as h,v as E,F as q,t as A,b as v,d as e,n as V,e as te,s as M,r as I,f as S,g as se,h as g,i as U,j as _e,k as me,l as P,m as he,p as N,q as H,x as F,y as R,z as ge,A as fe,B as ee,C as ye,D as j}from"./index-dKBv-Hpv.js";import{I as ce,a as we}from"./IconDelete-DMDfa-16.js";import{W as $e}from"./Wrap-BTJfsnlv.js";import{D as be,M as ke,E as xe}from"./Dialog-B-Gfd-NZ.js";import{R as Ce}from"./Range-BQSp6jfs.js";import{_ as B}from"./Image-XZfXazhA.js";/* empty css                                                             */import"./Input-DIxJosbD.js";const Se={name:"MdiTarget"},Be={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ie=u("path",{fill:"currentColor",d:"M11 2v2.07A8 8 0 0 0 4.07 11H2v2h2.07A8 8 0 0 0 11 19.93V22h2v-2.07A8 8 0 0 0 19.93 13H22v-2h-2.07A8 8 0 0 0 13 4.07V2m-2 4.08V8h2V6.09c2.5.41 4.5 2.41 4.92 4.91H16v2h1.91c-.41 2.5-2.41 4.5-4.91 4.92V16h-2v1.91C8.5 17.5 6.5 15.5 6.08 13H8v-2H6.09C6.5 8.5 8.5 6.5 11 6.08M12 11a1 1 0 0 0-1 1a1 1 0 0 0 1 1a1 1 0 0 0 1-1a1 1 0 0 0-1-1"},null,-1),Ge=[Ie];function ze(t,a,n,m,f,_){return c(),d("svg",Be,Ge)}const Me=L(Se,[["render",ze]]),Ee={name:"RiShiningFill"},Le={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},qe=u("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10z"},null,-1),Ne=[qe];function Te(t,a,n,m,f,_){return c(),d("svg",Le,Ne)}const Ae=L(Ee,[["render",Te]]),Ve={name:"RiShiningLine"},De={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},He=u("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10zm4.803 1A12.044 12.044 0 0 1 12 18.197A12.043 12.043 0 0 1 18.197 12A12.044 12.044 0 0 1 12 5.803A12.044 12.044 0 0 1 5.803 12"},null,-1),Ue=[He];function Pe(t,a,n,m,f,_){return c(),d("svg",De,Ue)}const Oe=L(Ve,[["render",Pe]]),je={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Fe=u("path",{fill:"currentColor",d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1m0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1M4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18c-1.84 0-3.28 1.64-2.95 3.54c.21 1.21 1.2 2.2 2.41 2.41c1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),Re=[Fe];function We(t,a){return c(),d("svg",je,[...Re])}const Je={name:"ic-round-queue-music",render:We},Ke={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Qe=u("path",{fill:"currentColor",d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"},null,-1),Xe=[Qe];function Ye(t,a){return c(),d("svg",Ke,[...Xe])}const Ze={name:"ic-sharp-keyboard-voice",render:Ye},et={name:"MaterialSymbolsEditSquareOutline"},tt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},st=u("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4t-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"},null,-1),nt=[st];function at(t,a,n,m,f,_){return c(),d("svg",tt,nt)}const re=L(et,[["render",at]]),lt={class:"preview_log_head"},ot={class:"preview_log_title"},it={class:"preview_log_subtitle text-sm"},ct={class:"preview_log_content"},rt={class:"preview_log_foot"},ut={class:"preview_log_head group-hover:opacity-75"},dt={class:"shrink-0 font-medium"},pt={class:"preview_log_subtitle text-xs leading-none"},vt={class:"h-1em"},_t={class:"h-1em"},mt={class:"preview_log_content group-hover:opacity-75"},ht={class:"preview_log_foot"},gt={class:"preview_log_mark_1"},ft={class:"preview_log_mark_1"},yt={class:"preview_log_mark_1"},wt={__name:"LogItem",props:{id:{type:[Number,String],default:0},log:{type:[Object],default:()=>({})}},emits:["update:id","edit","delete","stop"],setup(t,{emit:a}){const n=a,m=K(),{getCharacter:f,getSprite:_}=m;return(o,r)=>h((c(),d("article",{class:V(["preview_log",{"-active":t.log.id===t.id}])},[t.log.is_showtime?(c(),d(q,{key:0},[u("header",lt,[u("h6",ot,A(t.log.人物),1),u("p",it,A(t.log.show_time),1)]),u("p",ct,A(t.log.show_name),1),u("footer",rt,[u("button",{class:"preview_button ml-auto",onClick:r[0]||(r[0]=s=>n("edit")),title:"編集"},[v(re)]),u("button",{class:"preview_button ml-1",onClick:r[1]||(r[1]=s=>n("delete")),title:"削除"},[v(ce)])])],64)):(c(),d(q,{key:1},[u("button",{class:"group contents",onClick:r[2]||(r[2]=s=>{n("update:id",t.log.id),n("stop")})},[u("header",ut,[u("h6",dt,A(e(f)(t.log.人物).name),1),u("p",pt,[u("span",vt,A(e(f)(t.log.顯示角色).name)+" / "+A(e(_)(t.log.顯示角色,t.log.十六夜差分).name),1),u("span",_t,A(e(f)(t.log.立ち絵2).name)+" / "+A(e(_)(t.log.立ち絵2,t.log.角色差分).name),1)])]),u("p",mt,A(t.log.和訳),1)]),u("footer",ht,[h(u("span",gt,"R",512),[[E,t.log.is_replay]]),h(u("span",ft,"U",512),[[E,t.log.is_unknown]]),h(u("span",yt,"S",512),[[E,t.log.is_monolog]]),h(v(Ae,{class:"preview_log_mark_2"},null,512),[[E,t.log.差分特效]]),h(v(Oe,{class:"preview_log_mark_2"},null,512),[[E,t.log.主角特效]]),h(v(e(Je),{class:"preview_log_mark_2"},null,512),[[E,t.log.SE]]),h(v(e(Ze),{class:"preview_log_mark_2"},null,512),[[E,t.log.Voice]]),u("button",{class:"preview_button ml-auto",onClick:r[3]||(r[3]=s=>n("edit")),title:"編集"},[v(re)]),u("button",{class:"preview_button ml-1",onClick:r[4]||(r[4]=s=>n("delete")),title:"削除"},[v(ce)])])],64))],2)),[[E,!t.log.is_delete]])}},$t=L(wt,[["__scopeId","data-v-9aad4cb2"]]),bt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},kt=u("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1),xt=[kt];function Ct(t,a){return c(),d("svg",bt,[...xt])}const St={name:"ic-baseline-stop",render:Ct},Bt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},It=u("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1),Gt=[It];function zt(t,a){return c(),d("svg",Bt,[...Gt])}const Mt={name:"ic-baseline-play-arrow",render:zt},Et={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Lt=u("path",{fill:"currentColor",d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"},null,-1),qt=[Lt];function Nt(t,a){return c(),d("svg",Et,[...qt])}const ue={name:"ic-baseline-skip-previous",render:Nt},Tt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},At=u("path",{fill:"currentColor",d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"},null,-1),Vt=[At];function Dt(t,a){return c(),d("svg",Tt,[...Vt])}const Ht={name:"ic-baseline-fullscreen",render:Dt},Ut={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Pt=u("path",{fill:"currentColor",d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"},null,-1),Ot=[Pt];function jt(t,a){return c(),d("svg",Ut,[...Ot])}const Ft={name:"ic-baseline-fullscreen-exit",render:jt},Rt={class:"preview_control"},Wt=["disabled"],Jt=["disabled"],Kt={__name:"Control",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:play","target","stop"],setup(t,{emit:a}){const n=t,m=a,f=te(),{fullscreen:_}=M(f),o=I(0);S(o,s=>m("update:index",s)),S(()=>n.index,s=>o.value=s,{immediate:!0});const r=()=>{const s=o.value;!n.play||n.black||setTimeout(()=>{const l=o.value>=n.length;n.index===s&&n.play&&!n.black&&!n.typing&&!l&&(o.value+=1),l&&m("update:play",!1),r()},3e3)};return S(()=>n.play,r),S(()=>n.typing,r),(s,l)=>(c(),d("div",Rt,[u("button",{class:"preview_button",onClick:l[0]||(l[0]=p=>{o.value-=1,m("stop")}),disabled:o.value===0,title:"前へ"},[v(e(ue))],8,Wt),u("button",{class:"preview_button",onClick:l[1]||(l[1]=p=>m("update:play",!t.play)),title:"プレイ"},[h(v(e(Mt),null,null,512),[[E,!t.play]]),h(v(e(St),null,null,512),[[E,t.play]])]),u("button",{class:"preview_button",onClick:l[2]||(l[2]=p=>{o.value+=1,m("stop")}),disabled:o.value===t.length,title:"次へ"},[v(e(ue),{class:"-scale-x-100"})],8,Jt),v(Ce,{class:"mx-3 grow !bg-dark-text",value:o.value,"onUpdate:value":l[3]||(l[3]=p=>o.value=p),onChange:l[4]||(l[4]=p=>m("stop")),min:0,max:t.length,step:1},null,8,["value","max"]),u("button",{class:"preview_button",onClick:l[5]||(l[5]=p=>_.value=!e(_)),title:"全画面モード"},[h(v(e(Ht),null,null,512),[[E,!e(_)]]),h(v(e(Ft),null,null,512),[[E,e(_)]])])]))}},Qt=L(Kt,[["__scopeId","data-v-ffde7900"]]),Xt={__name:"Comment",props:{data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:typing"],setup(t,{emit:a}){const n=t,m=a,f=se(),{dialogType:_}=f,o=I({}),r=I(0),s=g(()=>o.value.和訳??""),l=g(()=>n.play?s.value.slice(0,r.value):s.value),p=g(()=>({"margin-left":"15cqw","margin-right":"15cqw","margin-bottom":"3.2cqw"})),k=()=>{s.value&&(m("update:typing",!0),r.value=0)},y=()=>{if(!n.play||n.black)return;if(r.value===s.value.length)return m("update:typing",!1);setTimeout(()=>{n.typing?r.value+=1:r.value=s.value.length},25)};return S(()=>n.data,x=>{x.is_showtime||(o.value=x)}),S(o,k),S(s,y),S(l,y),S(r,y),S(()=>n.black,x=>{x||y()}),(x,G)=>(c(),d("article",{class:"preview_dialog",style:U(p.value)},[v(be,{value:l.value,type:e(_)(t.data)},null,8,["value","type"])],4))}},Yt=L(Xt,[["__scopeId","data-v-95429636"]]),W=_e("log",()=>{const t=me(),a=se(),{chapterData:n}=M(a),{findData:m,findIndex:f}=P(),_=I(0),o=I(0),r=I({}),s=g(()=>n.value.filter(i=>{const C=!i.is_delete&&!i.is_showtime,O=i.is_perform&&i.show_time==="暗場";return C||O})),l=g(()=>{const i=f(n.value,_.value);return n.value.slice(0,i+1)});S(_,i=>{const C=m(n.value,i)??{};C.is_scene||(r.value=C,o.value=f(s.value,C.id))}),S(o,i=>{var C;return _.value=((C=s.value[i])==null?void 0:C.id)??0}),S(n,()=>{var i;return _.value=((i=s.value[0])==null?void 0:i.id)??0}),he(()=>{var i;return _.value=((i=s.value[0])==null?void 0:i.id)??0});const p=g(()=>l.value.filter(i=>i.is_showtime&&i.show_time==="CG"&&i.show_name)),k=g(()=>{const i=[...p.value].reverse()[0]??{};return!!i.show_name&&i.show_name!=="結束"}),y=I(!1),x=I(!1),G=I(!1),w=g(()=>({"":y.value}));return S(()=>t.name,()=>y.value=!1),{logId:_,logIndex:o,logData:r,logContents:s,logHistory:l,logCGs:p,logCGMode:k,logPlay:y,logTyping:x,logBlack:G,playEase:w}}),Zt={class:"-ui bg-black",id:"Background"},es={__name:"Background",props:{contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]}},setup(t){const a=t,n=W(),{playEase:m}=M(n),{removeDuplicates:f}=P(),{backgroundUrl:_}=R(),o=g(()=>{const l=s(a.all);return f(l,"show_name")}),r=g(()=>{var p;return(p=s(a.contents).reverse()[0])==null?void 0:p.show_name}),s=l=>l.filter(p=>p.is_showtime&&p.show_time==="BG"&&p.show_name);return(l,p)=>{const k=N("opacity");return c(),d("div",Zt,[(c(!0),d(q,null,H(o.value,y=>h((c(),F(B,{class:V(["-ui",e(m)]),src:e(_)(y.show_name)},null,8,["src","class"])),[[k,y.show_name===r.value]])),256))])}}},ts={class:"-ui",id:"Effect"},de={__name:"Effect",props:{name:{type:[String],default:""},data:{type:[Object],default:()=>({})},all:{type:[Array],default:()=>[]}},setup(t){const a=t,n=W(),{playEase:m}=M(n),{removeDuplicates:f}=P(),{effectUrl:_}=R(),o=g(()=>{const s=r(a.all);return f(s,a.name)}),r=s=>s.filter(l=>!l.is_showtime&&l[a.name]);return(s,l)=>{const p=N("opacity");return c(),d("div",ts,[(c(!0),d(q,null,H(o.value,k=>h((c(),F(B,{class:V(["-ui",e(m)]),src:e(_)(k[t.name])},null,8,["src","class"])),[[p,k[t.name]===t.data[t.name]]])),256))])}}},ss=["data-name"],ns={__name:"Sprite",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,n=K(),{characterList:m}=M(n),f=W(),{playEase:_}=M(f),{findData:o}=P(),{uiUrl:r}=R(),s={name:"顯示角色",sprite:"角色差分",effect:"差分特效"},l=g(()=>a.isCG?"人物":s.name),p=g(()=>{const w=G(a.contents).reverse(),i=o(w,a.data[l.value],l.value);return i==null?void 0:i[s.sprite]}),k=g(()=>({"mask-image":a.isCG?"":`url(${r("mask_4")})`})),y=g(()=>a.isCG?{}:{top:"0cqw",left:"-10cqw"}),x=g(()=>a.isCG?{}:{width:"100cqw"}),G=w=>w.filter(i=>!i.is_showtime&&i[s.sprite]);return(w,i)=>{const C=N("visible"),O=N("opacity");return c(),d("div",{class:"-ui -mask",id:"Sprite",style:U(k.value)},[u("div",{class:"sprite_container",style:U(y.value)},[u("div",{class:"sprite_inner",style:U(x.value)},[(c(!0),d(q,null,H(e(m),T=>h((c(),d("div",{key:T.id,class:V(["-ui",e(_)]),"data-name":T.name},[(c(!0),d(q,null,H(T.sprite??[],D=>h((c(),F(B,{key:D.id,class:"sprite",src:D.path},null,8,["src"])),[[C,D.id===p.value]])),128))],10,ss)),[[O,T.id===t.data[l.value]]])),128))],4)],4),v(de,{name:s.effect,data:t.data,all:t.all},null,8,["name","data","all"])],4)}}},as=L(ns,[["__scopeId","data-v-379bb5fa"]]),ls=["data-name"],os={__name:"Sprite2",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,n=K(),{characterList:m}=M(n),f=W(),{playEase:_}=M(f),{findData:o}=P(),{uiUrl:r}=R(),s={name:"立ち絵2",sprite:"十六夜差分",effect:"主角特效"},l=g(()=>a.isCG?"人物":s.name),p=g(()=>{const w=G(a.contents).reverse(),i=o(w,a.data[l.value],l.value);return i==null?void 0:i[s.sprite]}),k=g(()=>({"mask-image":a.isCG?"":`url(${r("mask_3")})`})),y=g(()=>a.isCG?{}:{top:"13cqw",left:"37cqw"}),x=g(()=>a.isCG?{}:{width:"85cqw"}),G=w=>w.filter(i=>!i.is_showtime&&i[s.sprite]);return(w,i)=>{const C=N("visible"),O=N("opacity");return c(),d("div",{class:"-ui -mask",id:"Sprite2",style:U(k.value)},[u("div",{class:"sprite_container",style:U(y.value)},[u("div",{class:"sprite_inner",style:U(x.value)},[(c(!0),d(q,null,H(e(m),T=>h((c(),d("div",{key:T.id,class:V(["-ui",e(_)]),"data-name":T.name},[(c(!0),d(q,null,H(T.sprite??[],D=>h((c(),F(B,{key:D.id,class:"sprite",src:D.path},null,8,["src"])),[[C,D.id===p.value]])),128))],10,ls)),[[O,T.id===t.data[l.value]]])),128))],4)],4),v(de,{name:s.effect,data:t.data,all:t.all},null,8,["name","data","all"])],4)}}},is=L(os,[["__scopeId","data-v-39501327"]]),cs={class:"-ui bg-black",id:"CG"},rs={__name:"CG",props:{contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]}},setup(t){const a=t,{removeDuplicates:n}=P(),{cgUrl:m}=R(),f=g(()=>{const r=o(a.all);return n(r,"show_name")}),_=g(()=>{var s;return(s=[...a.contents].reverse()[0])==null?void 0:s.show_name}),o=r=>r.filter(s=>s.is_showtime&&s.show_time==="CG"&&s.show_name&&s.show_name!=="結束");return(r,s)=>{const l=N("opacity");return c(),d("div",cs,[(c(!0),d(q,null,H(f.value,p=>h((c(),F(B,{class:"-ui cg",src:e(m)(p.show_name)},null,8,["src"])),[[l,p.show_name===_.value]])),256))])}}},us=L(rs,[["__scopeId","data-v-f7db31a0"]]),ds={class:"-ui",id:"UI"},ps={__name:"UI",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,n=K(),{getCharacter:m}=n,f=W(),{playEase:_}=M(f);P();const{uiUrl:o}=R();g(()=>m(a.data.人物));const r=g(()=>a.data.人物===a.data.立ち絵2),s=g(()=>!r.value&&!a.data.is_system&&!a.data.is_announce),l=g(()=>r.value&&!a.data.is_monolog);return(p,k)=>{const y=N("visible"),x=N("opacity");return c(),d("div",ds,[h((c(),d("div",{class:V(["-ui",e(_)])},[u("div",{class:"-ui -mask",style:U({"mask-image":"url("+e(o)("mask_2")+")"})},null,4),v(B,{class:"-ui",src:e(o)("01-1")},null,8,["src"]),v(B,{class:"-ui",src:e(o)("01-2")},null,8,["src"]),v(B,{class:"-ui",src:e(o)("01-3")},null,8,["src"]),v(B,{class:"-ui",src:e(o)("01-4")},null,8,["src"]),h(v(B,{class:"-ui",src:e(o)("01-5")},null,8,["src"]),[[y,s.value]]),h(v(B,{class:"-ui",src:e(o)("01-6")},null,8,["src"]),[[y,l.value]])],2)),[[x,!t.isCG]]),h((c(),d("div",{class:V(["-ui",e(_)])},[v(B,{class:"-ui",src:e(o)("02-1")},null,8,["src"]),h(v(B,{class:"-ui",src:e(o)("02-2")},null,8,["src"]),[[y,s.value]]),h(v(B,{class:"-ui",src:e(o)("02-2")},null,8,["src"]),[[y,l.value]])],2)),[[x,t.isCG]]),h(u("div",{class:V(["-ui -replay",e(_)])},null,2),[[x,t.data.is_replay]])])}}},vs=L(ps,[["__scopeId","data-v-2d473479"]]),_s={class:"-ui",id:"NameTag"},ms={class:"-ui"},hs={class:"name_tag -font"},gs={class:"-ui"},fs={__name:"NameTag",props:{data:{type:[Object],default:()=>({})},isCG:{type:[Boolean],default:!1}},setup(t){const a=t,n=te(),{fontFamily:m,fontWeight:f}=M(n),_=K(),{getCharacter:o}=_,{characterList:r}=M(_),{findData:s}=P(),l=g(()=>o(a.data.人物)),p=g(()=>s(r.value,0)),k=g(()=>a.data.人物===a.data.立ち絵2),y=g(()=>({width:"100cqw",height:"4cqw",bottom:"13.5cqw",left:k.value&&!a.isCG?"71cqw":"4cqw","font-size":"2.5cqw"}));return(x,G)=>{const w=N("opacity");return c(),d("div",_s,[h((c(),d("div",{class:V(["absolute",[e(m).nameTag,e(f).nameTag]]),style:U(y.value)},[h((c(),d("div",ms,[(c(!0),d(q,null,H(e(r),i=>h((c(),d("div",{key:i.id,class:"-ui"},[h((c(),d("p",hs,[ge(A(i.name),1)])),[[w,!i.image_name]]),h(v(B,{class:"name_tag",src:i.image_name},null,8,["src"]),[[w,i.image_name]])])),[[w,i.id===l.value.id]])),128))])),[[w,!t.data.is_unknown]]),h((c(),d("div",gs,[v(B,{class:"name_tag",src:p.value.image_name},null,8,["src"])])),[[w,t.data.is_unknown]])],6)),[[w,!t.data.is_monolog]])])}}},ys=L(fs,[["__scopeId","data-v-82350970"]]),ws=3e3,$s={__name:"Black",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:black"],setup(t,{emit:a}){const n=t,m=a,f=g(()=>n.data.show_time==="暗場"),_=I({}),o=g(()=>(_.value.show_name??"").split(",")),r=g(()=>!o.value.includes("前")),s=g(()=>!o.value.includes("後"));g(()=>o.value.includes("續"));const l=I(!1),p=I(!1),k=()=>{if(f.value){if(_.value={...n.data},p.value=n.play&&r.value,l.value=!0,m("update:black",!0),!n.play)return;setTimeout(()=>{n.index>=n.length||m("update:index",n.index+1)},ws)}else p.value=n.play&&s.value,l.value=!1,m("update:black",!1)};return S(f,k),S(()=>n.play,k),(y,x)=>{const G=N("opacity");return h((c(),d("div",{class:V(["-ui z-20 bg-black",{"duration-1000":p.value}]),id:"Black"},null,2)),[[G,l.value]])}}},bs={class:"preview_title"},ks=["value"],xs=["data-id"],Cs={class:"preview"},Ss={class:"-ui"},Bs={__name:"index",setup(t){const a=te(),{fullscreen:n}=M(a),m=se(),{chapterIndex:f,chapterNames:_,chapterData:o}=M(m),r=W(),{logId:s,logIndex:l,logData:p,logContents:k,logHistory:y,logCGs:x,logCGMode:G,logPlay:w,logTyping:i,logBlack:C,playEase:O}=M(r),{getClientRect:T}=P(),D=()=>{w.value=!1,i.value=!1},ne=I(null),X=()=>{const z=[...ne.value].find($=>$.dataset.id*1===s.value);if(!z)return;const{height:b,top:Z}=T(z);z.parentElement.scrollBy({top:Z-b,behavior:"smooth"})},ae=I(null);S(n,z=>{z?ae.value.requestFullscreen():document.exitFullscreen()});const le=I(null),oe=z=>le.value=z,Y=I(!1),Q=fe({id:0,type:""}),ie=(z,{type:b})=>{Q.id=z,Q.type=b??"",Y.value=!0},pe=z=>o.value.push(z),ve=z=>{s.value=z,setTimeout(X,100)};return(z,b)=>{const Z=N("opacity");return c(),F($e,{class:"flex-row-reverse",main:"!p-0",side:"!p-0 border-4 border-transparent"},{side_head:ee(()=>[v(ke,{positions:le.value,onClear:oe,onUse:b[0]||(b[0]=$=>ie("add",$)),onlyAdd:!0},null,8,["positions"]),u("section",bs,[h(u("select",{class:"preview_title_select","onUpdate:modelValue":b[1]||(b[1]=$=>j(f)?f.value=$:null)},[(c(!0),d(q,null,H(e(_),($,J)=>(c(),d("option",{value:J},A($),9,ks))),256))],512),[[ye,e(f)]]),h(u("button",{class:"preview_button",onClick:X,title:"今の画面のセリフへ"},[v(Me)],512),[[E,!e(n)]]),u("button",{class:"preview_button",onClick:oe,title:"新規"},[v(e(we))])])]),side:ee(()=>[(c(!0),d(q,null,H(e(o),$=>(c(),d("div",{key:$.id,"data-id":$.id,ref_for:!0,ref_key:"logElem",ref:ne},[v($t,{id:e(s),"onUpdate:id":b[2]||(b[2]=J=>j(s)?s.value=J:null),log:$,onEdit:J=>ie($.id,{}),onDelete:J=>$.is_delete=!0,onStop:D},null,8,["id","log","onEdit","onDelete"])],8,xs))),128))]),default:ee(()=>[u("section",{class:"preview_container",ref_key:"preview",ref:ae},[u("div",Cs,[u("div",Ss,[v(es,{contents:e(y),all:e(o)},null,8,["contents","all"]),v(as,{data:e(p),contents:e(y),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"]),v(is,{data:e(p),contents:e(y),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"]),h(v(us,{contents:e(x),all:e(o),class:V(e(O))},null,8,["contents","all","class"]),[[Z,e(G)]]),v(vs,{data:e(p),contents:e(y),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"])]),v(ys,{data:e(p),isCG:e(G)},null,8,["data","isCG"]),v(Yt,{data:e(p),play:e(w),typing:e(i),"onUpdate:typing":b[3]||(b[3]=$=>j(i)?i.value=$:null),black:e(C)},null,8,["data","play","typing","black"]),v($s,{index:e(l),"onUpdate:index":b[4]||(b[4]=$=>j(l)?l.value=$:null),data:e(p),play:e(w),black:e(C),"onUpdate:black":b[5]||(b[5]=$=>j(C)?C.value=$:null),length:e(k).length-1},null,8,["index","data","play","black","length"])]),v(Qt,{index:e(l),"onUpdate:index":b[6]||(b[6]=$=>j(l)?l.value=$:null),play:e(w),"onUpdate:play":b[7]||(b[7]=$=>j(w)?w.value=$:null),typing:e(i),black:e(C),length:e(k).length-1,onTarget:X,onStop:D},null,8,["index","play","typing","black","length"])],512),v(xe,{open:Y.value,"onUpdate:open":b[8]||(b[8]=$=>Y.value=$),id:Q.id,type:Q.type,onAdd:pe,onTarget:ve},null,8,["open","id","type"])]),_:1})}}},Ts=L(Bs,[["__scopeId","data-v-feba3392"]]);export{Ts as default};
