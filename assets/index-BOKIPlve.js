import{_ as L,o as c,c as p,a as u,u as K,b as _e,w as g,v as M,F as q,t as A,d as v,e,n as V,f as te,s as E,r as I,g as S,h as se,i as f,j as U,k as me,l as he,m as P,p as ge,q as N,x as H,y as F,z as R,A as fe,B as ye,C as ee,D as we,E as j}from"./index-D0GbkE8i.js";import{I as ce,a as $e}from"./IconDelete-Bqd5S59N.js";import{W as be}from"./Wrap-CnHyLras.js";import{D as ke,M as xe,E as Ce}from"./Dialog-DRLhTuNq.js";import{R as Se}from"./Range-jNbMcdnk.js";import{_ as B}from"./Image-qcYgLhux.js";/* empty css                                                             */import"./Input-BFAgUE_7.js";const Be={name:"MdiTarget"},Ie={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ge=u("path",{fill:"currentColor",d:"M11 2v2.07A8 8 0 0 0 4.07 11H2v2h2.07A8 8 0 0 0 11 19.93V22h2v-2.07A8 8 0 0 0 19.93 13H22v-2h-2.07A8 8 0 0 0 13 4.07V2m-2 4.08V8h2V6.09c2.5.41 4.5 2.41 4.92 4.91H16v2h1.91c-.41 2.5-2.41 4.5-4.91 4.92V16h-2v1.91C8.5 17.5 6.5 15.5 6.08 13H8v-2H6.09C6.5 8.5 8.5 6.5 11 6.08M12 11a1 1 0 0 0-1 1a1 1 0 0 0 1 1a1 1 0 0 0 1-1a1 1 0 0 0-1-1"},null,-1),ze=[Ge];function Ee(t,l,n,h,y,_){return c(),p("svg",Ie,ze)}const Me=L(Be,[["render",Ee]]),Le={name:"RiShiningFill"},qe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ne=u("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10z"},null,-1),Te=[Ne];function Ae(t,l,n,h,y,_){return c(),p("svg",qe,Te)}const Ve=L(Le,[["render",Ae]]),De={name:"RiShiningLine"},He={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ue=u("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10zm4.803 1A12.044 12.044 0 0 1 12 18.197A12.043 12.043 0 0 1 18.197 12A12.044 12.044 0 0 1 12 5.803A12.044 12.044 0 0 1 5.803 12"},null,-1),Pe=[Ue];function Oe(t,l,n,h,y,_){return c(),p("svg",He,Pe)}const je=L(De,[["render",Oe]]),Fe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Re=u("path",{fill:"currentColor",d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1m0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1M4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18c-1.84 0-3.28 1.64-2.95 3.54c.21 1.21 1.2 2.2 2.41 2.41c1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),We=[Re];function Je(t,l){return c(),p("svg",Fe,[...We])}const Ke={name:"ic-round-queue-music",render:Je},Qe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Xe=u("path",{fill:"currentColor",d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"},null,-1),Ye=[Xe];function Ze(t,l){return c(),p("svg",Qe,[...Ye])}const et={name:"ic-sharp-keyboard-voice",render:Ze},tt={name:"MaterialSymbolsEditSquareOutline"},st={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},nt=u("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4t-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"},null,-1),at=[nt];function lt(t,l,n,h,y,_){return c(),p("svg",st,at)}const re=L(tt,[["render",lt]]),ot={class:"preview_log_head"},it={class:"preview_log_title"},ct={class:"preview_log_subtitle text-sm"},rt={class:"preview_log_content"},ut={class:"preview_log_foot"},dt={class:"preview_log_head group-hover:opacity-75"},pt={class:"shrink-0 font-medium"},vt={class:"preview_log_subtitle text-xs leading-none"},_t={class:"h-1em"},mt={class:"h-1em"},ht={class:"preview_log_content group-hover:opacity-75"},gt={class:"preview_log_foot"},ft={class:"preview_log_mark_1"},yt={class:"preview_log_mark_1"},wt={class:"preview_log_mark_1"},$t={__name:"LogItem",props:{id:{type:[Number,String],default:0},log:{type:[Object],default:()=>({})}},emits:["update:id","edit","delete","stop"],setup(t,{emit:l}){const n=l,h=K(),{getCharacter:y,getSprite:_}=h,o=_e(),{getBackground:m,getCg:s,getBgm:a}=o,d=(w,r)=>(w==="BG"&&(r=m(r).name??""),w==="CG"&&(r=r==="結束"?r:s(r).name??""),r);return(w,r)=>g((c(),p("article",{class:V(["preview_log",{"-active":t.log.id===t.id}])},[t.log.is_showtime?(c(),p(q,{key:0},[u("header",ot,[u("h6",it,A(t.log.人物),1),u("p",ct,A(t.log.show_time),1)]),u("p",rt,A(d(t.log.show_time,t.log.show_name)),1),u("footer",ut,[u("button",{class:"preview_button ml-auto",onClick:r[0]||(r[0]=$=>n("edit")),title:"編集"},[v(re)]),u("button",{class:"preview_button ml-1",onClick:r[1]||(r[1]=$=>n("delete")),title:"削除"},[v(ce)])])],64)):(c(),p(q,{key:1},[u("button",{class:"group contents",onClick:r[2]||(r[2]=$=>{n("update:id",t.log.id),n("stop")})},[u("header",dt,[u("h6",pt,A(e(y)(t.log.人物).name),1),u("p",vt,[u("span",_t,A(e(y)(t.log.顯示角色).name)+" / "+A(e(_)(t.log.顯示角色,t.log.十六夜差分).name),1),u("span",mt,A(e(y)(t.log.立ち絵2).name)+" / "+A(e(_)(t.log.立ち絵2,t.log.角色差分).name),1)])]),u("p",ht,A(t.log.和訳),1)]),u("footer",gt,[g(u("span",ft,"R",512),[[M,t.log.is_replay]]),g(u("span",yt,"U",512),[[M,t.log.is_unknown]]),g(u("span",wt,"S",512),[[M,t.log.is_monolog]]),g(v(Ve,{class:"preview_log_mark_2"},null,512),[[M,t.log.差分特效]]),g(v(je,{class:"preview_log_mark_2"},null,512),[[M,t.log.主角特效]]),g(v(e(Ke),{class:"preview_log_mark_2"},null,512),[[M,t.log.SE]]),g(v(e(et),{class:"preview_log_mark_2"},null,512),[[M,t.log.Voice]]),u("button",{class:"preview_button ml-auto",onClick:r[3]||(r[3]=$=>n("edit")),title:"編集"},[v(re)]),u("button",{class:"preview_button ml-1",onClick:r[4]||(r[4]=$=>n("delete")),title:"削除"},[v(ce)])])],64))],2)),[[M,!t.log.is_delete]])}},bt=L($t,[["__scopeId","data-v-3572e74f"]]),kt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},xt=u("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1),Ct=[xt];function St(t,l){return c(),p("svg",kt,[...Ct])}const Bt={name:"ic-baseline-stop",render:St},It={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Gt=u("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1),zt=[Gt];function Et(t,l){return c(),p("svg",It,[...zt])}const Mt={name:"ic-baseline-play-arrow",render:Et},Lt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qt=u("path",{fill:"currentColor",d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"},null,-1),Nt=[qt];function Tt(t,l){return c(),p("svg",Lt,[...Nt])}const ue={name:"ic-baseline-skip-previous",render:Tt},At={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Vt=u("path",{fill:"currentColor",d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"},null,-1),Dt=[Vt];function Ht(t,l){return c(),p("svg",At,[...Dt])}const Ut={name:"ic-baseline-fullscreen",render:Ht},Pt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ot=u("path",{fill:"currentColor",d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"},null,-1),jt=[Ot];function Ft(t,l){return c(),p("svg",Pt,[...jt])}const Rt={name:"ic-baseline-fullscreen-exit",render:Ft},Wt={class:"preview_control"},Jt=["disabled"],Kt=["disabled"],Qt={__name:"Control",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:play","target","stop"],setup(t,{emit:l}){const n=t,h=l,y=te(),{fullscreen:_}=E(y),o=I(0);S(o,s=>h("update:index",s)),S(()=>n.index,s=>o.value=s,{immediate:!0});const m=()=>{const s=o.value;!n.play||n.black||setTimeout(()=>{const a=o.value>=n.length;n.index===s&&n.play&&!n.black&&!n.typing&&!a&&(o.value+=1),a&&h("update:play",!1),m()},3e3)};return S(()=>n.play,m),S(()=>n.typing,m),(s,a)=>(c(),p("div",Wt,[u("button",{class:"preview_button",onClick:a[0]||(a[0]=d=>{o.value-=1,h("stop")}),disabled:o.value===0,title:"前へ"},[v(e(ue))],8,Jt),u("button",{class:"preview_button",onClick:a[1]||(a[1]=d=>h("update:play",!t.play)),title:"プレイ"},[g(v(e(Mt),null,null,512),[[M,!t.play]]),g(v(e(Bt),null,null,512),[[M,t.play]])]),u("button",{class:"preview_button",onClick:a[2]||(a[2]=d=>{o.value+=1,h("stop")}),disabled:o.value===t.length,title:"次へ"},[v(e(ue),{class:"-scale-x-100"})],8,Kt),v(Se,{class:"mx-3 grow !bg-dark-text",value:o.value,"onUpdate:value":a[3]||(a[3]=d=>o.value=d),onChange:a[4]||(a[4]=d=>h("stop")),min:0,max:t.length,step:1},null,8,["value","max"]),u("button",{class:"preview_button",onClick:a[5]||(a[5]=d=>_.value=!e(_)),title:"全画面モード"},[g(v(e(Ut),null,null,512),[[M,!e(_)]]),g(v(e(Rt),null,null,512),[[M,e(_)]])])]))}},Xt=L(Qt,[["__scopeId","data-v-ffde7900"]]),Yt={__name:"Comment",props:{data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:typing"],setup(t,{emit:l}){const n=t,h=l,y=se(),{dialogType:_}=y,o=I({}),m=I(0),s=f(()=>o.value.和訳??""),a=f(()=>n.play?s.value.slice(0,m.value):s.value),d=f(()=>({"margin-left":"15cqw","margin-right":"15cqw","margin-bottom":"3.2cqw"})),w=()=>{s.value&&(h("update:typing",!0),m.value=0)},r=()=>{if(!n.play||n.black)return;if(m.value===s.value.length)return h("update:typing",!1);setTimeout(()=>{n.typing?m.value+=1:m.value=s.value.length},25)};return S(()=>n.data,$=>{$.is_showtime||(o.value=$)}),S(o,w),S(s,r),S(a,r),S(m,r),S(()=>n.black,$=>{$||r()}),($,G)=>(c(),p("article",{class:"preview_dialog",style:U(d.value)},[v(ke,{value:a.value,type:e(_)(t.data)},null,8,["value","type"])],4))}},Zt=L(Yt,[["__scopeId","data-v-95429636"]]),W=me("log",()=>{const t=he(),l=se(),{chapterData:n}=E(l),{findData:h,findIndex:y}=P(),_=I(0),o=I(0),m=I({}),s=f(()=>n.value.filter(i=>{const C=!i.is_delete&&!i.is_showtime,O=i.is_perform&&i.show_time==="暗場";return C||O})),a=f(()=>{const i=y(n.value,_.value);return n.value.slice(0,i+1)});S(_,i=>{const C=h(n.value,i)??{};C.is_scene||(m.value=C,o.value=y(s.value,C.id))}),S(o,i=>{var C;return _.value=((C=s.value[i])==null?void 0:C.id)??0}),S(n,()=>{var i;return _.value=((i=s.value[0])==null?void 0:i.id)??0}),ge(()=>{var i;return _.value=((i=s.value[0])==null?void 0:i.id)??0});const d=f(()=>a.value.filter(i=>i.is_showtime&&i.show_time==="CG"&&i.show_name)),w=f(()=>{const i=[...d.value].reverse()[0]??{};return!!i.show_name&&i.show_name!=="結束"}),r=I(!1),$=I(!1),G=I(!1),b=f(()=>({"":r.value}));return S(()=>t.name,()=>r.value=!1),{logId:_,logIndex:o,logData:m,logContents:s,logHistory:a,logCGs:d,logCGMode:w,logPlay:r,logTyping:$,logBlack:G,playEase:b}}),es={class:"-ui bg-black",id:"Background"},ts={__name:"Background",props:{contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]}},setup(t){const l=t,n=W(),{playEase:h}=E(n),{removeDuplicates:y}=P(),{backgroundUrl:_}=R(),o=f(()=>{const a=s(l.all);return y(a,"show_name")}),m=f(()=>{var d;return(d=s(l.contents).reverse()[0])==null?void 0:d.show_name}),s=a=>a.filter(d=>d.is_showtime&&d.show_time==="BG"&&d.show_name);return(a,d)=>{const w=N("opacity");return c(),p("div",es,[(c(!0),p(q,null,H(o.value,r=>g((c(),F(B,{class:V(["-ui",e(h)]),src:e(_)(r.show_name)},null,8,["src","class"])),[[w,r.show_name===m.value]])),256))])}}},ss={class:"-ui",id:"Effect"},de={__name:"Effect",props:{name:{type:[String],default:""},data:{type:[Object],default:()=>({})},all:{type:[Array],default:()=>[]}},setup(t){const l=t,n=W(),{playEase:h}=E(n),{removeDuplicates:y}=P(),{effectUrl:_}=R(),o=f(()=>{const s=m(l.all);return y(s,l.name)}),m=s=>s.filter(a=>!a.is_showtime&&a[l.name]);return(s,a)=>{const d=N("opacity");return c(),p("div",ss,[(c(!0),p(q,null,H(o.value,w=>g((c(),F(B,{class:V(["-ui",e(h)]),src:e(_)(w[t.name])},null,8,["src","class"])),[[d,w[t.name]===t.data[t.name]]])),256))])}}},ns=["data-name"],as={__name:"Sprite",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const l=t,n=K(),{characterList:h}=E(n),y=W(),{playEase:_}=E(y),{findData:o}=P(),{uiUrl:m}=R(),s={name:"顯示角色",sprite:"角色差分",effect:"差分特效"},a=f(()=>l.isCG?"人物":s.name),d=f(()=>{const b=G(l.contents).reverse(),i=o(b,l.data[a.value],a.value);return i==null?void 0:i[s.sprite]}),w=f(()=>({"mask-image":l.isCG?"":`url(${m("mask_4")})`})),r=f(()=>l.isCG?{}:{top:"0cqw",left:"-10cqw"}),$=f(()=>l.isCG?{}:{width:"100cqw"}),G=b=>b.filter(i=>!i.is_showtime&&i[s.sprite]);return(b,i)=>{const C=N("visible"),O=N("opacity");return c(),p("div",{class:"-ui -mask",id:"Sprite",style:U(w.value)},[u("div",{class:"sprite_container",style:U(r.value)},[u("div",{class:"sprite_inner",style:U($.value)},[(c(!0),p(q,null,H(e(h),T=>g((c(),p("div",{key:T.id,class:V(["-ui",e(_)]),"data-name":T.name},[(c(!0),p(q,null,H(T.sprite??[],D=>g((c(),F(B,{key:D.id,class:"sprite",src:D.path},null,8,["src"])),[[C,D.id===d.value]])),128))],10,ns)),[[O,T.id===t.data[a.value]]])),128))],4)],4),v(de,{name:s.effect,data:t.data,all:t.all},null,8,["name","data","all"])],4)}}},ls=L(as,[["__scopeId","data-v-379bb5fa"]]),os=["data-name"],is={__name:"Sprite2",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const l=t,n=K(),{characterList:h}=E(n),y=W(),{playEase:_}=E(y),{findData:o}=P(),{uiUrl:m}=R(),s={name:"立ち絵2",sprite:"十六夜差分",effect:"主角特效"},a=f(()=>l.isCG?"人物":s.name),d=f(()=>{const b=G(l.contents).reverse(),i=o(b,l.data[a.value],a.value);return i==null?void 0:i[s.sprite]}),w=f(()=>({"mask-image":l.isCG?"":`url(${m("mask_3")})`})),r=f(()=>l.isCG?{}:{top:"13cqw",left:"37cqw"}),$=f(()=>l.isCG?{}:{width:"85cqw"}),G=b=>b.filter(i=>!i.is_showtime&&i[s.sprite]);return(b,i)=>{const C=N("visible"),O=N("opacity");return c(),p("div",{class:"-ui -mask",id:"Sprite2",style:U(w.value)},[u("div",{class:"sprite_container",style:U(r.value)},[u("div",{class:"sprite_inner",style:U($.value)},[(c(!0),p(q,null,H(e(h),T=>g((c(),p("div",{key:T.id,class:V(["-ui",e(_)]),"data-name":T.name},[(c(!0),p(q,null,H(T.sprite??[],D=>g((c(),F(B,{key:D.id,class:"sprite",src:D.path},null,8,["src"])),[[C,D.id===d.value]])),128))],10,os)),[[O,T.id===t.data[a.value]]])),128))],4)],4),v(de,{name:s.effect,data:t.data,all:t.all},null,8,["name","data","all"])],4)}}},cs=L(is,[["__scopeId","data-v-39501327"]]),rs={class:"-ui bg-black",id:"CG"},us={__name:"CG",props:{contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]}},setup(t){const l=t,{removeDuplicates:n}=P(),{cgUrl:h}=R(),y=f(()=>{const m=o(l.all);return n(m,"show_name")}),_=f(()=>{var s;return(s=[...l.contents].reverse()[0])==null?void 0:s.show_name}),o=m=>m.filter(s=>s.is_showtime&&s.show_time==="CG"&&s.show_name&&s.show_name!=="結束");return(m,s)=>{const a=N("opacity");return c(),p("div",rs,[(c(!0),p(q,null,H(y.value,d=>g((c(),F(B,{class:"-ui cg",src:e(h)(d.show_name)},null,8,["src"])),[[a,d.show_name===_.value]])),256))])}}},ds=L(us,[["__scopeId","data-v-f7db31a0"]]),ps={class:"-ui",id:"UI"},vs={__name:"UI",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},all:{type:[Array],default:()=>[]},isCG:{type:[Boolean],default:!1}},setup(t){const l=t,n=K(),{getCharacter:h}=n,y=W(),{playEase:_}=E(y);P();const{uiUrl:o}=R();f(()=>h(l.data.人物));const m=f(()=>l.data.人物===l.data.立ち絵2),s=f(()=>!m.value&&!l.data.is_system&&!l.data.is_announce),a=f(()=>m.value&&!l.data.is_monolog);return(d,w)=>{const r=N("visible"),$=N("opacity");return c(),p("div",ps,[g((c(),p("div",{class:V(["-ui",e(_)])},[u("div",{class:"-ui -mask",style:U({"mask-image":"url("+e(o)("mask_2")+")"})},null,4),v(B,{class:"-ui",src:e(o)("01-1")},null,8,["src"]),v(B,{class:"-ui",src:e(o)("01-2")},null,8,["src"]),v(B,{class:"-ui",src:e(o)("01-3")},null,8,["src"]),v(B,{class:"-ui",src:e(o)("01-4")},null,8,["src"]),g(v(B,{class:"-ui",src:e(o)("01-5")},null,8,["src"]),[[r,s.value]]),g(v(B,{class:"-ui",src:e(o)("01-6")},null,8,["src"]),[[r,a.value]])],2)),[[$,!t.isCG]]),g((c(),p("div",{class:V(["-ui",e(_)])},[v(B,{class:"-ui",src:e(o)("02-1")},null,8,["src"]),g(v(B,{class:"-ui",src:e(o)("02-2")},null,8,["src"]),[[r,s.value]]),g(v(B,{class:"-ui",src:e(o)("02-2")},null,8,["src"]),[[r,a.value]])],2)),[[$,t.isCG]]),g(u("div",{class:V(["-ui -replay",e(_)])},null,2),[[$,t.data.is_replay]])])}}},_s=L(vs,[["__scopeId","data-v-2d473479"]]),ms={class:"-ui",id:"NameTag"},hs={class:"-ui"},gs={class:"name_tag -font"},fs={class:"-ui"},ys={__name:"NameTag",props:{data:{type:[Object],default:()=>({})},isCG:{type:[Boolean],default:!1}},setup(t){const l=t,n=te(),{fontFamily:h,fontWeight:y}=E(n),_=K(),{getCharacter:o}=_,{characterList:m}=E(_),{findData:s}=P(),a=f(()=>o(l.data.人物)),d=f(()=>s(m.value,0)),w=f(()=>l.data.人物===l.data.立ち絵2),r=f(()=>({width:"100cqw",height:"4cqw",bottom:"13.5cqw",left:w.value&&!l.isCG?"71cqw":"4cqw","font-size":"2.5cqw"}));return($,G)=>{const b=N("opacity");return c(),p("div",ms,[g((c(),p("div",{class:V(["absolute",[e(h).nameTag,e(y).nameTag]]),style:U(r.value)},[g((c(),p("div",hs,[(c(!0),p(q,null,H(e(m),i=>g((c(),p("div",{key:i.id,class:"-ui"},[g((c(),p("p",gs,[fe(A(i.name),1)])),[[b,!i.image_name]]),g(v(B,{class:"name_tag",src:i.image_name},null,8,["src"]),[[b,i.image_name]])])),[[b,i.id===a.value.id]])),128))])),[[b,!t.data.is_unknown]]),g((c(),p("div",fs,[v(B,{class:"name_tag",src:d.value.image_name},null,8,["src"])])),[[b,t.data.is_unknown]])],6)),[[b,!t.data.is_monolog]])])}}},ws=L(ys,[["__scopeId","data-v-82350970"]]),$s=3e3,bs={__name:"Black",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:black"],setup(t,{emit:l}){const n=t,h=l,y=f(()=>n.data.show_time==="暗場"),_=I({}),o=f(()=>(_.value.show_name??"").split(",")),m=f(()=>!o.value.includes("前")),s=f(()=>!o.value.includes("後"));f(()=>o.value.includes("續"));const a=I(!1),d=I(!1),w=()=>{if(y.value){if(_.value={...n.data},d.value=n.play&&m.value,a.value=!0,h("update:black",!0),!n.play)return;setTimeout(()=>{n.index>=n.length||h("update:index",n.index+1)},$s)}else d.value=n.play&&s.value,a.value=!1,h("update:black",!1)};return S(y,w),S(()=>n.play,w),(r,$)=>{const G=N("opacity");return g((c(),p("div",{class:V(["-ui z-20 bg-black",{"duration-1000":d.value}]),id:"Black"},null,2)),[[G,a.value]])}}},ks={class:"preview_title"},xs=["value"],Cs=["data-id"],Ss={class:"preview"},Bs={class:"-ui"},Is={__name:"index",setup(t){const l=te(),{fullscreen:n}=E(l),h=se(),{chapterIndex:y,chapterNames:_,chapterData:o}=E(h),m=W(),{logId:s,logIndex:a,logData:d,logContents:w,logHistory:r,logCGs:$,logCGMode:G,logPlay:b,logTyping:i,logBlack:C,playEase:O}=E(m),{getClientRect:T}=P(),D=()=>{b.value=!1,i.value=!1},ne=I(null),X=()=>{const z=[...ne.value].find(k=>k.dataset.id*1===s.value);if(!z)return;const{height:x,top:Z}=T(z);z.parentElement.scrollBy({top:Z-x,behavior:"smooth"})},ae=I(null);S(n,z=>{z?ae.value.requestFullscreen():document.exitFullscreen()});const le=I(null),oe=z=>le.value=z,Y=I(!1),Q=ye({id:0,type:""}),ie=(z,{type:x})=>{Q.id=z,Q.type=x??"",Y.value=!0},pe=z=>o.value.push(z),ve=z=>{s.value=z,setTimeout(X,100)};return(z,x)=>{const Z=N("opacity");return c(),F(be,{class:"flex-row-reverse",main:"!p-0",side:"!p-0 border-4 border-transparent"},{side_head:ee(()=>[v(xe,{positions:le.value,onClear:oe,onUse:x[0]||(x[0]=k=>ie("add",k)),onlyAdd:!0},null,8,["positions"]),u("section",ks,[g(u("select",{class:"preview_title_select","onUpdate:modelValue":x[1]||(x[1]=k=>j(y)?y.value=k:null)},[(c(!0),p(q,null,H(e(_),(k,J)=>(c(),p("option",{value:J},A(k),9,xs))),256))],512),[[we,e(y)]]),g(u("button",{class:"preview_button",onClick:X,title:"今の画面のセリフへ"},[v(Me)],512),[[M,!e(n)]]),u("button",{class:"preview_button",onClick:oe,title:"新規"},[v(e($e))])])]),side:ee(()=>[(c(!0),p(q,null,H(e(o),k=>(c(),p("div",{key:k.id,"data-id":k.id,ref_for:!0,ref_key:"logElem",ref:ne},[v(bt,{id:e(s),"onUpdate:id":x[2]||(x[2]=J=>j(s)?s.value=J:null),log:k,onEdit:J=>ie(k.id,{}),onDelete:J=>k.is_delete=!0,onStop:D},null,8,["id","log","onEdit","onDelete"])],8,Cs))),128))]),default:ee(()=>[u("section",{class:"preview_container",ref_key:"preview",ref:ae},[u("div",Ss,[u("div",Bs,[v(ts,{contents:e(r),all:e(o)},null,8,["contents","all"]),v(ls,{data:e(d),contents:e(r),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"]),v(cs,{data:e(d),contents:e(r),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"]),g(v(ds,{contents:e($),all:e(o),class:V(e(O))},null,8,["contents","all","class"]),[[Z,e(G)]]),v(_s,{data:e(d),contents:e(r),all:e(o),isCG:e(G)},null,8,["data","contents","all","isCG"])]),v(ws,{data:e(d),isCG:e(G)},null,8,["data","isCG"]),v(Zt,{data:e(d),play:e(b),typing:e(i),"onUpdate:typing":x[3]||(x[3]=k=>j(i)?i.value=k:null),black:e(C)},null,8,["data","play","typing","black"]),v(bs,{index:e(a),"onUpdate:index":x[4]||(x[4]=k=>j(a)?a.value=k:null),data:e(d),play:e(b),black:e(C),"onUpdate:black":x[5]||(x[5]=k=>j(C)?C.value=k:null),length:e(w).length-1},null,8,["index","data","play","black","length"])]),v(Xt,{index:e(a),"onUpdate:index":x[6]||(x[6]=k=>j(a)?a.value=k:null),play:e(b),"onUpdate:play":x[7]||(x[7]=k=>j(b)?b.value=k:null),typing:e(i),black:e(C),length:e(w).length-1,onTarget:X,onStop:D},null,8,["index","play","typing","black","length"])],512),v(Ce,{open:Y.value,"onUpdate:open":x[8]||(x[8]=k=>Y.value=k),id:Q.id,type:Q.type,onAdd:pe,onTarget:ve},null,8,["open","id","type"])]),_:1})}}},As=L(Is,[["__scopeId","data-v-feba3392"]]);export{As as default};
