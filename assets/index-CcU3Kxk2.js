import{_ as R,o as s,c,a as p,u as se,b as q,F as E,t as M,d as e,e as v,w as b,v as T,n as V,f as K,s as I,r as D,g as S,h as x,i as he,j as oe,k as ye,l as U,m as G,p as A,q as Le,x as te,y as W,z as pe,A as Te,B as Ee,C as P,D as me,E as De,G as Me,H as Ue}from"./index-DTP3OGN9.js";import{I as ve,a as ze,D as Pe}from"./IconDelete-lqLGKqev.js";import{u as Y,M as Ve,I as Ae,E as He}from"./EditPopup-DJL2jVIu.js";import{D as je,S as Oe}from"./Dialog-CS7KxtJO.js";import{W as Ge}from"./Wrap-BrIZEOP-.js";import{A as Re}from"./Aspect-CtWSo9X4.js";import{I as _e,S as Fe,U as qe}from"./UiItem-BsCO3CuO.js";import{R as We}from"./Range-DW_iE5-Z.js";import{_ as be}from"./Audio-CxlpiYxQ.js";import{_ as X}from"./Image-BIS8OZUj.js";/* empty css                                                             */const Ke={name:"RiShiningFill"},Je={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Qe=p("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10z"},null,-1),Xe=[Qe];function Ye(t,i,a,u,g,m){return s(),c("svg",Je,Xe)}const Ze=R(Ke,[["render",Ye]]),et={name:"RiShiningLine"},tt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},at=p("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10zm4.803 1A12.044 12.044 0 0 1 12 18.197A12.043 12.043 0 0 1 18.197 12A12.044 12.044 0 0 1 12 5.803A12.044 12.044 0 0 1 5.803 12"},null,-1),nt=[at];function st(t,i,a,u,g,m){return s(),c("svg",tt,nt)}const ot=R(et,[["render",st]]),lt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},it=p("path",{fill:"currentColor",d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1m0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1M4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18c-1.84 0-3.28 1.64-2.95 3.54c.21 1.21 1.2 2.2 2.41 2.41c1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),ct=[it];function ut(t,i){return s(),c("svg",lt,[...ct])}const rt={name:"ic-round-queue-music",render:ut},dt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},pt=p("path",{fill:"currentColor",d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"},null,-1),mt=[pt];function vt(t,i){return s(),c("svg",dt,[...mt])}const _t={name:"ic-sharp-keyboard-voice",render:vt},gt={class:"contents"},ft={class:"preview_log_head"},ht={class:"preview_log_title"},yt={class:"preview_log_subtitle !text-base"},bt={class:"preview_log_content"},wt={class:"preview_log_foot"},$t={class:"preview_log_head"},xt={class:"shrink-0 font-medium"},St={class:"preview_log_subtitle text-xs leading-none"},kt={class:"h-1em"},Bt={class:"h-1em"},Ct={class:"preview_log_content"},It={class:"preview_log_foot"},Nt={class:"preview_log_mark_1"},Lt={class:"preview_log_mark_1"},Tt={class:"preview_log_mark_1"},Et={__name:"LogItem",props:{id:{type:[Number,String],default:0},log:{type:[Object],default:()=>({})}},emits:["update:id","edit","delete","stop"],setup(t,{emit:i}){const a=i,u=se(),{getCharacter:g,getSprite:m}=u,$=q(),{getShowName:r}=$;return(f,o)=>(s(),c("article",{class:V(["preview_log",{"-active":t.log.id===t.id}])},[t.log.is_showtime?(s(),c(E,{key:0},[p("div",gt,[p("header",ft,[p("h6",ht,M(t.log.人物),1),p("p",yt,M(t.log.show_time),1)]),p("p",bt,M(e(r)(t.log.show_time,t.log.show_name)),1)]),p("footer",wt,[p("button",{class:"preview_button ml-auto",onClick:o[0]||(o[0]=l=>a("edit")),title:"編集"},[v(_e,{class:"text-[0.9em]"})]),p("button",{class:"preview_button ml-1",onClick:o[1]||(o[1]=l=>a("delete")),title:"削除"},[v(ve,{class:"text-[0.9em]"})])])],64)):(s(),c(E,{key:1},[p("button",{class:"group contents",onClick:o[2]||(o[2]=l=>{a("update:id",t.log.id),a("stop")})},[p("header",$t,[p("h6",xt,M(e(g)(t.log.人物).name),1),p("p",St,[p("span",kt,M(e(g)(t.log.顯示角色).name)+" / "+M(e(m)(t.log.顯示角色,t.log.角色差分).name),1),p("span",Bt,M(e(g)(t.log.立ち絵2).name)+" / "+M(e(m)(t.log.立ち絵2,t.log.十六夜差分).name),1)])]),p("p",Ct,M(t.log.和訳),1)]),p("footer",It,[b(p("span",Nt,"R",512),[[T,t.log.is_replay]]),b(p("span",Lt,"U",512),[[T,t.log.is_unknown]]),b(p("span",Tt,"S",512),[[T,t.log.is_monolog]]),b(v(Ze,{class:"preview_log_mark_2"},null,512),[[T,t.log.差分特效]]),b(v(ot,{class:"preview_log_mark_2"},null,512),[[T,t.log.主角特效]]),b(v(e(rt),{class:"preview_log_mark_2"},null,512),[[T,t.log.SE]]),b(v(e(_t),{class:"preview_log_mark_2"},null,512),[[T,t.log.Voice]]),p("button",{class:"preview_button ml-auto",onClick:o[3]||(o[3]=l=>a("edit")),title:"編集"},[v(_e,{class:"text-[0.9em]"})]),p("button",{class:"preview_button ml-1",onClick:o[4]||(o[4]=l=>a("delete")),title:"削除"},[v(ve,{class:"text-[0.9em]"})])])],64))],2))}},Dt=R(Et,[["__scopeId","data-v-81ce548e"]]),Mt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ut=p("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1),zt=[Ut];function Pt(t,i){return s(),c("svg",Mt,[...zt])}const Vt={name:"ic-baseline-stop",render:Pt},At={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ht=p("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1),jt=[Ht];function Ot(t,i){return s(),c("svg",At,[...jt])}const Gt={name:"ic-baseline-play-arrow",render:Ot},Rt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ft=p("path",{fill:"currentColor",d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"},null,-1),qt=[Ft];function Wt(t,i){return s(),c("svg",Rt,[...qt])}const ge={name:"ic-baseline-skip-previous",render:Wt},Kt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Jt=p("path",{fill:"currentColor",d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"},null,-1),Qt=[Jt];function Xt(t,i){return s(),c("svg",Kt,[...Qt])}const Yt={name:"ic-baseline-fullscreen",render:Xt},Zt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ea=p("path",{fill:"currentColor",d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"},null,-1),ta=[ea];function aa(t,i){return s(),c("svg",Zt,[...ta])}const na={name:"ic-baseline-fullscreen-exit",render:aa},sa={class:"control_outer group"},oa={class:"control"},la=["disabled"],ia=["disabled"],ca={__name:"Control",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1},voicing:{type:[Boolean],default:!1},animating:{type:[Boolean],default:!1}},emits:["update:index","update:play","target","stop"],setup(t,{emit:i}){const a=t,u=i,g=K(),{fullscreen:m,fontIntervals:$}=I(g),r=D(0);S(r,l=>u("update:index",l)),S(()=>a.index,l=>r.value=l,{immediate:!0});const f=x(()=>a.play&&!a.black&&!a.voicing&&!a.typing&&!a.animating),o=()=>{const l=r.value;f&&setTimeout(()=>{const n=r.value>=a.length&&!a.black;a.index===l&&f.value&&!n&&(r.value+=1),n&&u("update:play",!1),o()},$.value.sentence)};return S(()=>a.play,o),S(()=>a.typing,o),S(()=>a.voicing,o),S(()=>a.animating,o),(l,n)=>(s(),c("div",sa,[p("div",oa,[p("button",{class:"preview_button",onClick:n[0]||(n[0]=_=>{r.value-=1,u("stop")}),disabled:r.value===0,title:"前へ"},[v(e(ge))],8,la),p("button",{class:"preview_button",onClick:n[1]||(n[1]=_=>u("update:play",!t.play)),title:"プレイ"},[b(v(e(Gt),null,null,512),[[T,!t.play]]),b(v(e(Vt),null,null,512),[[T,t.play]])]),p("button",{class:"preview_button",onClick:n[2]||(n[2]=_=>{r.value+=1,u("stop")}),disabled:r.value===t.length,title:"次へ"},[v(e(ge),{class:"-scale-x-100"})],8,ia),v(We,{class:"mx-3 grow !bg-dark-text",value:r.value,"onUpdate:value":n[3]||(n[3]=_=>r.value=_),onChange:n[4]||(n[4]=_=>u("stop")),min:0,max:t.length,step:1,button:!1},null,8,["value","max"]),p("button",{class:"preview_button",onClick:n[5]||(n[5]=_=>m.value=!e(m)),title:"全画面モード"},[b(v(e(Yt),null,null,512),[[T,!e(m)]]),b(v(e(na),null,null,512),[[T,e(m)]])])])]))}},ua=R(ca,[["__scopeId","data-v-e4d50d6f"]]),ra={__name:"Comment",props:{data:{type:[Object],default:()=>({})},ui:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:typing"],setup(t,{emit:i}){const a=t,u=i,g=K(),{fontIntervals:m}=I(g),$=he(),{dialogType:r}=$,{getDialogStyle:f}=oe(),o=D({}),l=D(0),n=x(()=>o.value.和訳??""),_=x(()=>a.play?n.value.slice(0,l.value):n.value),y=x(()=>f(a.ui)),L=()=>{n.value&&(u("update:typing",!0),l.value=0)},w=()=>{if(!a.play||a.black)return;if(l.value===n.value.length)return u("update:typing",!1);setTimeout(()=>{a.typing?l.value+=1:l.value=n.value.length},m.value.word)};return S(()=>a.data,B=>{B.is_showtime||(o.value=B)}),S(o,L),S(n,w),S(_,w),S(l,w),S(()=>a.black,B=>{B||w()}),(B,k)=>(s(),c("article",{class:"preview_dialog",style:ye(y.value)},[v(je,{value:_.value,type:e(r)(t.data)},null,8,["value","type"])],4))}},da=R(ra,[["__scopeId","data-v-7dd70b74"]]),pa={class:"invisible",id:"Bgm"},ma={__name:"BGM",props:{contents:{type:[Array],default:()=>[]},play:{type:[Boolean],default:!1},pause:{type:[Boolean],default:!1}},setup(t){const i=t,a=K(),{audioVolume:u}=I(a),g=q(),{getHistoryList:m}=g,{bgmList:$}=I(g),r=x(()=>{var n;return(n=m(i.contents,"BGM"))==null?void 0:n.show_name}),f=x(()=>i.play&&!i.pause),o=D({}),l=(n,_)=>{n&&(_&&f.value?n.play():n.pause())};return S(r,(n,_)=>{_&&l(o.value[_],!1),n&&l(o.value[n],!0)}),S(f,()=>l(o.value[r.value],!0)),(n,_)=>(s(),c("div",pa,[(s(!0),c(E,null,U(e($),y=>(s(),G(be,{src:y.path,volume:e(u).bgm,loop:!0,ref_for:!0,ref:L=>o.value[y.id]=L},null,8,["src","volume"]))),256))]))}},va={class:"invisible",id:"Se"},_a={__name:"SE",props:{data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},pause:{type:[Boolean],default:!1},voicing:{type:[Boolean],default:!1}},emits:["update:voicing"],setup(t,{emit:i}){const a=t,u=K(),{audioVolume:g}=I(u),m=q(),{getSeByName:$}=m,{seList:r}=I(m),f=x(()=>a.data.SE),o=x(()=>a.play&&!a.pause),l=D({}),n=y=>{},_=(y,L)=>{y&&(L&&o.value?y.play():y.pause())};return S(f,(y,L)=>{y&&_(l.value[y],!0)}),S(o,()=>_(l.value[f.value],!0)),S(()=>a.data,()=>{var L,w;const y=((L=$("text_advancing"))==null?void 0:L.id)??"";_(l.value[y],!((w=a.data)!=null&&w.is_showtime)&&o.value)}),(y,L)=>(s(),c("div",va,[(s(!0),c(E,null,U(e(r),w=>(s(),G(be,{src:w.path,volume:e(g).se,onEnded:n,ref_for:!0,ref:B=>l.value[w.id]=B},null,8,["src","volume"]))),256))]))}},ga={class:"-ui z-10",id:"Se"},fa=["src"],ha={__name:"Video",props:{data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},pause:{type:[Boolean],default:!1},animating:{type:[Boolean],default:!1}},emits:["update:pause","update:animating"],setup(t,{emit:i}){const a=t,u=i,g=K(),{audioVolume:m}=I(g),$=q(),{videoList:r}=I($),{getUrl:f}=Le(),o=x(()=>a.data.show_time==="動畫"),l=x(()=>a.data.show_name),n=x(()=>m.value.bgm),_=D({}),y=w=>{u("update:animating",!1),u("update:pause",!1)},L=(w,B)=>{w&&(B&&a.play&&o.value?(u("update:animating",!0),u("update:pause",!0),w.volume=n.value,w.currentTime=0,w.play()):(w.currentTime=0,w.pause()))};return S(l,(w,B)=>{w&&L(_.value[w],!0)}),S(()=>a.play,()=>L(_.value[l.value],!0)),(w,B)=>{const k=A("opacity");return b((s(),c("div",ga,[(s(!0),c(E,null,U(e(r),N=>b((s(),c("video",{class:"-ui",src:e(f)(N.path),onEnded:y,ref_for:!0,ref:H=>_.value[N.id]=H},null,40,fa)),[[k,N.id===l.value]])),256))],512)),[[T,o.value]])}}},ya={class:"-ui bg-black",id:"Background"},ba={__name:"Background",props:{contents:{type:[Array],default:()=>[]}},setup(t){const i=t,a=Y(),{playEase:u}=I(a),g=q(),{getHistoryList:m}=g,{backgroundList:$}=I(g),r=x(()=>{var f;return(f=m(i.contents,"BG"))==null?void 0:f.show_name});return(f,o)=>{const l=A("opacity");return s(),c("div",ya,[(s(!0),c(E,null,U(e($),n=>b((s(),G(X,{class:V(["-ui",e(u)]),src:n.path,alt:n.name},null,8,["src","alt","class"])),[[l,n.id===r.value]])),256))])}}},wa={class:"-ui",id:"Effect"},$a={__name:"Effect",props:{name:{type:[String],default:""},data:{type:[Object],default:()=>({})}},setup(t){const i=Y(),{playEase:a}=I(i),u=q(),{effectList:g}=I(u);return(m,$)=>{const r=A("opacity");return s(),c("div",wa,[(s(!0),c(E,null,U(e(g),f=>b((s(),G(X,{class:V(["-ui",e(a)]),src:f.path,alt:f.name},null,8,["src","alt","class"])),[[r,f.id===t.data[t.name]]])),256))])}}},xa=["data-name"],Sa={__name:"Sprite",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},ui:{type:[Object],default:()=>({})},num:{type:[Number],default:1}},setup(t){const i=t,a=se(),{getSpriteNow:u}=a,{characterList:g}=I(a),m=Y(),{logCGMode:$,playEase:r}=I(m);te();const{getMask:f,geSpritePosition:o,geSpriteSize:l}=oe(),n={1:{name:"顯示角色",sprite:"角色差分",effect:"差分特效"},2:{name:"立ち絵2",sprite:"十六夜差分",effect:"主角特效"}},_=x(()=>n[i.num]??{}),y=x(()=>$.value?"人物":_.value.name),L=x(()=>u(i.contents,i.data[_.value.name],y.value,_.value.sprite)),w=x(()=>i.num===2?i.ui.sprite_number===2:!0),B=x(()=>"sprite_"+i.num);return x(()=>f(i.ui[B.value].mask)),x(()=>o(i.ui[B.value])),x(()=>l(i.ui[B.value])),(k,N)=>{const H=A("visible"),F=A("opacity");return b((s(),G(Fe,{id:"Sprite",data:t.ui[B.value],class:V(e(r))},{default:W(()=>[(s(!0),c(E,null,U(e(g),j=>b((s(),c("div",{key:j.id,class:V(["-ui",e(r)]),"data-name":j.name},[(s(!0),c(E,null,U(j.sprite??[],O=>b((s(),G(X,{key:O.id,class:"sprite",src:O.path,alt:O.name},null,8,["src","alt"])),[[H,O.id===L.value]])),128))],10,xa)),[[F,j.id===t.data[y.value]]])),128)),v($a,{name:_.value.effect,data:t.data},null,8,["name","data"])]),_:1},8,["data","class"])),[[F,w.value]])}}},fe=R(Sa,[["__scopeId","data-v-51ccc7c1"]]),ka={class:"-ui bg-black",id:"CG"},Ba={__name:"CG",props:{contents:{type:[Array],default:()=>[]}},setup(t){const i=t,a=q(),{getHistoryList:u}=a,{cgList:g}=I(a),m=x(()=>{var $;return($=u(i.contents,"CG"))==null?void 0:$.show_name});return($,r)=>{const f=A("opacity");return s(),c("div",ka,[(s(!0),c(E,null,U(e(g),o=>b((s(),G(X,{class:"-ui !object-cover",src:o.path,alt:o.name},null,8,["src","alt"])),[[f,o.id===m.value]])),256))])}}},Ca={class:"-ui",id:"UI"},Ia={__name:"UI",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]},ui:{type:[Number,String],default:()=>""}},setup(t){const i=Y(),{nameTag1Show:a,nameTag2Show:u,playEase:g}=I(i),m=q(),{uiList:$}=I(m);return te(),(r,f)=>{const o=A("opacity");return s(),c("div",Ca,[(s(!0),c(E,null,U(e($),l=>b((s(),G(qe,{class:V(["-ui",e(g)]),data:l,nameTag1Show:e(a),nameTag2Show:e(u)},null,8,["data","nameTag1Show","nameTag2Show","class"])),[[o,l.id===t.ui]])),256)),b(p("div",{class:V(["-ui -replay",e(g)])},null,2),[[o,t.data.is_replay]])])}}},Na=R(Ia,[["__scopeId","data-v-759e1103"]]),La={class:"-ui",id:"NameTag"},Ta={class:"-ui"},Ea={class:"name_tag -font"},Da={class:"-ui"},Ma={class:"name_tag -font"},Ua={__name:"NameTag",props:{data:{type:[Object],default:()=>({})},ui:{type:[Object],default:()=>({})}},setup(t){const i=t,a=K(),{fontFamily:u,fontWeight:g}=I(a),m=se(),{getCharacter:$}=m,{characterList:r,characterUnknown:f}=I(m),o=Y(),{isNameRight:l,isNameShow:n}=I(o);te();const{getNameTagStyle:_}=oe(),y=x(()=>$(i.data.人物)),L=x(()=>{const w=l.value?"name_tag_2":"name_tag_1";return _(i.ui[w])});return(w,B)=>{const k=A("opacity");return s(),c("div",La,[b((s(),c("div",{class:V(["absolute",[e(u).nameTag,e(g).nameTag]]),style:ye(L.value)},[b((s(),c("div",Ta,[(s(!0),c(E,null,U(e(r),N=>b((s(),c("div",{key:N.id,class:"-ui"},[b((s(),c("p",Ea,[pe(M(N.name),1)])),[[k,!N.image_name]]),b(v(X,{class:"name_tag",src:N.image_name,alt:N.name},null,8,["src","alt"]),[[k,N.image_name]])])),[[k,N.id===y.value.id]])),128))])),[[k,!t.data.is_unknown]]),b((s(),c("div",Da,[b((s(),c("p",Ma,[pe(M(e(f).name),1)])),[[k,!e(f).image_name]]),v(X,{class:"name_tag",src:e(f).image_name,alt:e(f).name},null,8,["src","alt"])])),[[k,t.data.is_unknown]])],6)),[[k,e(n)]])])}}},za=R(Ua,[["__scopeId","data-v-374d9ef3"]]),Pa=3e3,Va={__name:"Black",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},pause:{type:[Boolean],default:!1},black:{type:[Boolean],default:!1}},emits:["update:index","update:pause","update:black"],setup(t,{emit:i}){const a=t,u=i,g=x(()=>a.data.show_time==="暗場"),m=D({}),$=x(()=>(m.value.show_name??"").split(",")),r=x(()=>!$.value.includes("前")),f=x(()=>!$.value.includes("後")),o=x(()=>g.value&&!$.value.includes("續")),l=D(!1),n=D(!1),_=()=>{if(g.value){if(m.value={...a.data},n.value=a.play&&r.value,l.value=!0,u("update:black",!0),!a.play)return;setTimeout(()=>{a.index>=a.length||u("update:index",a.index+1)},Pa)}else n.value=a.play&&f.value,l.value=!1,u("update:black",!1)};return S(g,_),S(()=>a.play,_),S(o,y=>u("update:pause",y)),(y,L)=>{const w=A("opacity");return b((s(),c("div",{class:V(["-ui z-20 bg-black",{"duration-1000":n.value}]),id:"Black"},null,2)),[[w,l.value]])}}},Aa={class:"preview_title"},Ha=["value"],ja=["onDragstart","onDragend","data-id"],Oa={class:"contents"},Ga={class:"-ui"},Ra={__name:"index",setup(t){const i=Te(),a=K(),{fullscreen:u}=I(a),g=he(),{chapterIndex:m,chapterNames:$,chapterData:r}=I(g),f=Y(),{logId:o,logIndex:l,logData:n,logContents:_,logHistory:y,logCGMode:L,logUIId:w,logUI:B,logPlay:k,logPause:N,logTyping:H,logBlack:F,logVoicing:j,logAnimating:O,playEase:we}=I(f),{getClientRect:$e}=te(),{dragMove:xe,dropMove:Se}=Ue(),ae=()=>{k.value=!1,H.value=!1};S(m,ae);const ke=x(()=>r.value.some(C=>C.dragging)),le=(C,d,Q)=>{Q&&xe(C,{index:d}),r.value[d].dragging=Q},Be=(C,d)=>Se(r.value,C.index,d),ie=D({}),J=()=>{Me(()=>{const C=ie.value[o.value];if(!C)return;const{height:d,top:Q}=$e(C);C.parentElement.scrollBy({top:Q-d,behavior:"smooth"})})};S(o,()=>{k.value&&J()}),S(m,J),S(()=>i.name,C=>{C==="Preview"&&J()});const ce=D(null);S(u,C=>{window.api?window.api.fullscreen(C):C?ce.value.requestFullscreen():document.exitFullscreen()});const ue=D(null),re=C=>ue.value=C,ne=D(!1),ee=Ee({id:0,type:""}),de=(C,{type:d})=>{ee.id=C,ee.type=d??"",ne.value=!0},Ce=C=>r.value.push(C),Ie=C=>{o.value=C,setTimeout(J,100)};return(C,d)=>{const Q=A("opacity"),Ne=A("visible");return s(),G(Ge,{class:"flex-row-reverse",main:"!p-0",side:"!p-0 border-4 border-transparent"},{side_head:W(()=>[v(Ve,{positions:ue.value,onClear:re,onUse:d[0]||(d[0]=h=>de("add",h)),onlyAdd:!0},null,8,["positions"]),p("section",Aa,[v(Oe,{class:"preview_title_select",value:e(m),"onUpdate:value":d[1]||(d[1]=h=>P(m)?m.value=h:null)},{default:W(()=>[(s(!0),c(E,null,U(e($),(h,Z)=>(s(),c("option",{value:Z},M(h),9,Ha))),256))]),_:1},8,["value"]),b(p("button",{class:"preview_button",onClick:J,title:"今のセリフ画面へ"},[v(Ae)],512),[[T,!e(u)]]),p("button",{class:"preview_button",onClick:re,title:"新規"},[v(e(ze))])])]),side:W(()=>[(s(!0),c(E,null,U(e(r),(h,Z)=>b((s(),c("div",{key:h.id,class:V(["relative",{"-dragging":h.dragging}]),draggable:!0,onDragstart:z=>le(z,Z,!0),onDragend:z=>le(z,Z,!1),onDrag:d[3]||(d[3]=me(()=>{},["prevent"])),onDrop:d[4]||(d[4]=me(()=>{},["prevent"])),"data-id":h.id,ref_for:!0,ref:z=>ie.value[h.id]=z},[v(Dt,{id:e(o),"onUpdate:id":d[2]||(d[2]=z=>P(o)?o.value=z:null),log:h,onEdit:z=>de(h.id,{}),onDelete:z=>h.is_delete=!0,onStop:ae},null,8,["id","log","onEdit","onDelete"]),v(Pe,{class:"preview_dragline !h-1 !text-secondary/50",onDrop:z=>Be(z,Z+1),dragging:ke.value},null,8,["onDrop","dragging"])],42,ja)),[[T,!h.is_delete]])),128))]),default:W(()=>[p("div",{class:"preview",onKeydown:d[14]||(d[14]=De(h=>k.value=!e(k),["space"])),tabindex:"0",ref_key:"preview",ref:ce},[v(Re,{box:"lattice"},{outer:W(()=>[v(ua,{index:e(l),"onUpdate:index":d[12]||(d[12]=h=>P(l)?l.value=h:null),play:e(k),"onUpdate:play":d[13]||(d[13]=h=>P(k)?k.value=h:null),typing:e(H),black:e(F),voicing:e(j),animating:e(O),length:e(_).length-1,onTarget:J,onStop:ae},null,8,["index","play","typing","black","voicing","animating","length"])]),default:W(()=>[p("div",Oa,[v(ma,{contents:e(y),play:e(k),pause:e(N)},null,8,["contents","play","pause"]),v(_a,{data:e(n),play:e(k),pause:e(N),voicing:e(j),"onUpdate:voicing":d[5]||(d[5]=h=>P(j)?j.value=h:null)},null,8,["data","play","pause","voicing"])]),b((s(),c("div",Ga,[v(ba,{contents:e(y)},null,8,["contents"]),v(fe,{data:e(n),contents:e(y),ui:e(B),num:1},null,8,["data","contents","ui"]),v(fe,{data:e(n),contents:e(y),ui:e(B),num:2},null,8,["data","contents","ui"]),b(v(Ba,{contents:e(y),class:V(e(we))},null,8,["contents","class"]),[[Q,e(L)]]),v(Na,{data:e(n),contents:e(y),ui:e(w)},null,8,["data","contents","ui"])])),[[Ne,e(r).length]]),v(za,{data:e(n),ui:e(B)},null,8,["data","ui"]),v(da,{data:e(n),ui:e(B),play:e(k),typing:e(H),"onUpdate:typing":d[6]||(d[6]=h=>P(H)?H.value=h:null),black:e(F)},null,8,["data","ui","play","typing","black"]),v(Va,{index:e(l),"onUpdate:index":d[7]||(d[7]=h=>P(l)?l.value=h:null),data:e(n),play:e(k),pause:e(N),"onUpdate:pause":d[8]||(d[8]=h=>P(N)?N.value=h:null),black:e(F),"onUpdate:black":d[9]||(d[9]=h=>P(F)?F.value=h:null),length:e(_).length-1},null,8,["index","data","play","pause","black","length"]),v(ha,{data:e(n),play:e(k),pause:e(N),"onUpdate:pause":d[10]||(d[10]=h=>P(N)?N.value=h:null),animating:e(O),"onUpdate:animating":d[11]||(d[11]=h=>P(O)?O.value=h:null)},null,8,["data","play","pause","animating"])]),_:1})],544),v(He,{open:ne.value,"onUpdate:open":d[15]||(d[15]=h=>ne.value=h),id:ee.id,type:ee.type,onAdd:Ce,onTarget:Ie},null,8,["open","id","type"])]),_:1})}}},an=R(Ra,[["__scopeId","data-v-4625484d"]]);export{an as default};
