import{_ as M,o as r,c as m,a as t,r as T,g as te,w as y,I as me,n as d,t as C,J as ce,p as ie,j as L,u as fe,s as R,h as be,b as we,B as ye,x as De,z as B,C as w,e as a,d as l,y as se,F as W,v as z,E,A as F,K as ke,L as xe,H as Ce}from"./index-CyJrGj8D.js";import{a as ae,I as Se,D as le}from"./IconDelete-CJ2MkJpE.js";import{_ as Ie,D as $e}from"./Dialog-CESR4OxB.js";import{W as Te}from"./Wrap-BFrSN4i_.js";import{C as j}from"./Control-UlmGQt4H.js";import{M as Le,E as Me}from"./EditPopup-CJ7CgR6S.js";import{M as Ae}from"./Mark-LY1TmJFc.js";import{A as qe}from"./Avatar-D1wRVGj7.js";import"./round-drag-indicator-BvIf1Phh.js";/* empty css                                                             */import"./Image-DSnKcMXH.js";const Ue={name:"MaterialSymbolsArrowWarmUpRounded"},Be={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ee=t("path",{fill:"currentColor",d:"M12 13q-.425 0-.712-.288T11 12V5.825L7.1 9.7q-.275.275-.687.288T5.7 9.7q-.275-.275-.275-.7t.275-.7l5.6-5.6q.15-.15.325-.212T12 2.425t.375.063t.325.212l5.6 5.6q.275.275.275.688T18.3 9.7q-.3.3-.712.3t-.713-.3L13 5.825V12q0 .425-.288.713T12 13m0 5q-.425 0-.712-.288T11 17v-1q0-.425.288-.712T12 15t.713.288T13 16v1q0 .425-.288.713T12 18m0 4q-.425 0-.712-.288T11 21t.288-.712T12 20t.713.288T13 21t-.288.713T12 22"},null,-1),Ve=[Ee];function Ne(c,_,f,b,v,h){return r(),m("svg",Be,Ve)}const oe=M(Ue,[["render",Ne]]),Pe=["disabled"],Re={class:"whitespace-nowrap"},We={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(c,{emit:_}){const f=c,b=_,v=T(0);return te(v,h=>b("update:value",h)),te(()=>f.value,h=>v.value=h,{immediate:!0}),(h,k)=>(r(),m("label",{class:d(["inline-flex items-center",c.disabled?"cursor-auto":"cursor-pointer"])},[y(t("input",{class:d(["checkbox",c.box]),"onUpdate:modelValue":k[0]||(k[0]=S=>v.value=S),disabled:c.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,Pe),[[me,v.value]]),t("span",Re,C(c.title),1),ce(h.$slots,"default",{},void 0,!0)],2))}},ne=M(We,[["__scopeId","data-v-b7a95cdd"]]),ze={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(c){return(_,f)=>(r(),m("button",{class:d(["switch",{"bg-current":c.active}])},[t("span",{class:d(["-mt-0.1em",{"text-white":c.active}])},[ce(_.$slots,"default",{},void 0,!0)],2)],2))}},V=M(ze,[["__scopeId","data-v-8bd1e4e9"]]),Fe={__name:"Inner",props:{value:{type:[Number,String],default:void 0},list:{type:[Array],default:()=>[]}},setup(c){const _=c,{findData:f}=ie(),b=L(()=>f(_.list,_.value)),v=L(()=>_.list.length?_.value!==""&&!b.value:!1),h=L(()=>({"!bg-red-500/50":v.value}));return(k,S)=>{var I;return r(),m("div",{class:d(["inner",h.value])},C(((I=b.value)==null?void 0:I.name)??c.value),3)}}},g=M(Fe,[["__scopeId","data-v-f76532d2"]]),D=c=>(ke("data-v-5544d040"),c=c(),xe(),c),je={class:"side_list"},He={class:"flex"},Je=["onClick","title"],Ke={class:"chapter_head"},Oe=["disabled"],Ge=["disabled"],Qe={class:"chapter_log"},Xe={class:"chapter_log_tr -lock"},Ye={class:"mx-1 w-14 self-center"},Ze=D(()=>t("div",{class:"chapter_log_th xl:ml-0"},"セリフ＆切り替え＆演出",-1)),et=D(()=>t("div",{class:"ml-3 w-7 shrink-0 xl:hidden"},null,-1)),tt=D(()=>t("div",{class:"chapter_log_tr_2 -lock"},[t("div",{class:"chapter_log_th -col"},"立ち絵1．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"立ち絵2．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"SE＆ボイス"),t("div",{class:"chapter_log_th -col"},"備考")],-1)),st={key:0,class:"contents"},at=["onDragstart","onDragend"],lt={class:"chapter_log_scene"},ot=D(()=>t("div",{class:"chapter_log_switches xl:!hidden"},null,-1)),nt={class:"chapter_log_tr_2"},ct=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),it=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),rt=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),dt={class:"chapter_log_td -col"},ut={key:1,class:"contents"},_t=["onDragstart","onDragend"],pt={class:"chapter_log_comment"},vt={class:"chapter_log_switches"},ht={class:"chapter_log_tr_2"},gt={class:"chapter_log_td -col"},mt={class:"chapter_log_td -col"},ft={class:"chapter_log_td -col"},bt={class:"chapter_log_td -col"},wt={__name:"index",setup(c){const _=fe(),{getCharacter:f}=_,{characterList:b}=R(_),v=be(),{dialogType:h,newChapter:k,deleteChapter:S,moveChapter:I}=v,{chapterIndex:$,chapterNames:re,chapterLength:H,chapterTarget:J,chapterData:p}=R(v),K=we(),{getShowName:de,getSe:yt}=K,{effectList:O,backgroundList:Dt,cgList:kt,bgmList:xt,seList:Ct}=R(K),{findData:ue,findIndex:_e}=ie(),{dragMove:pe,dropMove:ve}=Ce(),G=o=>f(o.人物),Q=L(()=>p.value.some(o=>o.dragging)),N=L(()=>p.value.filter(o=>o.is_selected).map(o=>o.id)),A=(o,s,u)=>{u&&pe(o,{index:s}),N.value.some(i=>p.value[s].id===i)||(p.value[s].is_selected=1),N.value.forEach(i=>{const n=ue(p.value,i);n.dragging=u,u||(n.is_selected=0)})},X=(o,s)=>{N.value.forEach(u=>{const e=_e(p.value,u);ve(p.value,e,s)})},Y=T(!1),q=T(0),Z=T(null),U=(o,s)=>{q.value=s,Z.value=o,Y.value=s===null},he=({type:o})=>{const s=q.value,u=p.value[s];o==="delete"?u.is_delete=!0:o==="edit"?ee(u.id,{}):o==="copy"?p.value.splice(s,0,{...u}):ee("add",{type:o})},P=T(!1),x=ye({id:0,type:"",index:0}),ee=(o,{type:s})=>{x.id=o,x.type=s??"",x.index=q.value,P.value=!0},ge=o=>{const s=q.value===null?p.value.length:x.index+1;p.value.splice(s,0,o)};return(o,s)=>{const u=De("visible");return r(),B(Te,null,{side_foot:w(()=>[t("button",{class:"chapter_add",onClick:s[0]||(s[0]=(...e)=>l(k)&&l(k)(...e)),title:"新規"},[a(l(ae))])]),side:w(()=>[t("ul",je,[(r(!0),m(W,null,se(l(re),(e,i)=>(r(),m("li",He,[a(Ae,{class:"chapter_mark",active:i===l($)},null,8,["active"]),t("button",{class:d(["side_item",{"side_item-active":i===l($)}]),onClick:n=>$.value=i,title:e},C(e),11,Je)]))),256))])]),main_head:w(()=>[t("header",Ke,[a(Ie,{class:"chapter_head_title",value:l(J).title,"onUpdate:value":s[1]||(s[1]=e=>l(J).title=e),placeholder:"タイトル"},null,8,["value"]),t("button",{class:"chapter_head_button",onClick:s[2]||(s[2]=e=>l(I)(-1)),disabled:!l($),title:"上に移動"},[a(oe)],8,Oe),t("button",{class:"chapter_head_button",onClick:s[3]||(s[3]=e=>l(I)(1)),disabled:!l(H)||l($)===l(H)-1,title:"下に移動"},[a(oe,{class:"-scale-y-100"})],8,Ge),t("button",{class:"chapter_head_button",onClick:s[4]||(s[4]=(...e)=>l(S)&&l(S)(...e)),title:"削除"},[a(Se)])])]),default:w(()=>[t("div",Qe,[t("div",Xe,[t("div",Ye,[a(V,{class:"chapter_plus",title:"新規"},{default:w(()=>[a(l(ae),{class:"mt-0.1em"}),a(j,{class:"absolute left-0 top-0 opacity-0",onMore:s[5]||(s[5]=e=>U(e,null)),hasDel:!1,hasAdd:!1})]),_:1})]),Ze,et]),tt,a(le,{class:"chapter_log_dragline",onDrop:s[6]||(s[6]=e=>X(e,0)),dragging:Q.value},null,8,["dragging"]),(r(!0),m(W,null,se(l(p),(e,i)=>(r(),m(W,{key:e.id},[e.is_showtime?y((r(),m("section",st,[t("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>A(n,i,!0),onDragend:n=>A(n,i,!1),onDrag:s[7]||(s[7]=E(()=>{},["prevent"])),onDrop:s[8]||(s[8]=E(()=>{},["prevent"]))},[t("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ne,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(j,{class:"chapter_log_control",onMore:n=>U(n,i),hasDel:!1,hasAdd:!1},null,8,["onMore"]),t("div",lt,[t("span",null,C(e.人物),1),t("span",null,C(e.show_time),1),t("span",null,C(l(de)(e.show_time,e.show_name)),1)])],2),ot],42,at),t("div",nt,[ct,it,rt,t("div",dt,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[z,!e.is_delete]]):y((r(),m("section",ut,[t("div",{class:d(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>A(n,i,!0),onDragend:n=>A(n,i,!1),onDrag:s[9]||(s[9]=E(()=>{},["prevent"])),onDrop:s[10]||(s[10]=E(()=>{},["prevent"]))},[t("div",{class:d(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ne,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(j,{class:"chapter_log_control",onMore:n=>U(n,i),onDel:n=>e.is_delete=!0,hasDel:!1,hasAdd:!1},null,8,["onMore","onDel"]),t("div",{class:d(["chapter_log_info",{"flex-row-reverse":G(e).is_hero,"-replay":e.is_replay}])},[a(qe,{class:"chapter_log_avatar",name:G(e).name??e.人物},null,8,["name"]),t("div",pt,[a($e,{class:"chapter_log_dialog",value:e.和訳,type:l(h)(e)},null,8,["value","type"])])],2)],2),t("div",vt,[y((r(),B(V,{class:d(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:w(()=>[F("R")]),_:2},1032,["active","class"])),[[u,e.is_replay]]),y((r(),B(V,{class:d(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未解明"},{default:w(()=>[F("U")]),_:2},1032,["active","class"])),[[u,e.is_unknown]]),y((r(),B(V,{class:d(["chapter_log_switch",{"-monolog":e.is_monolog}]),active:e.is_monolog,title:"独り言"},{default:w(()=>[F("S")]),_:2},1032,["active","class"])),[[u,e.is_monolog]])])],42,_t),t("div",ht,[t("div",gt,[a(g,{class:"col-span-2",value:e.顯示角色,list:l(b)},null,8,["value","list"]),a(g,{value:e.角色差分,list:l(f)(e.顯示角色).sprite},null,8,["value","list"]),a(g,{value:e.差分特效,list:l(O)},null,8,["value","list"])]),t("div",mt,[a(g,{class:"col-span-2",value:e.立ち絵2,list:l(b)},null,8,["value","list"]),a(g,{value:e.十六夜差分,list:l(f)(e.立ち絵2).sprite},null,8,["value","list"]),a(g,{value:e.主角特效,list:l(O)},null,8,["value","list"])]),t("div",ft,[a(g,{value:e.SE},null,8,["value"]),a(g,{value:e.Voice},null,8,["value"])]),t("div",bt,[a(g,{value:e.備註},null,8,["value"])])])],512)),[[z,!e.is_delete]]),y(a(le,{class:"chapter_log_dragline",onDrop:n=>X(n,i+1),dragging:Q.value},null,8,["onDrop","dragging"]),[[z,!e.is_delete]])],64))),128))]),a(Le,{positions:Z.value,onClear:U,onUse:he,onlyAdd:Y.value},null,8,["positions","onlyAdd"]),a(Me,{open:P.value,"onUpdate:open":s[11]||(s[11]=e=>P.value=e),id:x.id,type:x.type,onAdd:ge},null,8,["open","id","type"])]),_:1})}}},Vt=M(wt,[["__scopeId","data-v-5544d040"]]);export{Vt as default};
