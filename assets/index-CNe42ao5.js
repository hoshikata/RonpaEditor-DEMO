import{o as r,c as h,a as t,_ as M,r as I,g as te,w as y,I as me,n as u,t as L,J as ce,p as ie,j as T,u as fe,s as R,h as be,b as we,B as ye,x as De,z as B,C as w,e as a,d as l,y as se,F as z,v as W,E,A as F,K as xe,L as ke,H as Ce}from"./index-Qp80mG48.js";import{a as ae,I as Se,D as le}from"./IconDelete-BDehSsgR.js";import{_ as $e,D as Ie}from"./Dialog-TxlSTQrL.js";import{W as Le}from"./Wrap-VGF5L2Mw.js";import{C as j}from"./Control-CRlSZrxD.js";import{M as Te,E as Me}from"./EditPopup-DnYzVzr-.js";import{M as Ae}from"./Mark-C7FgoxU6.js";import{A as qe}from"./Avatar-DGqZQlD3.js";import"./round-drag-indicator-D4P1xoSl.js";/* empty css                                                             */import"./Image-CWT6Rk6-.js";const Ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Be=t("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0c.41-.41.41-1.08 0-1.49zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"},null,-1),Ee=[Be];function Ve(c,d){return r(),h("svg",Ue,[...Ee])}const Ne={name:"ic-round-search",render:Ve},Pe={name:"MaterialSymbolsArrowWarmUpRounded"},Re={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},ze=t("path",{fill:"currentColor",d:"M12 13q-.425 0-.712-.288T11 12V5.825L7.1 9.7q-.275.275-.687.288T5.7 9.7q-.275-.275-.275-.7t.275-.7l5.6-5.6q.15-.15.325-.212T12 2.425t.375.063t.325.212l5.6 5.6q.275.275.275.688T18.3 9.7q-.3.3-.712.3t-.713-.3L13 5.825V12q0 .425-.288.713T12 13m0 5q-.425 0-.712-.288T11 17v-1q0-.425.288-.712T12 15t.713.288T13 16v1q0 .425-.288.713T12 18m0 4q-.425 0-.712-.288T11 21t.288-.712T12 20t.713.288T13 21t-.288.713T12 22"},null,-1),We=[ze];function Fe(c,d,f,b,g,m){return r(),h("svg",Re,We)}const oe=M(Pe,[["render",Fe]]),je=["disabled"],He={class:"whitespace-nowrap"},Je={__name:"Checkbox",props:{value:{type:[Number],default:0},disabled:{type:[Boolean],default:!1},title:{type:[String],default:""},box:{type:[String],default:""}},emits:["update:value"],setup(c,{emit:d}){const f=c,b=d,g=I(0);return te(g,m=>b("update:value",m)),te(()=>f.value,m=>g.value=m,{immediate:!0}),(m,x)=>(r(),h("label",{class:u(["inline-flex items-center",c.disabled?"cursor-auto":"cursor-pointer"])},[y(t("input",{class:u(["checkbox",c.box]),"onUpdate:modelValue":x[0]||(x[0]=C=>g.value=C),disabled:c.disabled,"true-value":1,"false-value":0,type:"checkbox"},null,10,je),[[me,g.value]]),t("span",He,L(c.title),1),ce(m.$slots,"default",{},void 0,!0)],2))}},ne=M(Je,[["__scopeId","data-v-b7a95cdd"]]),Ke={__name:"Switch",props:{active:{type:[Boolean],default:!1}},setup(c){return(d,f)=>(r(),h("button",{class:u(["switch",{"bg-current":c.active}])},[t("span",{class:u(["-mt-0.1em",{"text-white":c.active}])},[ce(d.$slots,"default",{},void 0,!0)],2)],2))}},V=M(Ke,[["__scopeId","data-v-8bd1e4e9"]]),Oe={__name:"Inner",props:{value:{type:[Number,String],default:void 0},list:{type:[Array],default:()=>[]},type:{type:[String],default:""}},setup(c){const d=c,{findData:f}=ie(),b=T(()=>f(d.list,d.value)),g=T(()=>d.list.length?d.value!==""&&!b.value:!1),m=T(()=>({"-showtime":d.type==="showtime","!bg-red-500/50":g.value}));return(x,C)=>{var S;return r(),h("div",{class:u(["inner",m.value])},L(((S=b.value)==null?void 0:S.name)??c.value),3)}}},v=M(Oe,[["__scopeId","data-v-11a9e61f"]]),D=c=>(xe("data-v-76448515"),c=c(),ke(),c),Ge={class:"side_list"},Qe={class:"flex"},Xe=["onClick","title"],Ye={class:"chapter_head"},Ze=["disabled"],et=["disabled"],tt={class:"chapter_log"},st={class:"chapter_log_tr -lock"},at={class:"mx-1 w-14 self-center"},lt=D(()=>t("div",{class:"chapter_log_th xl:ml-0"},"セリフ＆切り替え＆演出",-1)),ot=D(()=>t("div",{class:"ml-3 w-7 shrink-0 xl:hidden"},null,-1)),nt=D(()=>t("div",{class:"chapter_log_tr_2 -lock"},[t("div",{class:"chapter_log_th -col"},"立ち絵1．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"立ち絵2．差分＆エフェクト"),t("div",{class:"chapter_log_th -col"},"SE＆ボイス"),t("div",{class:"chapter_log_th -col"},"備考")],-1)),ct={key:0,class:"contents"},it=["onDragstart","onDragend"],rt={class:"chapter_log_scene"},dt=D(()=>t("div",{class:"chapter_log_switches xl:!hidden"},null,-1)),ut={class:"chapter_log_tr_2"},_t=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),pt=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),vt=D(()=>t("div",{class:"chapter_log_td -col"},null,-1)),ht={class:"chapter_log_td -col"},gt={key:1,class:"contents"},mt=["onDragstart","onDragend"],ft={class:"chapter_log_comment"},bt={class:"chapter_log_switches"},wt={class:"chapter_log_tr_2"},yt={class:"chapter_log_td -col"},Dt={class:"chapter_log_td -col"},xt={class:"chapter_log_td -col"},kt={class:"chapter_log_td -col"},Ct={__name:"index",setup(c){const d=fe(),{getCharacter:f}=d,{characterList:b}=R(d),g=be(),{dialogType:m,newChapter:x,deleteChapter:C,moveChapter:S}=g,{chapterIndex:$,chapterNames:re,chapterLength:H,chapterTarget:J,chapterData:p}=R(g),K=we(),{getSe:St,getShowList:de}=K,{effectList:O,backgroundList:$t,cgList:It,bgmList:Lt,seList:Tt}=R(K),{findData:ue,findIndex:_e}=ie(),{dragMove:pe,dropMove:ve}=Ce(),G=o=>f(o.人物),Q=T(()=>p.value.some(o=>o.dragging)),N=T(()=>p.value.filter(o=>o.is_selected).map(o=>o.id)),A=(o,s,_)=>{_&&pe(o,{index:s}),N.value.some(i=>p.value[s].id===i)||(p.value[s].is_selected=1),N.value.forEach(i=>{const n=ue(p.value,i);n.dragging=_,_||(n.is_selected=0)})},X=(o,s)=>{N.value.forEach(_=>{const e=_e(p.value,_);ve(p.value,e,s)})},Y=I(!1),q=I(0),Z=I(null),U=(o,s)=>{q.value=s,Z.value=o,Y.value=s===null},he=({type:o})=>{const s=q.value,_=p.value[s];o==="delete"?_.is_delete=!0:o==="edit"?ee(_.id,{}):o==="copy"?p.value.splice(s,0,{..._}):ee("add",{type:o})},P=I(!1),k=ye({id:0,type:"",index:0}),ee=(o,{type:s})=>{k.id=o,k.type=s??"",k.index=q.value,P.value=!0},ge=o=>{const s=q.value===null?p.value.length:k.index+1;p.value.splice(s,0,o)};return(o,s)=>{const _=De("visible");return r(),B(Le,null,{side_foot:w(()=>[t("button",{class:"chapter_add",onClick:s[0]||(s[0]=(...e)=>l(x)&&l(x)(...e)),title:"新規"},[a(l(ae))])]),side:w(()=>[t("ul",Ge,[(r(!0),h(z,null,se(l(re),(e,i)=>(r(),h("li",Qe,[a(Ae,{class:"chapter_mark",active:i===l($)},null,8,["active"]),t("button",{class:u(["side_item",{"side_item-active":i===l($)}]),onClick:n=>$.value=i,title:e},L(e),11,Xe)]))),256))])]),main_head:w(()=>[t("header",Ye,[a($e,{class:"chapter_head_title",value:l(J).title,"onUpdate:value":s[1]||(s[1]=e=>l(J).title=e),placeholder:"タイトル"},null,8,["value"]),t("button",{class:"chapter_head_button",onClick:s[2]||(s[2]=()=>{}),title:"サーチ"},[a(l(Ne),{class:"!text-xl"})]),t("button",{class:"chapter_head_button",onClick:s[3]||(s[3]=e=>l(S)(-1)),disabled:!l($),title:"上に移動"},[a(oe)],8,Ze),t("button",{class:"chapter_head_button",onClick:s[4]||(s[4]=e=>l(S)(1)),disabled:!l(H)||l($)===l(H)-1,title:"下に移動"},[a(oe,{class:"-scale-y-100"})],8,et),t("button",{class:"chapter_head_button",onClick:s[5]||(s[5]=(...e)=>l(C)&&l(C)(...e)),title:"削除"},[a(Se)])])]),default:w(()=>[t("div",tt,[t("div",st,[t("div",at,[a(V,{class:"chapter_plus",title:"新規"},{default:w(()=>[a(l(ae),{class:"mt-0.1em"}),a(j,{class:"absolute left-0 top-0 opacity-0",onMore:s[6]||(s[6]=e=>U(e,null)),hasDel:!1,hasAdd:!1})]),_:1})]),lt,ot]),nt,a(le,{class:"chapter_log_dragline",onDrop:s[7]||(s[7]=e=>X(e,0)),dragging:Q.value},null,8,["dragging"]),(r(!0),h(z,null,se(l(p),(e,i)=>(r(),h(z,{key:e.id},[e.is_showtime?y((r(),h("section",ct,[t("div",{class:u(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>A(n,i,!0),onDragend:n=>A(n,i,!1),onDrag:s[8]||(s[8]=E(()=>{},["prevent"])),onDrop:s[9]||(s[9]=E(()=>{},["prevent"]))},[t("div",{class:u(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ne,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(j,{class:"chapter_log_control",onMore:n=>U(n,i),hasDel:!1,hasAdd:!1},null,8,["onMore"]),t("div",rt,[t("span",null,L(e.人物),1),t("span",null,L(e.show_time),1),a(v,{value:e.show_name,list:l(de)(e.show_time),type:"showtime"},null,8,["value","list"])])],2),dt],42,it),t("div",ut,[_t,pt,vt,t("div",ht,[a(v,{value:e.備註},null,8,["value"])])])],512)),[[W,!e.is_delete]]):y((r(),h("section",gt,[t("div",{class:u(["chapter_log_tr",{"-dragging":e.dragging}]),draggable:!0,onDragstart:n=>A(n,i,!0),onDragend:n=>A(n,i,!1),onDrag:s[10]||(s[10]=E(()=>{},["prevent"])),onDrop:s[11]||(s[11]=E(()=>{},["prevent"]))},[t("div",{class:u(["chapter_log_td -first",{"bg-secondary/60":e.is_selected}])},[a(ne,{class:"chapter_log_check",value:e.is_selected,"onUpdate:value":n=>e.is_selected=n},null,8,["value","onUpdate:value"]),a(j,{class:"chapter_log_control",onMore:n=>U(n,i),onDel:n=>e.is_delete=!0,hasDel:!1,hasAdd:!1},null,8,["onMore","onDel"]),t("div",{class:u(["chapter_log_info",{"flex-row-reverse":G(e).is_hero,"-replay":e.is_replay}])},[a(qe,{class:"chapter_log_avatar",name:G(e).name??e.人物},null,8,["name"]),t("div",ft,[a(Ie,{class:"chapter_log_dialog",value:e.和訳,type:l(m)(e)},null,8,["value","type"])])],2)],2),t("div",bt,[y((r(),B(V,{class:u(["chapter_log_switch",{"text-replay":e.is_replay}]),active:e.is_replay,title:"再放送"},{default:w(()=>[F("R")]),_:2},1032,["active","class"])),[[_,e.is_replay]]),y((r(),B(V,{class:u(["chapter_log_switch",{"text-unknown":e.is_unknown}]),active:e.is_unknown,title:"未解明"},{default:w(()=>[F("U")]),_:2},1032,["active","class"])),[[_,e.is_unknown]]),y((r(),B(V,{class:u(["chapter_log_switch",{"-monolog":e.is_monolog}]),active:e.is_monolog,title:"独り言"},{default:w(()=>[F("S")]),_:2},1032,["active","class"])),[[_,e.is_monolog]])])],42,mt),t("div",wt,[t("div",yt,[a(v,{class:"col-span-2",value:e.顯示角色,list:l(b)},null,8,["value","list"]),a(v,{value:e.角色差分,list:l(f)(e.顯示角色).sprite},null,8,["value","list"]),a(v,{value:e.差分特效,list:l(O)},null,8,["value","list"])]),t("div",Dt,[a(v,{class:"col-span-2",value:e.立ち絵2,list:l(b)},null,8,["value","list"]),a(v,{value:e.十六夜差分,list:l(f)(e.立ち絵2).sprite},null,8,["value","list"]),a(v,{value:e.主角特效,list:l(O)},null,8,["value","list"])]),t("div",xt,[a(v,{value:e.SE},null,8,["value"]),a(v,{value:e.Voice},null,8,["value"])]),t("div",kt,[a(v,{value:e.備註},null,8,["value"])])])],512)),[[W,!e.is_delete]]),y(a(le,{class:"chapter_log_dragline",onDrop:n=>X(n,i+1),dragging:Q.value},null,8,["onDrop","dragging"]),[[W,!e.is_delete]])],64))),128))]),a(Te,{positions:Z.value,onClear:U,onUse:he,onlyAdd:Y.value},null,8,["positions","onlyAdd"]),a(Me,{open:P.value,"onUpdate:open":s[12]||(s[12]=e=>P.value=e),id:k.id,type:k.type,onAdd:ge},null,8,["open","id","type"])]),_:1})}}},Wt=M(Ct,[["__scopeId","data-v-76448515"]]);export{Wt as default};
