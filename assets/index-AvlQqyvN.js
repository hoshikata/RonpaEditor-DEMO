import{_ as x,o as l,c as r,a as t,w as g,v as b,F as V,t as k,b as _,u as m,n as Y,d as P,s as z,r as y,e as w,f as W,g as J,h as C,i as G,j as R,k as Z,l as Q,m as X,p as ee,q as te,x as se,y as ne,z as oe,A as ae,B as ie,C as le,D as ce,E as _e,G as re,H as de,I as ue,J as ge,K as ve,L as he,M as me,N as pe,O as $e,P as fe,Q as be,R as we,S as xe,T as ye,U as ke,V as Ce,W as Me,X as Ee,Y as D,Z as Se,$ as ze,a0 as A}from"./index-DjFC1Eq4.js";import{I as Ie}from"./Menu.vue_vue_type_style_index_0_scoped_c8f5dede_lang-Bp3pNzl9.js";import{W as Be}from"./Wrap-Bb-HY95l.js";import{D as Ve,M as He}from"./Dialog-Dv_TtpeP.js";import{R as De}from"./Range-bSczRBnP.js";const Re={name:"RiShiningFill"},Oe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Te=t("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10z"},null,-1),qe=[Te];function Le(e,c,s,u,a,n){return l(),r("svg",Oe,qe)}const Ue=x(Re,[["render",Le]]),Ae={name:"RiShiningLine"},Fe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ne=t("path",{fill:"currentColor",d:"M1 11c5.523 0 10-4.477 10-10h2c0 5.523 4.477 10 10 10v2c-5.523 0-10 4.477-10 10h-2c0-5.523-4.477-10-10-10zm4.803 1A12.044 12.044 0 0 1 12 18.197A12.043 12.043 0 0 1 18.197 12A12.044 12.044 0 0 1 12 5.803A12.044 12.044 0 0 1 5.803 12"},null,-1),je=[Ne];function Pe(e,c,s,u,a,n){return l(),r("svg",Fe,je)}const We=x(Ae,[["render",Pe]]),Ge={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ze=t("path",{fill:"currentColor",d:"M14 6H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1m0 4H4c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1M4 16h6c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M19 6c-1.1 0-2 .9-2 2v6.18c-.31-.11-.65-.18-1-.18c-1.84 0-3.28 1.64-2.95 3.54c.21 1.21 1.2 2.2 2.41 2.41c1.9.33 3.54-1.11 3.54-2.95V8h2c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),Ke=[Ze];function Ye(e,c){return l(),r("svg",Ge,[...Ke])}const Je={name:"ic-round-queue-music",render:Ye},Qe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Xe=t("path",{fill:"currentColor",d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"},null,-1),et=[Xe];function tt(e,c){return l(),r("svg",Qe,[...et])}const st={name:"ic-sharp-keyboard-voice",render:tt},nt={name:"MaterialSymbolsDeleteOutline"},ot={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},at=t("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"},null,-1),it=[at];function lt(e,c,s,u,a,n){return l(),r("svg",ot,it)}const F=x(nt,[["render",lt]]),ct={name:"MaterialSymbolsEditSquareOutline"},_t={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},rt=t("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h8.925l-2 2H5v14h14v-6.95l2-2V19q0 .825-.587 1.413T19 21zm4-6v-4.25l9.175-9.175q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4t-.137.738t-.438.662L13.25 15zM21.025 4.4l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"},null,-1),dt=[rt];function ut(e,c,s,u,a,n){return l(),r("svg",_t,dt)}const N=x(ct,[["render",ut]]),gt={class:"preview_log_head"},vt={class:"preview_log_title"},ht={class:"preview_log_subtitle text-sm"},mt={class:"preview_log_content"},pt={class:"preview_log_foot"},$t={class:"preview_button ml-auto",title:"編集"},ft={class:"preview_log_head group-hover:opacity-75"},bt={class:"shrink-0 font-medium"},wt={class:"preview_log_subtitle text-xs leading-none"},xt={class:"h-1em"},yt={class:"h-1em"},kt={class:"preview_log_content group-hover:opacity-75"},Ct={class:"preview_log_foot"},Mt={class:"preview_log_mark_1"},Et={class:"preview_log_mark_1"},St={class:"preview_log_mark_1"},zt={class:"preview_button ml-auto",title:"編集"},It={__name:"LogItem",props:{id:{type:[Number,String],default:0},log:{type:[Object],default:()=>({})}},emits:["update:id","edit","delete","stop"],setup(e,{emit:c}){const s=c;return(u,a)=>g((l(),r("div",{class:Y(["preview_log",{"-active":e.log.id===e.id}])},[e.log.is_showtime?(l(),r(V,{key:0},[t("div",gt,[t("h6",vt,k(e.log.人物),1),t("p",ht,k(e.log.show_time),1)]),t("p",mt,k(e.log.show_name),1),t("div",pt,[t("button",$t,[_(N)]),t("button",{class:"preview_button ml-1",onClick:a[0]||(a[0]=n=>s("delete")),title:"削除"},[_(F)])])],64)):(l(),r(V,{key:1},[t("button",{class:"group contents",onClick:a[1]||(a[1]=n=>{s("update:id",e.log.id),s("stop")})},[t("div",ft,[t("h6",bt,k(e.log.人物),1),t("p",wt,[t("span",xt,k(e.log.十六夜差分),1),t("span",yt,k(e.log.角色差分),1)])]),t("p",kt,k(e.log.和訳),1)]),t("div",Ct,[g(t("span",Mt,"R",512),[[b,e.log.is_replay]]),g(t("span",Et,"U",512),[[b,e.log.is_unknown]]),g(t("span",St,"S",512),[[b,e.log.is_solo]]),g(_(Ue,{class:"preview_log_mark_2"},null,512),[[b,e.log.差分特效]]),g(_(We,{class:"preview_log_mark_2"},null,512),[[b,e.log.主角特效]]),g(_(m(Je),{class:"preview_log_mark_2"},null,512),[[b,e.log.SE]]),g(_(m(st),{class:"preview_log_mark_2"},null,512),[[b,e.log.Voice]]),t("button",zt,[_(N)]),t("button",{class:"preview_button ml-1",onClick:a[2]||(a[2]=n=>e.log.is_delete=!0),title:"削除"},[_(F)])])],64))],2)),[[b,!e.log.is_delete]])}},Bt=x(It,[["__scopeId","data-v-0f3503fe"]]),Vt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ht=t("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1),Dt=[Ht];function Rt(e,c){return l(),r("svg",Vt,[...Dt])}const Ot={name:"ic-baseline-stop",render:Rt},Tt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qt=t("path",{fill:"currentColor",d:"M8 5v14l11-7z"},null,-1),Lt=[qt];function Ut(e,c){return l(),r("svg",Tt,[...Lt])}const At={name:"ic-baseline-play-arrow",render:Ut},Ft={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Nt=t("path",{fill:"currentColor",d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"},null,-1),jt=[Nt];function Pt(e,c){return l(),r("svg",Ft,[...jt])}const j={name:"ic-baseline-skip-previous",render:Pt},Wt={name:"MdiTarget"},Gt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Zt=t("path",{fill:"currentColor",d:"M11 2v2.07A8 8 0 0 0 4.07 11H2v2h2.07A8 8 0 0 0 11 19.93V22h2v-2.07A8 8 0 0 0 19.93 13H22v-2h-2.07A8 8 0 0 0 13 4.07V2m-2 4.08V8h2V6.09c2.5.41 4.5 2.41 4.92 4.91H16v2h1.91c-.41 2.5-2.41 4.5-4.91 4.92V16h-2v1.91C8.5 17.5 6.5 15.5 6.08 13H8v-2H6.09C6.5 8.5 8.5 6.5 11 6.08M12 11a1 1 0 0 0-1 1a1 1 0 0 0 1 1a1 1 0 0 0 1-1a1 1 0 0 0-1-1"},null,-1),Kt=[Zt];function Yt(e,c,s,u,a,n){return l(),r("svg",Gt,Kt)}const Jt=x(Wt,[["render",Yt]]),Qt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Xt=t("path",{fill:"currentColor",d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"},null,-1),es=[Xt];function ts(e,c){return l(),r("svg",Qt,[...es])}const ss={name:"ic-baseline-fullscreen",render:ts},ns={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},os=t("path",{fill:"currentColor",d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"},null,-1),as=[os];function is(e,c){return l(),r("svg",ns,[...as])}const ls={name:"ic-baseline-fullscreen-exit",render:is},cs={class:"preview_control"},_s=["disabled"],rs=["disabled"],ds={__name:"Control",props:{index:{type:[Number,String],default:0},length:{type:[Number],default:0},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1}},emits:["update:index","update:play","target","stop"],setup(e,{emit:c}){const s=e,u=c,a=P(),{fullscreen:n}=z(a),o=y(0);w(o,$=>u("update:index",$)),w(()=>s.index,$=>o.value=$,{immediate:!0});const p=()=>{const $=o.value;s.play&&setTimeout(()=>{const i=o.value>=s.length;s.index===$&&s.play&&!s.typing&&!i&&(o.value+=1),i&&u("update:play",!1),p()},3e3)};return w(()=>s.play,p),w(()=>s.typing,p),($,i)=>(l(),r("div",cs,[t("button",{class:"preview_button",onClick:i[0]||(i[0]=f=>o.value-=1),disabled:o.value===0,title:"前へ"},[_(m(j))],8,_s),t("button",{class:"preview_button",onClick:i[1]||(i[1]=f=>u("update:play",!e.play)),title:"プレイ"},[g(_(m(At),null,null,512),[[b,!e.play]]),g(_(m(Ot),null,null,512),[[b,e.play]])]),t("button",{class:"preview_button",onClick:i[2]||(i[2]=f=>o.value+=1),disabled:o.value===e.length,title:"次へ"},[_(m(j),{class:"-scale-x-100"})],8,rs),_(De,{class:"mx-3 grow !bg-dark-text",value:o.value,"onUpdate:value":i[3]||(i[3]=f=>o.value=f),onChange:i[4]||(i[4]=f=>u("stop")),min:0,max:e.length,step:1},null,8,["value","max"]),g(t("button",{class:"preview_button",onClick:i[5]||(i[5]=f=>u("target")),title:"今のセリフへ"},[_(Jt)],512),[[b,!m(n)]]),t("button",{class:"preview_button",onClick:i[6]||(i[6]=f=>n.value=!m(n)),title:"全画面モード"},[g(_(m(ss),null,null,512),[[b,!m(n)]]),g(_(m(ls),null,null,512),[[b,m(n)]])])]))}},us=x(ds,[["__scopeId","data-v-b702e4f5"]]),gs={class:"preview_dialog"},vs={__name:"Comment",props:{data:{type:[Object],default:()=>({})},play:{type:[Boolean],default:!1},typing:{type:[Boolean],default:!1}},emits:["update:typing"],setup(e,{emit:c}){const s=e,u=c,a=W(),{dialogType:n}=a,o=J({index:0}),p=C(()=>s.data.和訳??""),$=C(()=>s.play?p.value.slice(0,o.index):p.value),i=()=>{p.value&&(u("update:typing",!0),o.index=0)},f=()=>{if(!s.play)return;if(o.index===p.value.length)return u("update:typing",!1);setTimeout(()=>{s.typing?o.index+=1:o.index=p.value.length},50)};return w(()=>s.data,i),w($,f,{immediate:!0}),w(()=>o.index,f),(M,S)=>(l(),r("div",gs,[_(Ve,{value:$.value,type:m(n)(e.data)},null,8,["value","type"])]))}},hs=x(vs,[["__scopeId","data-v-03e4bdd1"]]),ms="/RonpaEditor-DEMO/assets/01-1-BEWnV-eK.png",ps="/RonpaEditor-DEMO/assets/01-2-C5aY_0A6.png",$s="/RonpaEditor-DEMO/assets/01-3-BkAivSEO.png",fs="/RonpaEditor-DEMO/assets/01-4-BPpjUdai.png",bs="/RonpaEditor-DEMO/assets/01-5-B7f349EM.png",ws="/RonpaEditor-DEMO/assets/01-6-C4tZddkk.png",H=e=>(re("data-v-836c95a2"),e=e(),de(),e),xs={class:"-ui"},ys=H(()=>t("img",{class:"-ui",src:ms},null,-1)),ks=H(()=>t("img",{class:"-ui",src:ps},null,-1)),Cs=H(()=>t("img",{class:"-ui",src:$s},null,-1)),Ms=H(()=>t("img",{class:"-ui",src:fs},null,-1)),Es={class:"-ui",src:bs},Ss={class:"-ui",src:ws},zs={class:"-ui -replay z-20"},Is={__name:"UI",props:{data:{type:[Object],default:()=>({})},contents:{type:[Array],default:()=>[]}},setup(e){const c=e,s=G(),{characterList:u}=z(s),a=C(()=>u.value.find(o=>(c.data.人物??"")===o.name)??{}),n=o=>new URL(Object.assign({"../../../assets/image/ui/01-1.png":Q,"../../../assets/image/ui/01-2.png":X,"../../../assets/image/ui/01-3.png":ee,"../../../assets/image/ui/01-4.png":te,"../../../assets/image/ui/01-5.png":se,"../../../assets/image/ui/01-6.png":ne,"../../../assets/image/ui/02-1.png":oe,"../../../assets/image/ui/02-2.png":ae,"../../../assets/image/ui/mask_1.png":ie,"../../../assets/image/ui/mask_2.png":le,"../../../assets/image/ui/mask_3.png":ce,"../../../assets/image/ui/mask_4.png":_e})[`../../../assets/image/ui/${o}.png`],import.meta.url).href;return(o,p)=>{const $=R("visible");return l(),r("div",xs,[t("div",{class:"-ui -mask",style:Z({"mask-image":"url("+n("mask_2")+")"})},null,4),ys,ks,Cs,Ms,g(t("img",Es,null,512),[[$,!a.value.is_hero&&!e.data.is_system&&!e.data.is_announce]]),g(t("img",Ss,null,512),[[$,a.value.is_hero&&!e.data.is_solo]]),g(t("div",zs,null,512),[[$,e.data.is_replay]])])}}},Bs=x(Is,[["__scopeId","data-v-836c95a2"]]),Vs={class:"-ui"},Hs=["src"],Ds={__name:"Background",props:{contents:{type:[Array],default:()=>[]}},setup(e){const c=e,s=C(()=>c.contents.filter(n=>n.is_showtime&&n.show_time==="BG")),u=C(()=>{var n;return(n=s.value.reverse()[0])==null?void 0:n.show_name}),a=n=>new URL(Object.assign({"../../../assets/image/background/圖書館前.png":ue,"../../../assets/image/background/大廳.png":ge,"../../../assets/image/background/學裁場.png":ve,"../../../assets/image/background/廚房.png":he,"../../../assets/image/background/房間.png":me,"../../../assets/image/background/房間關燈.png":pe,"../../../assets/image/background/操縱室內.png":$e,"../../../assets/image/background/救生艇內.png":fe,"../../../assets/image/background/救生艇外.png":be,"../../../assets/image/background/教室.png":we,"../../../assets/image/background/美食節.png":xe,"../../../assets/image/background/花園.png":ye,"../../../assets/image/background/走廊.png":ke,"../../../assets/image/background/食堂.png":Ce})[`../../../assets/image/background/${n}.png`],import.meta.url).href;return(n,o)=>{const p=R("visible");return l(),r("div",Vs,[g(t("img",{class:"-ui",src:a(u.value)},null,8,Hs),[[p,u.value]])])}}},Rs="/RonpaEditor-DEMO/assets/%EF%BC%9F%EF%BC%9F%EF%BC%9F-DhUECEZf.png",Os={class:"-ui"},Ts=["src"],qs={class:"size-full object-contain",src:Rs},Ls={__name:"NameTag",props:{data:{type:[Object],default:()=>({})}},setup(e){const c=e,s=G(),{characterList:u}=z(s),a=C(()=>u.value.find(n=>(c.data.人物??"")===n.name)??{});return(n,o)=>{const p=R("visible");return l(),r("div",Os,[g((l(),r("div",{class:"absolute",style:Z({height:"4cqw",bottom:"13.5cqw",left:a.value.is_hero?"71cqw":"4cqw"})},[g(t("img",{class:"size-full object-contain",src:a.value.image_name},null,8,Ts),[[b,!e.data.is_unknown]]),g(t("img",qs,null,512),[[b,e.data.is_unknown]])],4)),[[p,!e.data.is_solo]])])}}},Us={class:"preview_title"},As=["value"],Fs=["data-id"],Ns={class:"preview"},js={__name:"index",setup(e){const c=P(),{fullscreen:s}=z(c),u=W(),{chapterIndex:a,chapterNames:n,chapterData:o}=z(u),{getClientRect:p}=Me(),$=y(null),i=y(0),f=y(0),M=y({}),S=C(()=>o.value.filter(h=>!h.is_delete&&!h.is_showtime)),O=C(()=>{const h=o.value.findIndex(d=>d.id===i.value);return o.value.slice(0,h+1)});w(S,h=>{var d;return i.value=((d=h[0])==null?void 0:d.id)??0}),w(i,h=>{const d=o.value.find(v=>v.id===h)??{};d.is_showtime||(M.value=d,f.value=S.value.findIndex(v=>v.id===d.id))}),w(f,h=>{var d;return i.value=((d=S.value[h])==null?void 0:d.id)??0});const I=y(!1),B=y(!1),T=()=>I.value&&B.value,K=()=>{const h=[...$.value].find(E=>E.dataset.id*1===i.value);if(!h)return;const{height:d,top:v}=p(h);h.parentElement.scrollBy({top:v-d,behavior:"smooth"})},q=y(null);w(s,h=>{h?q.value.requestFullscreen():document.exitFullscreen()});const L=y(null),U=h=>L.value=h;return(h,d)=>(l(),Ee(Be,{class:"flex-row-reverse",main:"!p-0",side:"!p-0 border-4 border-transparent"},{side_head:D(()=>[_(He,{positions:L.value,onClear:U,onlyAdd:!0},null,8,["positions"]),t("div",Us,[g(t("select",{class:"preview_title_select","onUpdate:modelValue":d[0]||(d[0]=v=>ze(a)?a.value=v:null)},[(l(!0),r(V,null,A(m(n),(v,E)=>(l(),r("option",{value:E},k(v),9,As))),256))],512),[[Se,m(a)]]),t("button",{class:"preview_button",onClick:U},[_(m(Ie))])])]),side:D(()=>[(l(!0),r(V,null,A(m(o),v=>(l(),r("div",{key:v.id,"data-id":v.id,ref_for:!0,ref_key:"logElem",ref:$},[_(Bt,{id:i.value,"onUpdate:id":d[1]||(d[1]=E=>i.value=E),log:v,onDelete:E=>v.is_delete=!0,onStop:T},null,8,["id","log","onDelete"])],8,Fs))),128))]),default:D(()=>[t("div",{class:"preview_container",ref_key:"preview",ref:q},[t("div",Ns,[_(Ds,{contents:O.value},null,8,["contents"]),_(Bs,{data:M.value,contents:O.value},null,8,["data","contents"]),_(Ls,{data:M.value},null,8,["data"]),_(hs,{data:M.value,play:I.value,typing:B.value,"onUpdate:typing":d[2]||(d[2]=v=>B.value=v)},null,8,["data","play","typing"])]),_(us,{index:f.value,"onUpdate:index":d[3]||(d[3]=v=>f.value=v),play:I.value,"onUpdate:play":d[4]||(d[4]=v=>I.value=v),typing:B.value,length:S.value.length-1,onTarget:K,onStop:T},null,8,["index","play","typing","length"])],512)]),_:1}))}},Ys=x(js,[["__scopeId","data-v-0708b9b2"]]);export{Ys as default};
