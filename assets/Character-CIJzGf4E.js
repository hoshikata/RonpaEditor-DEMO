import{o as d,d as c,e as n,_ as k,C as D,m as g,h as m,f as b,D as I,n as L,r as F,E as x,c as V,w as E,F as U,j as M,y as h,G as C,A as H,B as R}from"./index-CxNknVP4.js";import{H as O}from"./Header-C8ZjU_eh.js";const S={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},T=n("path",{fill:"currentColor",d:"m12 17.27l4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72l3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41l-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18l-1.1 4.72c-.2.86.73 1.54 1.49 1.08z"},null,-1),j=[T];function z(l,i){return d(),c("svg",S,[...j])}const N={name:"ic-round-star",render:z},A={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},P=n("path",{fill:"currentColor",d:"M18 12.998h-5v5a1 1 0 0 1-2 0v-5H6a1 1 0 0 1 0-2h5v-5a1 1 0 0 1 2 0v5h5a1 1 0 0 1 0 2"},null,-1),G=[P];function X(l,i){return d(),c("svg",A,[...G])}const y={name:"ic-round-plus",render:X},q={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},J=n("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4"},null,-1),K=[J];function Q(l,i){return d(),c("svg",q,[...K])}const W={name:"ic-round-close",render:Q},Y={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Z=n("path",{fill:"currentColor",d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2s-2 .9-2 2s.9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2"},null,-1),ee=[Z];function te(l,i){return d(),c("svg",Y,[...ee])}const se={name:"ic-round-drag-indicator",render:te},ne={class:"grid content-center justify-items-center gap-2 text-2xl"},oe={__name:"Control",props:{more:{type:[Boolean],default:!0}},emits:["add","remove"],setup(l,{emit:i}){const u=i,p=()=>{console.log("click")},v=()=>{console.log("drag")};return(f,s)=>{const t=D("visible");return d(),c("div",ne,[g((d(),c("button",{class:"control_button",onClick:s[0]||(s[0]=o=>u("add"))},[m(b(y))])),[[t,l.more]]),n("button",{class:"control_button",onClick:p,onDragstart:v},[m(b(se))],32),g((d(),c("button",{class:"control_button scale-90",onClick:s[1]||(s[1]=o=>u("remove"))},[m(b(W))])),[[t,l.more]])])}}},ae=k(oe,[["__scopeId","data-v-893e61ac"]]);function le(){const{findData:l}=I(),i=(s,t)=>{const o=t.replace(/\s/g,"").toLowerCase().split(","),r=s.name.slice(s.name.lastIndexOf(".")).toLowerCase();return t!==""?o.includes(r):!0},u=s=>s instanceof Blob;return{isFileType:i,isBlobFile:u,blobUrl:(s,t)=>{const o=r=>r.slice(-1)==="/"?"":r;return u(s)?URL.createObjectURL(s):o(t??"")},getFileName:s=>{var o;s=s??"";const t=(o=s.lastIndexOf)==null?void 0:o.call(s,"/");return u(s)||t===-1?s:s.slice(t).slice(1)},getFilesData:(s,t)=>{const o=t.filter(_=>!_.id),r=s.filter(_=>!l(t,_.id)).map(_=>_.name),e=s.filter(_=>l(t,_.id));return{addList:o,delList:r,resultList:e}}}}const ie={class:"upload"},de={class:"upload_input"},ce={class:"upload_image"},_e=["src"],re={__name:"Upload",props:{value:{type:[String],default:""},type:{type:[String],default:"contain"}},emits:["update:value"],setup(l,{emit:i}){const{blobUrl:u}=le(),p=i,v=s=>{const t=s.target.files[0],o=u(t,"");p("update:value",o)},f=()=>p("update:value","");return(s,t)=>{const o=D("visible");return d(),c("div",ie,[g((d(),c("label",de,[m(b(y)),n("input",{class:"hidden",onChange:v,type:"file",accept:"image/*"},null,32)])),[[o,!l.value]]),g((d(),c("div",ce,[n("img",{class:L(["h-full w-full",l.type==="cover"?"object-cover":"object-contain"]),src:l.value},null,10,_e),n("button",{class:"upload_remove",onClick:f},[m(b(y),{class:"rotate-45"})])])),[[o,l.value]])])}}},w=k(re,[["__scopeId","data-v-1f7e3e3e"]]),ue={__name:"DragLine",emits:["drop"],setup(l,{emit:i}){const u=i,p=F(null),v=s=>{p.value.style.setProperty("opacity",s?1:0)},f=s=>{const t=s.dataTransfer.getData("text/plain");v(!1),u("drop",t)};return(s,t)=>(d(),c("div",{class:"drag_line",onDragenter:t[0]||(t[0]=x(o=>v(!0),["prevent"])),onDragleave:t[1]||(t[1]=x(o=>v(!1),["prevent"])),onDragover:t[2]||(t[2]=x(()=>{},["prevent"])),onDrop:f,ref_key:"line",ref:p},null,544))}},B=k(ue,[["__scopeId","data-v-77bbafc9"]]),me="/RonpaEditor-DEMO/assets/headshot_1-CxnizMm5.png",ge="/RonpaEditor-DEMO/assets/headshot_2-xVBmaB3M.png",pe="/RonpaEditor-DEMO/assets/nametag_1-gPs7u1zN.png",ve="/RonpaEditor-DEMO/assets/nametag_2-UDMsHms1.png",$=l=>(H("data-v-4c9e00f6"),l=l(),R(),l),fe={class:"setting_wrap"},he=$(()=>n("div",null,null,-1)),be=$(()=>n("div",{class:"setting_head"},[n("h2",{class:"setting_title"},"アイコン"),n("p",{class:"setting_desc"},"ゲーム内表示"),n("p",{class:"setting_desc highlight"},"★ = 主人公")],-1)),$e=$(()=>n("div",{class:"setting_head col-span-2"},[n("h2",{class:"setting_title"},"お名前"),n("p",{class:"setting_desc"},"EXCEL内表示")],-1)),xe=$(()=>n("div",{class:"setting_head"},[n("h2",{class:"setting_title"},"名札"),n("p",{class:"setting_desc"},"ゲーム内表示"),n("p",{class:"setting_desc"},"（画像がないの場合はテキストで表示します）")],-1)),ke=["draggable","onDragstart"],Ce={key:0,class:"setting_avatar setting_unknown"},ye={key:1,class:"setting_avatar"},De=["onClick"],Ue={class:"setting_detail",draggable:"false"},we=["onUpdate:modelValue","onFocus","onBlur"],Be={class:"setting_col"},Le=$(()=>n("p",{class:"ml-0.5"},"名前の色",-1)),Fe=["onUpdate:modelValue","onFocus","onBlur"],Ie=["onUpdate:modelValue"],Ve={class:"setting_detail"},Ee=["onUpdate:modelValue","onFocus","onBlur"],Me={class:"setting_col"},He=$(()=>n("p",{class:"ml-0.5"},"名前の背景色",-1)),Re=["onUpdate:modelValue","onFocus","onBlur"],Oe=["onUpdate:modelValue"],Se={__name:"Character",setup(l){const i=F([{id:0,name:"？？？？",katakana:"？？？？",name_bg:"#222222",name_text:"#ffffff",image_head:"",image_name:"",unknown:!0,is_drag:!0},{id:1,name:"十六夜魔除",katakana:"イザヨイマヨ",name_bg:"#a64d79",name_text:"#ffff00",image_head:me,image_name:pe,is_hero:!0,is_drag:!0},{id:2,name:"観月星知",katakana:"カンゲツセシル",name_bg:"#674ea7",name_text:"#d4c1a6",image_head:ge,image_name:ve,is_hero:!1,is_drag:!0}]),u=V(()=>i.value.some(t=>t.is_hero)),p=t=>{const o={name:"",katakana:"",name_bg:"#222222",name_text:"#ffffff",image_head:"",image_name:"",is_hero:!1,is_drag:!0},r=[...i.value].sort((e,_)=>_.id-e.id)[0];o.id=r?r.id+1:0,i.value.splice(t+1,0,o)},v=t=>{i.value.splice(t,1)},f=(t,o)=>{t.dataTransfer.dropEffect="move",t.dataTransfer.setData("text/plain",o)},s=(t,o)=>{const[r]=i.value.splice(t,1),e=t>o?o:o-1,_=e<0?0:e;i.value.splice(_,0,r)};return(t,o)=>{const r=D("visible");return d(),c("div",fe,[m(O,{col:"col-span-5"},{default:E(()=>[he,be,$e,xe]),_:1}),m(B,{class:"col-span-5",onDrop:o[0]||(o[0]=e=>s(e,0))}),(d(!0),c(U,null,M(i.value,(e,_)=>(d(),c(U,{key:e.id},[n("div",{class:"setting_container",draggable:e.is_drag,onDragstart:a=>f(a,_),onDrop:o[1]||(o[1]=x(()=>{},["prevent"]))},[m(ae,{class:"row-span-2 -mr-6",onAdd:a=>p(_),onRemove:a=>v(_)},null,8,["onAdd","onRemove"]),e.unknown?(d(),c("div",Ce)):(d(),c("div",ye,[m(w,{class:"h-full w-full",value:e.image_head,"onUpdate:value":a=>e.image_head=a,type:"cover"},null,8,["value","onUpdate:value"]),g((d(),c("button",{class:L(["setting_star",{"setting_star-active":e.is_hero}]),onClick:a=>e.is_hero=!e.is_hero},[m(b(N))],10,De)),[[r,!(u.value&&!e.is_hero)]])])),n("div",Ue,[g(n("input",{class:"setting_name last","onUpdate:modelValue":a=>e.name=a,style:C({"--name-bg":e.name_bg,"--name-text":e.name_text}),onFocus:a=>e.is_drag=!1,onBlur:a=>e.is_drag=!0},null,44,we),[[h,e.name]]),n("div",Be,[Le,g(n("input",{class:"setting_input","onUpdate:modelValue":a=>e.name_text=a,onFocus:a=>e.is_drag=!1,onBlur:a=>e.is_drag=!0},null,40,Fe),[[h,e.name_text]]),n("label",{class:"setting_color",style:C({"background-color":e.name_text})},[g(n("input",{class:"hidden","onUpdate:modelValue":a=>e.name_text=a,type:"color"},null,8,Ie),[[h,e.name_text]])],4)])]),n("div",Ve,[g(n("input",{class:"setting_name first","onUpdate:modelValue":a=>e.katakana=a,onFocus:a=>e.is_drag=!1,onBlur:a=>e.is_drag=!0},null,40,Ee),[[h,e.katakana]]),n("div",Me,[He,g(n("input",{class:"setting_input","onUpdate:modelValue":a=>e.name_bg=a,onFocus:a=>e.is_drag=!1,onBlur:a=>e.is_drag=!0},null,40,Re),[[h,e.name_bg]]),n("label",{class:"setting_color",style:C({"background-color":e.name_bg})},[g(n("input",{class:"hidden","onUpdate:modelValue":a=>e.name_bg=a,type:"color"},null,8,Oe),[[h,e.name_bg]])],4)])]),m(w,{class:"setting_nametag",value:e.image_name,"onUpdate:value":a=>e.image_name=a},null,8,["value","onUpdate:value"])],40,ke),m(B,{class:"col-span-5",onDrop:a=>s(a,_+1)},null,8,["onDrop"])],64))),128))])}}},ze=k(Se,[["__scopeId","data-v-4c9e00f6"]]);export{ze as default};
