import{a as ee}from"./IconDelete-BJudkFbd.js";import{U as O,I as ie}from"./UiItem-DFHlskIF.js";import{_ as G,o as v,c as $,a as e,b as te,s as se,B as ae,k as oe,i as le,r as J,h as T,g as ue,q as pe,w as S,e as i,y,t as o,d as t,F as j,m as A,p as ne,v as V,M as _e,N as de,C as K,D as Q}from"./index-DMmDw4WN.js";import{S as X}from"./Dialog-DMDw_zAC.js";import{_ as ce}from"./Image-DQcPrY4W.js";import{U as re}from"./Upload-CmMGJOQR.js";import{F as Y}from"./Fancy-8JKWFHDS.js";import{R as x}from"./Resource-CsnHp2_F.js";import{_ as ve,R as w}from"./Radio-CDTUl66q.js";import{R as r}from"./Range-bLdG_CQ1.js";import{A as ge}from"./Aspect-CgpkCsZf.js";import"./useMouse-Uiw0LC_s.js";import"./round-drag-indicator-DacCo0GD.js";import"./Audio-C2EovodT.js";const he={name:"PhCopyFill"},me={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},be=e("path",{fill:"currentColor",d:"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-8 128h-32V88a8 8 0 0 0-8-8H96V48h112Z"},null,-1),fe=[be];function Ue(g,F,h,c,f,d){return v(),$("svg",me,fe)}const we=G(he,[["render",Ue]]),W=g=>(_e("data-v-ace35cd9"),g=g(),de(),g),ye={class:"popup_window"},$e={class:"popup_side"},De={class:"contents"},Ie={class:"popup_label"},ke={class:"contents"},xe={class:"popup_plus_group"},Fe={class:"popup_label"},Ce=["title"],Se={class:"popup_images_group"},Be={class:"contents"},Re={class:"popup_label"},Ne={class:"popup_images_group"},Ve={class:"contents"},je={class:"popup_label"},Ae={class:"popup_range_group"},Ee=W(()=>e("hr",{class:"popup_hr"},null,-1)),Le={class:"popup_title"},Pe={class:"contents"},qe={class:"popup_label"},He={class:"popup_images_group"},Me={class:"contents"},Oe={class:"popup_label"},Te={class:"popup_range_group"},Ge={class:"contents"},We={class:"popup_label"},Ze={class:"popup_range_group"},ze={class:"contents"},Je={class:"popup_label"},Ke={class:"popup_range_group"},Qe=W(()=>e("hr",{class:"popup_hr"},null,-1)),Xe={class:"popup_title"},Ye={class:"contents"},et={class:"popup_label"},tt={class:"contents"},st={class:"popup_label"},at={class:"contents"},ot={class:"popup_subtitle"},lt={class:"contents"},nt={class:"popup_label"},it={class:"contents"},ut={class:"popup_label"},pt={class:"contents"},_t={class:"popup_label"},dt={class:"contents"},ct={class:"popup_label"},rt={class:"contents"},vt={class:"popup_subtitle"},gt={class:"contents"},ht={class:"popup_label"},mt={class:"popup_images_group"},bt={class:"contents"},ft={class:"popup_label"},Ut={class:"popup_range_group"},wt={class:"contents"},yt={class:"popup_label"},$t={class:"popup_range_group"},Dt={class:"contents"},It={class:"popup_label"},kt={class:"popup_range_group"},xt=W(()=>e("hr",{class:"popup_hr"},null,-1)),Ft={class:"popup_title"},Ct={class:"contents"},St={class:"popup_label"},Bt={class:"contents"},Rt={class:"popup_subtitle"},Nt={class:"contents"},Vt={class:"popup_label"},jt={class:"popup_images_group"},At={class:"contents"},Et={class:"popup_label"},Lt={class:"popup_range_group"},Pt={class:"contents"},qt={class:"popup_label"},Ht={class:"popup_range_group"},Mt={class:"contents"},Ot={class:"popup_label"},Tt={class:"popup_range_group"},Gt={class:"popup_foot"},Wt=["title"],Zt=["title"],zt={__name:"UiEdit",props:{open:{type:[Boolean],default:!1},id:{type:[Number,String],default:""}},emits:["update:open","add","fancy"],setup(g,{emit:F}){const h=g,c=F,f=te(),{newUI:d}=f,{uiList:C}=se(f),{isDev:E,copyObject:Z,findData:B}=ae(),{delItem:L,uploadItem:P,getDrag:q,dragItem:H,dropItem:D,fancy:z,setFancy:M,changeFancy:m}=oe(),{t:l}=le("lang"),R=J(null),s=J({dialog:{},sprite_1:{},sprite_2:{},name_tag_1:{},name_tag_2:{}}),b=T(()=>q(s.value.images)),I=[{id:!1,name:"1"+l("search.is")+l("ui.position")},{id:!0,name:"2"+l("search.is")+l("ui.position")}],N=()=>{const p=B(C.value,h.id);h.id==="add"?C.value.push(s.value):s.value=Object.assign(p,s.value),c("update:open",!1)},U=p=>{const n=p.target.matches(".popup_window, .popup_window *"),_=p.target.matches(".-cancel");!p.target.matches(".resource_button")&&(!n||_)&&c("update:open",!1)};return ue(()=>h.open,p=>{if(!p)return;const n=B(C.value,h.id);h.id==="add"?s.value=d():s.value=Z(n),E&&console.log({...s.value}),R.value.scrollTo({top:0,left:0})}),(p,n)=>{const _=pe("visible");return S((v(),$("section",{class:"popup",onClick:U},[e("div",ye,[e("div",{class:"popup_container scrollbar",ref_key:"container",ref:R},[i(ge,{class:"popup_aspect !h-cqh lg:!h-[calc(100cqw/16*9)]"},{default:y(()=>[i(O,{class:"border border-light-text",data:s.value,large:!0,edit:!0},null,8,["data"])]),_:1}),e("section",$e,[e("div",De,[e("h6",Ie,o(t(l)("edit.name")),1),i(ve,{class:"popup_input",value:s.value.name,"onUpdate:value":n[0]||(n[0]=a=>s.value.name=a)},null,8,["value"])]),e("div",ke,[e("div",xe,[e("h6",Fe,o(t(l)("ui.assign"))+o(t(l)("edit.image")),1),e("label",{class:"popup_plus",title:t(l)("button.new")},[i(t(ee)),i(re,{class:"hidden",onUpload:n[1]||(n[1]=a=>t(P)(s.value.images,s.value.images.length,a)),multiple:!0})],8,Ce)]),e("div",Se,[(v(!0),$(j,null,A(s.value.images??[],(a,u)=>(v(),ne(x,{key:a.id,data:a,hasDrag:b.value,onDrag:k=>t(H)(s.value.images,...k,u),onDrop:k=>t(D)(s.value.images,k,u+1),onFancy:n[2]||(n[2]=k=>c("fancy",k)),onDel:k=>t(L)(s.value.images,u)},null,8,["data","hasDrag","onDrag","onDrop","onDel"]))),128))])]),e("div",Be,[e("h6",Re,o(t(l)("ui.bg-blur"))+o(`
`)+o(t(l)("ui.area")),1),e("div",Ne,[i(x,{data:{path:s.value.mask},draggable:!1,onUpload:n[3]||(n[3]=a=>s.value.mask=a.path),onDel:n[4]||(n[4]=a=>s.value.mask=""),onFancy:n[5]||(n[5]=a=>c("fancy",a))},null,8,["data"])])]),e("div",Ve,[e("h6",je,o(t(l)("ui.bg-blur"))+o(`
`)+o(t(l)("ui.level")),1),e("div",Ae,[i(r,{value:s.value.blur,"onUpdate:value":n[6]||(n[6]=a=>s.value.blur=a),min:0,max:3,step:.1},null,8,["value"]),e("span",null,o(Math.round(s.value.blur*10)/10),1)])]),Ee,e("h4",Le,o(t(l)("ui.dialog")),1),e("div",Pe,[e("h6",qe,o(t(l)("ui.assign"))+o(t(l)("edit.image")),1),e("div",He,[i(x,{data:{path:s.value.dialog.path},draggable:!1,onUpload:n[7]||(n[7]=a=>s.value.dialog.path=a.path),onDel:n[8]||(n[8]=a=>s.value.dialog.path=""),onFancy:n[9]||(n[9]=a=>c("fancy",a))},null,8,["data"])])]),e("div",Me,[e("h6",Oe,o(t(l)("ui.position"))+"："+o(t(l)("ui.bottom")),1),e("div",Te,[i(r,{value:s.value.dialog.bottom,"onUpdate:value":n[10]||(n[10]=a=>s.value.dialog.bottom=a),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,o(s.value.dialog.bottom),1)])]),e("div",Ge,[e("h6",We,o(t(l)("ui.position"))+"："+o(t(l)("ui.left")),1),e("div",Ze,[i(r,{value:s.value.dialog.left,"onUpdate:value":n[11]||(n[11]=a=>s.value.dialog.left=a),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,o(s.value.dialog.left),1)])]),e("div",ze,[e("h6",Je,o(t(l)("ui.width")),1),e("div",Ke,[i(r,{value:s.value.dialog.width,"onUpdate:value":n[12]||(n[12]=a=>s.value.dialog.width=a),min:50,max:100,step:.5},null,8,["value"]),e("span",null,o(s.value.dialog.width),1)])]),Qe,e("h4",Xe,o(t(l)("ui.name-tag")),1),e("div",Ye,[e("h6",et,o(t(l)("ui.name-tag"))+o(t(l)("search.is"))+o(t(l)("ui.num")),1),i(w,{value:s.value.name_tag_number,"onUpdate:value":n[13]||(n[13]=a=>s.value.name_tag_number=a),list:[1,2],name:"name_tag"},null,8,["value"])]),e("div",tt,[e("h6",st,o(t(l)("data.monolog")),1),i(w,{value:s.value.name_tag_solo_show,"onUpdate:value":n[14]||(n[14]=a=>s.value.name_tag_solo_show=a),list:[{id:!1,name:t(l)("ui.hide")},{id:!0,name:t(l)("ui.show")}],name:"name_tag_solo_show"},null,8,["value","list"])]),S(e("div",at,[e("h5",ot,o(t(l)("ui.name-tag"))+"の"+o(t(l)("ui.position")),1),e("div",lt,[e("h6",nt,o(t(l)("data.monolog")),1),i(w,{value:s.value.name_tag_solo_right,"onUpdate:value":n[15]||(n[15]=a=>s.value.name_tag_solo_right=a),list:I,name:"name_tag_solo_right"},null,8,["value"])]),e("div",it,[e("h6",ut,o(t(l)("edit.hero")),1),i(w,{value:s.value.name_tag_hero_right,"onUpdate:value":n[16]||(n[16]=a=>s.value.name_tag_hero_right=a),list:I,name:"name_tag_hero_right"},null,8,["value"])]),e("div",pt,[e("h6",_t,o(t(l)("edit.char"))+"1",1),i(w,{value:s.value.name_tag_sprite_1_right,"onUpdate:value":n[17]||(n[17]=a=>s.value.name_tag_sprite_1_right=a),list:I,name:"name_tag_sprite_1_right"},null,8,["value"])]),S(e("div",dt,[e("h6",ct,o(t(l)("edit.char"))+"2",1),i(w,{value:s.value.name_tag_sprite_2_right,"onUpdate:value":n[18]||(n[18]=a=>s.value.name_tag_sprite_2_right=a),list:I,name:"name_tag_sprite_2_right"},null,8,["value"])],512),[[V,s.value.sprite_number===2]])],512),[[V,s.value.name_tag_number===2]]),(v(),$(j,null,A(2,a=>S(e("div",rt,[e("h5",vt,o(t(l)("ui.name-tag"))+o(a),1),e("div",gt,[e("h6",ht,o(t(l)("ui.assign"))+o(t(l)("edit.image")),1),e("div",mt,[i(x,{data:{path:s.value["name_tag_"+a].path},draggable:!1,onUpload:u=>s.value["name_tag_"+a].path=u.path,onDel:u=>s.value["name_tag_"+a].path="",onFancy:n[19]||(n[19]=u=>c("fancy",u))},null,8,["data","onUpload","onDel"])])]),e("div",bt,[e("h6",ft,o(t(l)("ui.position"))+"："+o(t(l)("ui.bottom")),1),e("div",Ut,[i(r,{value:s.value["name_tag_"+a].bottom,"onUpdate:value":u=>s.value["name_tag_"+a].bottom=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["name_tag_"+a].bottom),1)])]),e("div",wt,[e("h6",yt,o(t(l)("ui.position"))+"："+o(t(l)("ui.left")),1),e("div",$t,[i(r,{value:s.value["name_tag_"+a].left,"onUpdate:value":u=>s.value["name_tag_"+a].left=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["name_tag_"+a].left),1)])]),e("div",Dt,[e("h6",It,o(t(l)("ui.height")),1),e("div",kt,[i(r,{value:s.value["name_tag_"+a].height,"onUpdate:value":u=>s.value["name_tag_"+a].height=u,min:1,max:20,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["name_tag_"+a].height),1)])])],512),[[V,a===1||a===2&&s.value.name_tag_number===2]])),64)),xt,e("h4",Ft,o(t(l)("edit.char")),1),e("div",Ct,[e("h6",St,o(t(l)("edit.char"))+o(t(l)("search.is"))+o(t(l)("ui.num")),1),i(w,{value:s.value.sprite_number,"onUpdate:value":n[20]||(n[20]=a=>s.value.sprite_number=a),list:[1,2],name:"sprite"},null,8,["value"])]),(v(),$(j,null,A(2,a=>S(e("div",Bt,[e("h5",Rt,o(t(l)("edit.char"))+o(a),1),e("div",Nt,[e("h6",Vt,o(t(l)("ui.area")),1),e("div",jt,[i(x,{data:{path:s.value["sprite_"+a].mask},draggable:!1,onUpload:u=>s.value["sprite_"+a].mask=u.path,onDel:u=>s.value["sprite_"+a].mask="",onFancy:n[21]||(n[21]=u=>c("fancy",u))},null,8,["data","onUpload","onDel"])])]),e("div",At,[e("h6",Et,o(t(l)("ui.position"))+"："+o(t(l)("ui.top")),1),e("div",Lt,[i(r,{value:s.value["sprite_"+a].top,"onUpdate:value":u=>s.value["sprite_"+a].top=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["sprite_"+a].top),1)])]),e("div",Pt,[e("h6",qt,o(t(l)("ui.position"))+"："+o(t(l)("ui.left")),1),e("div",Ht,[i(r,{value:s.value["sprite_"+a].left,"onUpdate:value":u=>s.value["sprite_"+a].left=u,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["sprite_"+a].left),1)])]),e("div",Mt,[e("h6",Ot,o(t(l)("ui.width")),1),e("div",Tt,[i(r,{value:s.value["sprite_"+a].width,"onUpdate:value":u=>s.value["sprite_"+a].width=u,min:20,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,o(s.value["sprite_"+a].width),1)])])],512),[[V,a===1||a===2&&s.value.sprite_number===2]])),64)),e("div",Gt,[e("button",{class:"popup_foot_button",onClick:N,title:t(l)("button.save")},o(t(l)("button.save")),9,Wt),e("button",{class:"popup_foot_button -cancel",title:t(l)("button.cancel")},o(t(l)("button.cancel")),9,Zt)])])],512)])])),[[_,g.open]])}}},Jt=G(zt,[["__scopeId","data-v-ace35cd9"]]),Kt={class:"resource_container"},Qt={class:"resource"},Xt=["onClick","title"],Yt=["onClick","title"],es={class:"resource_footer"},ts={class:"resource_group !flex-wrap !gap-x-5"},ss={class:"resource_group"},as={value:""},os={class:"resource_group"},ls={value:""},ns=["title"],is={__name:"UI",setup(g){const F=te(),{newUI:h}=F,{defaultUI:c,defaultUIForCG:f,uiList:d}=se(F),{copyObject:C,findData:E,findIndex:Z}=ae(),{delItem:B,uploadItem:L,getDrag:P,dragItem:q,dropItem:H,fancy:D,setFancy:z,changeFancy:M}=oe(),{t:m}=le("lang"),l=T(()=>P(d.value)),R=T(()=>E(d.value,D.value)),s=K({open:!1,id:""}),b=K({open:!1,value:""}),I=U=>{const p=C(d.value[U]);p.id=h(d.value),d.value.splice(U+1,0,p)},N=U=>{s.id=U,s.open=!0};return(U,p)=>{var n;return v(),$("div",Kt,[e("div",Qt,[(v(!0),$(j,null,A(t(d)??[],(_,a)=>(v(),ne(x,{key:_.id,data:_,hasDrag:l.value,onDrag:u=>t(q)(t(d),...u,a),onDrop:u=>t(H)(t(d),u,a+1),onFancy:u=>t(z)(t(d),_.id,"id"),onAdd:u=>t(L)(t(d),a+1,[u]),onDel:u=>t(B)(t(d),a)},{image:y(()=>[i(O,{class:"hover:opacity-75",data:_,edit:!0},null,8,["data"])]),button:y(()=>[e("label",{class:"resource_button",onClick:u=>I(a),title:t(m)("button.copy")},[i(we,{class:"mt-0.5"})],8,Xt),e("label",{class:"resource_button",onClick:u=>N(_.id),title:t(m)("button.edit")},[i(ie,{class:"mt-0.5"})],8,Yt)]),_:2},1032,["data","hasDrag","onDrag","onDrop","onFancy","onAdd","onDel"]))),128))]),e("div",es,[e("div",ts,[e("label",ss,[e("span",null,o(t(m)("ui.default-ui")),1),i(X,{class:"resource_select",value:t(c),"onUpdate:value":p[0]||(p[0]=_=>Q(c)?c.value=_:null),options:t(d)},{default:y(()=>[e("option",as,o(t(m)("edit.none")),1)]),_:1},8,["value","options"])]),e("label",os,[e("span",null,o(t(m)("ui.cg-ui")),1),i(X,{class:"resource_select",value:t(f),"onUpdate:value":p[1]||(p[1]=_=>Q(f)?f.value=_:null),options:t(d)},{default:y(()=>[e("option",ls,o(t(m)("ui.none-ui")),1)]),_:1},8,["value","options"])])]),e("label",{class:"resource_plus",onClick:p[2]||(p[2]=_=>N("add")),title:t(m)("button.new")},[i(t(ee))],8,ns)]),i(Jt,{open:s.open,"onUpdate:open":p[3]||(p[3]=_=>s.open=_),id:s.id,onFancy:p[4]||(p[4]=_=>{b.value=_,b.open=!0})},null,8,["open","id"]),i(Y,{open:b.open,"onUpdate:open":p[5]||(p[5]=_=>b.open=_)},{default:y(()=>[i(ce,{src:b.value,alt:b.value},null,8,["src","alt"])]),_:1},8,["open"]),i(Y,{open:t(D).open,"onUpdate:open":p[6]||(p[6]=_=>t(D).open=_),index:t(D).index,length:(n=t(d))==null?void 0:n.length,onPrev:p[7]||(p[7]=_=>t(M)(t(d),-1,"id")),onNext:p[8]||(p[8]=_=>t(M)(t(d),1,"id"))},{default:y(()=>[i(O,{data:R.value,large:!0,edit:!0},null,8,["data"])]),_:1},8,["open","index","length"])])}}},ys=G(is,[["__scopeId","data-v-56e29a41"]]);export{ys as default};
