import{a as ee}from"./IconDelete-BS09BGNd.js";import{U as q,I as ue}from"./UiItem-ayuj81nG.js";import{_ as M,o as g,c as y,a as e,b as te,s as se,x as ae,j as oe,r as J,h as G,g as ie,p as _e,w as F,e as o,y as $,d as u,F as V,l as j,m as le,t as d,v as L,L as ne,M as pe,B as K,C as Q}from"./index-DfzLbYST.js";import{S as X}from"./Dialog-DwTwHXyI.js";import{_ as de}from"./Image-_EoX3Cn8.js";import{U as ce}from"./Upload-D9ea2esF.js";import{F as Y}from"./Fancy-D8VCZh0O.js";import{R as C}from"./Resource-2Xav4wbG.js";import{_ as re,R as U}from"./Radio-CRgRkWyJ.js";import{R as v}from"./Range-C1v_b5Gj.js";import{A as ve}from"./Aspect-CgH8J6_2.js";import"./round-drag-indicator-D-LQYkwE.js";import"./Audio-BN_ZPNUZ.js";const ge={name:"PhCopyFill"},he={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},me=e("path",{fill:"currentColor",d:"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-8 128h-32V88a8 8 0 0 0-8-8H96V48h112Z"},null,-1),fe=[me];function be(c,x,h,r,f,_){return g(),y("svg",he,fe)}const Ue=M(ge,[["render",be]]),p=c=>(ne("data-v-c05cc7c6"),c=c(),pe(),c),$e={class:"popup_window"},ye={class:"popup_side"},we={class:"contents"},Ie=p(()=>e("h6",{class:"popup_label"},"名前",-1)),De={class:"contents"},xe={class:"popup_plus_group"},ke=p(()=>e("h6",{class:"popup_label"},"画像",-1)),Fe={class:"popup_plus",title:"新規"},Ce={class:"popup_images_group"},Se={class:"contents"},Be=p(()=>e("h6",{class:"popup_label"},d(`背景ぼかし
クリッピング`),-1)),Re={class:"popup_images_group"},Le={class:"contents"},Ve=p(()=>e("h6",{class:"popup_label"},d(`背景ぼかし
レベル`),-1)),je={class:"popup_range_group"},Ae=p(()=>e("hr",{class:"popup_hr"},null,-1)),Ee=p(()=>e("h4",{class:"popup_title"},"ダイアログ",-1)),Ne={class:"contents"},Pe=p(()=>e("h6",{class:"popup_label"},"位置：下",-1)),He={class:"popup_range_group"},Oe={class:"contents"},Te=p(()=>e("h6",{class:"popup_label"},"位置：左",-1)),qe={class:"popup_range_group"},Ge={class:"contents"},Me=p(()=>e("h6",{class:"popup_label"},"広さ",-1)),We={class:"popup_range_group"},Ze=p(()=>e("hr",{class:"popup_hr"},null,-1)),ze=p(()=>e("h4",{class:"popup_title"},"名札",-1)),Je={class:"contents"},Ke=p(()=>e("h6",{class:"popup_label"},"名札の数",-1)),Qe={class:"contents"},Xe=p(()=>e("h6",{class:"popup_label"},"独り言の表示",-1)),Ye={class:"contents"},et=p(()=>e("h5",{class:"popup_subtitle"},"名札の位置",-1)),tt={class:"contents"},st=p(()=>e("h6",{class:"popup_label"},"独り言",-1)),at={class:"contents"},ot=p(()=>e("h6",{class:"popup_label"},"主人公",-1)),lt={class:"contents"},nt=p(()=>e("h6",{class:"popup_label"},"立ち絵1",-1)),pt={class:"contents"},ut=p(()=>e("h6",{class:"popup_label"},"立ち絵2",-1)),it={class:"contents"},_t={class:"popup_subtitle"},dt={class:"contents"},ct=p(()=>e("h6",{class:"popup_label"},"画像",-1)),rt={class:"popup_images_group"},vt={class:"contents"},gt=p(()=>e("h6",{class:"popup_label"},"位置：下",-1)),ht={class:"popup_range_group"},mt={class:"contents"},ft=p(()=>e("h6",{class:"popup_label"},"位置：左",-1)),bt={class:"popup_range_group"},Ut={class:"contents"},$t=p(()=>e("h6",{class:"popup_label"},"高さ",-1)),yt={class:"popup_range_group"},wt=p(()=>e("hr",{class:"popup_hr"},null,-1)),It=p(()=>e("h4",{class:"popup_title"},"立ち絵",-1)),Dt={class:"contents"},xt=p(()=>e("h6",{class:"popup_label"},"立ち絵の数",-1)),kt={class:"contents"},Ft={class:"popup_subtitle"},Ct={class:"contents"},St=p(()=>e("h6",{class:"popup_label"},"クリッピング",-1)),Bt={class:"popup_images_group"},Rt={class:"contents"},Lt=p(()=>e("h6",{class:"popup_label"},"位置：上",-1)),Vt={class:"popup_range_group"},jt={class:"contents"},At=p(()=>e("h6",{class:"popup_label"},"位置：左",-1)),Et={class:"popup_range_group"},Nt={class:"contents"},Pt=p(()=>e("h6",{class:"popup_label"},"広さ",-1)),Ht={class:"popup_range_group"},Ot=p(()=>e("button",{class:"popup_foot_button -cancel",title:"キャンセル"},"キャンセル",-1)),Tt={__name:"UiEdit",props:{open:{type:[Boolean],default:!1},id:{type:[Number,String],default:""}},emits:["update:open","add","fancy"],setup(c,{emit:x}){const h=c,r=x,f=te(),{newUI:_}=f,{uiList:k}=se(f),{isDev:E,copyObject:W,findData:S}=ae(),{delItem:N,uploadItem:P,getDrag:H,dragItem:O,dropItem:w,fancy:Z,setFancy:T,changeFancy:z}=oe(),B=J(null),t=J({dialog:{},sprite_1:{},sprite_2:{},name_tag_1:{},name_tag_2:{}}),m=G(()=>H(t.value.images)),I=[{id:!1,name:"1の位置"},{id:!0,name:"2の位置"}],R=()=>{const n=S(k.value,h.id);h.id==="add"?k.value.push(t.value):t.value=Object.assign(n,t.value),r("update:open",!1)},b=n=>{const a=n.target.matches(".popup_window, .popup_window *"),i=n.target.matches(".-cancel");!n.target.matches(".resource_button")&&(!a||i)&&r("update:open",!1)};return ie(()=>h.open,n=>{if(!n)return;const a=S(k.value,h.id);h.id==="add"?t.value=_():t.value=W(a),E&&console.log({...t.value}),B.value.scrollTo({top:0,left:0})}),(n,a)=>{const i=_e("visible");return F((g(),y("section",{class:"popup",onClick:b},[e("div",$e,[e("div",{class:"popup_container scrollbar",ref_key:"container",ref:B},[o(ve,{class:"popup_aspect !h-cqh lg:!h-[calc(100cqw/16*9)]"},{default:$(()=>[o(q,{class:"border border-light-text",data:t.value,large:!0,edit:!0},null,8,["data"])]),_:1}),e("section",ye,[e("div",we,[Ie,o(re,{class:"popup_input",value:t.value.name,"onUpdate:value":a[0]||(a[0]=s=>t.value.name=s)},null,8,["value"])]),e("div",De,[e("div",xe,[ke,e("label",Fe,[o(u(ee)),o(ce,{class:"hidden",onUpload:a[1]||(a[1]=s=>u(P)(t.value.images,t.value.images.length,s)),multiple:!0})])]),e("div",Ce,[(g(!0),y(V,null,j(t.value.images??[],(s,l)=>(g(),le(C,{key:s.id,data:s,hasDrag:m.value,onDrag:D=>u(O)(t.value.images,...D,l),onDrop:D=>u(w)(t.value.images,D,l+1),onFancy:a[2]||(a[2]=D=>r("fancy",D)),onDel:D=>u(N)(t.value.images,l)},null,8,["data","hasDrag","onDrag","onDrop","onDel"]))),128))])]),e("div",Se,[Be,e("div",Re,[o(C,{data:{path:t.value.mask},draggable:!1,onUpload:a[3]||(a[3]=s=>t.value.mask=s.path),onDel:a[4]||(a[4]=s=>t.value.mask=""),onFancy:a[5]||(a[5]=s=>r("fancy",s))},null,8,["data"])])]),e("div",Le,[Ve,e("div",je,[o(v,{value:t.value.blur,"onUpdate:value":a[6]||(a[6]=s=>t.value.blur=s),min:0,max:3,step:.1},null,8,["value"]),e("span",null,d(t.value.blur),1)])]),Ae,Ee,e("div",Ne,[Pe,e("div",He,[o(v,{value:t.value.dialog.bottom,"onUpdate:value":a[7]||(a[7]=s=>t.value.dialog.bottom=s),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,d(t.value.dialog.bottom),1)])]),e("div",Oe,[Te,e("div",qe,[o(v,{value:t.value.dialog.left,"onUpdate:value":a[8]||(a[8]=s=>t.value.dialog.left=s),min:-100,max:100,step:.5},null,8,["value"]),e("span",null,d(t.value.dialog.left),1)])]),e("div",Ge,[Me,e("div",We,[o(v,{value:t.value.dialog.width,"onUpdate:value":a[9]||(a[9]=s=>t.value.dialog.width=s),min:50,max:100,step:.5},null,8,["value"]),e("span",null,d(t.value.dialog.width),1)])]),Ze,ze,e("div",Je,[Ke,o(U,{value:t.value.name_tag_number,"onUpdate:value":a[10]||(a[10]=s=>t.value.name_tag_number=s),list:[1,2],name:"name_tag"},null,8,["value"])]),e("div",Qe,[Xe,o(U,{value:t.value.name_tag_solo_show,"onUpdate:value":a[11]||(a[11]=s=>t.value.name_tag_solo_show=s),list:[{id:!1,name:"非表示"},{id:!0,name:"表示"}],name:"name_tag_solo_show"},null,8,["value"])]),F(e("div",Ye,[et,e("div",tt,[st,o(U,{value:t.value.name_tag_solo_right,"onUpdate:value":a[12]||(a[12]=s=>t.value.name_tag_solo_right=s),list:I,name:"name_tag_solo_right"},null,8,["value"])]),e("div",at,[ot,o(U,{value:t.value.name_tag_hero_right,"onUpdate:value":a[13]||(a[13]=s=>t.value.name_tag_hero_right=s),list:I,name:"name_tag_hero_right"},null,8,["value"])]),e("div",lt,[nt,o(U,{value:t.value.name_tag_sprite_1_right,"onUpdate:value":a[14]||(a[14]=s=>t.value.name_tag_sprite_1_right=s),list:I,name:"name_tag_sprite_1_right"},null,8,["value"])]),F(e("div",pt,[ut,o(U,{value:t.value.name_tag_sprite_2_right,"onUpdate:value":a[15]||(a[15]=s=>t.value.name_tag_sprite_2_right=s),list:I,name:"name_tag_sprite_2_right"},null,8,["value"])],512),[[L,t.value.sprite_number===2]])],512),[[L,t.value.name_tag_number===2]]),(g(),y(V,null,j(2,s=>F(e("div",it,[e("h5",_t,"名札"+d(s),1),e("div",dt,[ct,e("div",rt,[o(C,{data:{path:t.value["name_tag_"+s].path},draggable:!1,onUpload:l=>t.value["name_tag_"+s].path=l.path,onDel:l=>t.value["name_tag_"+s].path="",onFancy:a[16]||(a[16]=l=>r("fancy",l))},null,8,["data","onUpload","onDel"])])]),e("div",vt,[gt,e("div",ht,[o(v,{value:t.value["name_tag_"+s].bottom,"onUpdate:value":l=>t.value["name_tag_"+s].bottom=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,d(t.value["name_tag_"+s].bottom),1)])]),e("div",mt,[ft,e("div",bt,[o(v,{value:t.value["name_tag_"+s].left,"onUpdate:value":l=>t.value["name_tag_"+s].left=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,d(t.value["name_tag_"+s].left),1)])]),e("div",Ut,[$t,e("div",yt,[o(v,{value:t.value["name_tag_"+s].height,"onUpdate:value":l=>t.value["name_tag_"+s].height=l,min:1,max:20,step:.5},null,8,["value","onUpdate:value"]),e("span",null,d(t.value["name_tag_"+s].height),1)])])],512),[[L,s===1||s===2&&t.value.name_tag_number===2]])),64)),wt,It,e("div",Dt,[xt,o(U,{value:t.value.sprite_number,"onUpdate:value":a[17]||(a[17]=s=>t.value.sprite_number=s),list:[1,2],name:"sprite"},null,8,["value"])]),(g(),y(V,null,j(2,s=>F(e("div",kt,[e("h5",Ft,"立ち絵"+d(s),1),e("div",Ct,[St,e("div",Bt,[o(C,{data:{path:t.value["sprite_"+s].mask},draggable:!1,onUpload:l=>t.value["sprite_"+s].mask=l.path,onDel:l=>t.value["sprite_"+s].mask="",onFancy:a[18]||(a[18]=l=>r("fancy",l))},null,8,["data","onUpload","onDel"])])]),e("div",Rt,[Lt,e("div",Vt,[o(v,{value:t.value["sprite_"+s].top,"onUpdate:value":l=>t.value["sprite_"+s].top=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,d(t.value["sprite_"+s].top),1)])]),e("div",jt,[At,e("div",Et,[o(v,{value:t.value["sprite_"+s].left,"onUpdate:value":l=>t.value["sprite_"+s].left=l,min:-100,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,d(t.value["sprite_"+s].left),1)])]),e("div",Nt,[Pt,e("div",Ht,[o(v,{value:t.value["sprite_"+s].width,"onUpdate:value":l=>t.value["sprite_"+s].width=l,min:20,max:100,step:.5},null,8,["value","onUpdate:value"]),e("span",null,d(t.value["sprite_"+s].width),1)])])],512),[[L,s===1||s===2&&t.value.sprite_number===2]])),64)),e("div",{class:"popup_foot"},[e("button",{class:"popup_foot_button",onClick:R,title:"保存"},"保存"),Ot])])],512)])])),[[i,c.open]])}}},qt=M(Tt,[["__scopeId","data-v-c05cc7c6"]]),A=c=>(ne("data-v-858f9ab6"),c=c(),pe(),c),Gt={class:"resource_container"},Mt={class:"resource"},Wt=["onClick"],Zt=["onClick"],zt={class:"resource_footer"},Jt={class:"resource_group !flex-wrap !gap-x-5"},Kt={class:"resource_group"},Qt=A(()=>e("span",null,"デフォルトUI",-1)),Xt=A(()=>e("option",{value:""},"なし",-1)),Yt={class:"resource_group"},es=A(()=>e("span",null,"CGのUI設定",-1)),ts=A(()=>e("option",{value:""},"固定なし",-1)),ss={__name:"UI",setup(c){const x=te(),{newUI:h}=x,{defaultUI:r,defaultUIForCG:f,uiList:_}=se(x),{copyObject:k,findData:E,findIndex:W}=ae(),{delItem:S,uploadItem:N,getDrag:P,dragItem:H,dropItem:O,fancy:w,setFancy:Z,changeFancy:T}=oe(),z=G(()=>P(_.value)),B=G(()=>E(_.value,w.value)),t=K({open:!1,id:""}),m=K({open:!1,value:""}),I=b=>{const n=k(_.value[b]);n.id=h(_.value),_.value.splice(b+1,0,n)},R=b=>{t.id=b,t.open=!0};return(b,n)=>{var a;return g(),y("div",Gt,[e("div",Mt,[(g(!0),y(V,null,j(u(_)??[],(i,s)=>(g(),le(C,{key:i.id,data:i,hasDrag:z.value,onDrag:l=>u(H)(u(_),...l,s),onDrop:l=>u(O)(u(_),l,s+1),onFancy:l=>u(Z)(u(_),i.id,"id"),onAdd:l=>u(N)(u(_),s+1,[l]),onDel:l=>u(S)(u(_),s)},{image:$(()=>[o(q,{class:"hover:opacity-75",data:i,edit:!0},null,8,["data"])]),button:$(()=>[e("label",{class:"resource_button",onClick:l=>I(s),title:"コピー"},[o(Ue,{class:"mt-0.5"})],8,Wt),e("label",{class:"resource_button",onClick:l=>R(i.id),title:"編集"},[o(ue,{class:"mt-0.5"})],8,Zt)]),_:2},1032,["data","hasDrag","onDrag","onDrop","onFancy","onAdd","onDel"]))),128))]),e("div",zt,[e("div",Jt,[e("label",Kt,[Qt,o(X,{class:"resource_select",value:u(r),"onUpdate:value":n[0]||(n[0]=i=>Q(r)?r.value=i:null),options:u(_)},{default:$(()=>[Xt]),_:1},8,["value","options"])]),e("label",Yt,[es,o(X,{class:"resource_select",value:u(f),"onUpdate:value":n[1]||(n[1]=i=>Q(f)?f.value=i:null),options:u(_)},{default:$(()=>[ts]),_:1},8,["value","options"])])]),e("label",{class:"resource_plus",onClick:n[2]||(n[2]=i=>R("add")),title:"新規"},[o(u(ee))])]),o(qt,{open:t.open,"onUpdate:open":n[3]||(n[3]=i=>t.open=i),id:t.id,onFancy:n[4]||(n[4]=i=>{m.value=i,m.open=!0})},null,8,["open","id"]),o(Y,{open:m.open,"onUpdate:open":n[5]||(n[5]=i=>m.open=i)},{default:$(()=>[o(de,{src:m.value,alt:m.value},null,8,["src","alt"])]),_:1},8,["open"]),o(Y,{open:u(w).open,"onUpdate:open":n[6]||(n[6]=i=>u(w).open=i),index:u(w).index,length:(a=u(_))==null?void 0:a.length,onPrev:n[7]||(n[7]=i=>u(T)(u(_),-1,"id")),onNext:n[8]||(n[8]=i=>u(T)(u(_),1,"id"))},{default:$(()=>[o(q,{data:B.value,large:!0,edit:!0},null,8,["data"])]),_:1},8,["open","index","length"])])}}},hs=M(ss,[["__scopeId","data-v-858f9ab6"]]);export{hs as default};
